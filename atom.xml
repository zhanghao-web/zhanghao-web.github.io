<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é»˜é»˜é»˜é»˜ç‡ƒ</title>
  
  <subtitle>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢</subtitle>
  <link href="https://shinichikudo-fe.github.io/atom.xml" rel="self"/>
  
  <link href="https://shinichikudo-fe.github.io/"/>
  <updated>2021-01-11T01:53:33.295Z</updated>
  <id>https://shinichikudo-fe.github.io/</id>
  
  <author>
    <name>å¼ ç™½å‘Šä¸¶</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹è®¾è®¡æ¨¡å¼</title>
    <link href="https://shinichikudo-fe.github.io/2021/01/11/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>https://shinichikudo-fe.github.io/2021/01/11/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-01-11T01:15:43.000Z</published>
    <updated>2021-01-11T01:53:33.295Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://juejin.cn/post/6844903503266054157">åŸæ–‡åœ°å€</a></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>è®¾è®¡æ¨¡å¼çš„å®šä¹‰ï¼šåœ¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</p></blockquote><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªé€šä¿—çš„è¯´æ³•ï¼šè®¾è®¡æ¨¡å¼æ˜¯è§£å†³æŸä¸ªç‰¹å®šåœºæ™¯ä¸‹å¯¹æŸç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬é‡åˆ°åˆé€‚çš„åœºæ™¯æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ¡ä»¶åå°„ä¸€æ ·è‡ªç„¶è€Œç„¶æƒ³åˆ°ç¬¦åˆè¿™ç§åœºæ™¯çš„è®¾è®¡æ¨¡å¼ã€‚</p><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><p>å•ä¾‹æ¨¡å¼çš„å®šä¹‰ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å®ç°çš„æ–¹æ³•ä¸ºå…ˆåˆ¤æ–­å®ä¾‹å­˜åœ¨ä¸å¦ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºäº†å†è¿”å›ï¼Œè¿™å°±ç¡®ä¿äº†ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> ä¸€ä¸ªå•ä¸€å¯¹è±¡ã€‚æ¯”å¦‚ï¼šå¼¹çª—ï¼Œæ— è®ºç‚¹å‡»å¤šå°‘æ¬¡ï¼Œå¼¹çª—åªåº”è¯¥è¢«åˆ›å»ºä¸€æ¬¡ã€‚</p><pre><code class="js">class CreateUser &#123;  contructor(name)&#123;    this.name = name;    this.getName()  &#125;  getName()&#123;    return this.name+  &#125;&#125;// ä»£ç†å®ç°å•ä¾‹æ¨¡å¼var ProxyMode = (function()&#123;  var instance = null  return function(name) &#123;    if(!instance)&#123;       instance = new CreateUser(name)    &#125;    return instance  &#125;&#125;)// æµ‹è¯•å•ä¾‹æ¨¡å¼var a = new ProxyMode(&#39;aaa&#39;)var b = new ProxyMode(&#39;bbb&#39;)console.log(a === b) //true</code></pre><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><blockquote><p>ç­–ç•¥æ¨¡å¼çš„å®šä¹‰ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p></blockquote><p>ä¸€ä¸ªåŸºäºç­–ç•¥æ¨¡å¼çš„ç¨‹åºè‡³å°‘ç”±ä¸¤éƒ¨åˆ†ç»„æˆã€‚ç¬¬ä¸€ä¸ªéƒ¨åˆ†<strong>æ˜¯ä¸€ç»„ç­–ç•¥ç±»ï¼ˆå¯å˜ï¼‰ï¼Œç­–ç•¥ç±»å°è£…äº†å…·ä½“çš„ç®—æ³•ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„è®¡ç®—è¿‡ç¨‹</strong>ã€‚ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯<strong>ç¯å¢ƒç±»Contextï¼ˆä¸å˜ï¼‰ï¼ŒContextæ¥å—å®¢æˆ·çš„è¯·æ±‚ï¼Œéšåå°†è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»</strong>ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯´æ˜Contextä¸­è¦ç»´æŒå¯¹æŸä¸ªç­–ç•¥å¯¹è±¡çš„å¼•ç”¨ã€‚</p><pre><code class="js">/*ç­–ç•¥ç±»*/var levelOBJ = &#123;    &quot;A&quot;: function(money) &#123;        return money * 4;    &#125;,    &quot;B&quot; : function(money) &#123;        return money * 3;    &#125;,    &quot;C&quot; : function(money) &#123;        return money * 2;    &#125; &#125;;/*ç¯å¢ƒç±»*/var calculateBouns =function(level,money) &#123;    return levelOBJ[level](money);&#125;;console.log(calculateBouns(&#39;A&#39;,10000)); // 40000</code></pre><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><blockquote><p>ä»£ç†æ¨¡å¼çš„å®šä¹‰ï¼šä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®</p></blockquote><p>å¸¸ç”¨çš„è™šæ‹Ÿä»£ç†å½¢å¼ï¼š<strong>æŸä¸€ä¸ªèŠ±é”€å¾ˆå¤§çš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡è™šæ‹Ÿä»£ç†çš„æ–¹å¼å»¶è¿Ÿåˆ°è¿™ç§éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»º</strong>ï¼ˆä¾‹ï¼šä½¿ç”¨è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼‰</p><pre><code class="js">var imgFunc = (function()&#123;  var imgNode = document.createElement(&quot;img&quot;);  document.body.appendChild(imgNode)  return &#123;    setSrc(src)&#123;      img.src = src    &#125;  &#125;&#125;)()var proxyImg = (function()&#123;  var img = new Image();  img.onload = function()&#123;    imgFunc.setSrc(this.src)  &#125;  return &#123;    setSrc(src)&#123;      imgFunc.setSrc(&#39;./loading.gif&#39;)      img.src = src    &#125;  &#125;&#125;)()propxyImg.setSrc(&#39;./test.png&#39;)</code></pre><p>ä½¿ç”¨ä»£ç†æ¨¡å¼å®ç°å›¾ç‰‡æ‡’åŠ è½½çš„ä¼˜ç‚¹è¿˜æœ‰ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚å‡å°‘ä¸€ä¸ªç±»æˆ–æ–¹æ³•çš„ç²’åº¦å’Œè€¦åˆåº¦ã€‚</p><h2 id="ä¸­ä»‹æ¨¡å¼"><a href="#ä¸­ä»‹æ¨¡å¼" class="headerlink" title="ä¸­ä»‹æ¨¡å¼"></a>ä¸­ä»‹æ¨¡å¼</h2><blockquote><p>ä¸­ä»‹è€…æ¨¡å¼çš„å®šä¹‰ï¼šé€šè¿‡ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡ï¼Œå…¶ä»–æ‰€æœ‰çš„ç›¸å…³å¯¹è±¡éƒ½é€šè¿‡è¯¥ä¸­ä»‹è€…å¯¹è±¡æ¥é€šä¿¡ï¼Œè€Œä¸æ˜¯ç›¸äº’å¼•ç”¨ï¼Œå½“å…¶ä¸­çš„ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåªéœ€è¦é€šçŸ¥ä¸­ä»‹è€…å¯¹è±¡å³å¯ã€‚é€šè¿‡ä¸­ä»‹è€…æ¨¡å¼å¯ä»¥è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼šç°å®ç”Ÿæ´»ä¸­ï¼Œèˆªçº¿ä¸Šçš„é£æœºåªéœ€è¦å’Œæœºåœºçš„å¡”å°é€šä¿¡å°±èƒ½ç¡®å®šèˆªçº¿å’Œé£è¡ŒçŠ¶æ€ï¼Œè€Œä¸éœ€è¦å’Œæ‰€æœ‰é£æœºé€šä¿¡ã€‚åŒæ—¶å¡”å°ä½œä¸ºä¸­ä»‹è€…ï¼ŒçŸ¥é“æ¯æ¶é£æœºçš„é£è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥å®‰æ’æ‰€æœ‰é£æœºçš„èµ·é™å’Œèˆªçº¿å®‰æ’ã€‚</p><p>ä¸­ä»‹è€…æ¨¡å¼é€‚ç”¨çš„åœºæ™¯ï¼šä¾‹å¦‚è´­ç‰©è½¦éœ€æ±‚ï¼Œå­˜åœ¨å•†å“é€‰æ‹©è¡¨å•ã€é¢œè‰²é€‰æ‹©è¡¨å•ã€è´­ä¹°æ•°é‡è¡¨å•ç­‰ç­‰ï¼Œéƒ½ä¼šè§¦å‘changeäº‹ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸­ä»‹è€…æ¥è½¬å‘å¤„ç†è¿™äº›äº‹ä»¶ï¼Œå®ç°å„ä¸ªäº‹ä»¶é—´çš„è§£è€¦ï¼Œä»…ä»…ç»´æŠ¤ä¸­ä»‹è€…å¯¹è±¡å³å¯ã€‚</p><pre><code class="js">var goods = &#123;   //æ‰‹æœºåº“å­˜    &#39;red|32G&#39;: 3,    &#39;red|64G&#39;: 1,    &#39;blue|32G&#39;: 7,    &#39;blue|32G&#39;: 6,&#125;;//ä¸­ä»‹è€…var mediator = (function() &#123;    var colorSelect = document.getElementById(&#39;colorSelect&#39;);    var memorySelect = document.getElementById(&#39;memorySelect&#39;);    var numSelect = document.getElementById(&#39;numSelect&#39;);    return &#123;        changed: function(obj) &#123;            switch(obj)&#123;                case colorSelect:                    //TODO                    break;                case memorySelect:                    //TODO                    break;                case numSelect:                    //TODO                    break;            &#125;        &#125;    &#125;&#125;)();colorSelect.onchange = function() &#123;    mediator.changed(this);&#125;;memorySelect.onchange = function() &#123;    mediator.changed(this);&#125;;numSelect.onchange = function() &#123;    mediator.changed(this);&#125;;</code></pre><h2 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h2><blockquote><p>è£…é¥°è€…æ¨¡å¼çš„å®šä¹‰ï¼šåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ æ–¹æ³•ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼šç°æœ‰4ç§å‹å·çš„è‡ªè¡Œè½¦åˆ†åˆ«è¢«å®šä¹‰æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œå¦‚æœç»™æ¯è¾†è‡ªè¡Œè½¦éƒ½åŠ ä¸Šå‰ç¯ã€å°¾ç¯ã€é“ƒé“›è¿™3ä¸ªé…ä»¶ï¼Œå¦‚æœç”¨ç±»ç»§æ‰¿çš„æ–¹å¼ï¼Œéœ€è¦åˆ›å»º4*3=12ä¸ªå­ç±»ã€‚ä½†å¦‚æœé€šè¿‡è£…é¥°è€…æ¨¡å¼ï¼Œåªéœ€è¦åˆ›å»º3ä¸ªç±»ã€‚</p><p>è£…é¥°è€…æ¨¡å¼é€‚ç”¨çš„åœºæ™¯ï¼š<strong>åŸæœ‰æ–¹æ³•ç»´æŒä¸å˜ï¼Œåœ¨åŸæœ‰æ–¹æ³•ä¸Šå†æŒ‚è½½å…¶ä»–æ–¹æ³•æ¥æ»¡è¶³ç°æœ‰éœ€æ±‚</strong>ï¼›å‡½æ•°çš„è§£è€¦ï¼Œå°†å‡½æ•°æ‹†åˆ†æˆå¤šä¸ªå¯å¤ç”¨çš„å‡½æ•°ï¼Œå†å°†æ‹†åˆ†å‡ºæ¥çš„å‡½æ•°æŒ‚è½½åˆ°æŸä¸ªå‡½æ•°ä¸Šï¼Œå®ç°ç›¸åŒçš„æ•ˆæœä½†å¢å¼ºäº†å¤ç”¨æ€§</p><p>ä¾‹ï¼šç”¨AOPè£…é¥°å‡½æ•°å®ç°è£…é¥°è€…æ¨¡å¼</p><pre><code class="js">Function.prototype.before = function()&#123;  var self = this;  return function()&#123;    beforefn.apply(this,arguments)    return self.apply(this,arguments)  &#125;&#125;Function.prototype.after = function () &#123;  return function()&#123;    var ret = self.apply(this,arguments)    afterfn.apply(this,arguments)    return ret  &#125;&#125;var func = function()&#123;  console.log(&#39;2&#39;)&#125;var func1 = function()&#123;  console.log(&#39;1&#39;)&#125;var func2 = function()&#123;  console.log(&#39;2&#39;)&#125;func = func.before(func1).after(func2)func()</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6844903503266054157&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹ç±»å’Œå·¥å‚æ¨¡å¼</title>
    <link href="https://shinichikudo-fe.github.io/2021/01/08/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%B1%BB%E5%92%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
    <id>https://shinichikudo-fe.github.io/2021/01/08/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%B1%BB%E5%92%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-01-08T01:19:07.000Z</published>
    <updated>2021-01-08T02:47:42.489Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p>ç±»æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ã€‚ä»–ä»¬ç”¨ä»£ç å°è£…æ•°æ®ä»¥å¤„ç†è¯¥æ•°æ®ã€‚ JSä¸­çš„ç±»å»ºç«‹åœ¨åŸå‹ä¸Šï¼Œä½†ä¹Ÿå…·æœ‰æŸäº›è¯­æ³•å’Œè¯­ä¹‰æœªä¸ES5ç±»ç›¸ä¼¼è¯­ä¹‰å…±äº«ã€‚</p><h3 id="å®šä¹‰ç±»"><a href="#å®šä¹‰ç±»" class="headerlink" title="å®šä¹‰ç±»"></a>å®šä¹‰ç±»</h3><p>å®é™…ä¸Šç±»æ˜¯ç‰¹æ®Šçš„å‡½æ•°ã€‚ç±»çš„è¯­æ³•æœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š<strong>ç±»è¡¨è¾¾å¼å’Œç±»å£°æ˜</strong></p><p><strong>ç±»å£°æ˜</strong></p><pre><code class="js"> class Rectangle&#123;   constructor(height,width)&#123;     this.height = height     this.width = width   &#125; &#125;</code></pre><p><strong>ç±»è¡¨è¾¾å¼</strong></p><pre><code class="js">let Rectangle = class Rectangle2 &#123;  constructor(height, width) &#123;    this.height = height;    this.width = width;  &#125;&#125;</code></pre><h3 id="ä½¿ç”¨-extends-æ‰©å±•å­ç±»"><a href="#ä½¿ç”¨-extends-æ‰©å±•å­ç±»" class="headerlink" title="ä½¿ç”¨ extends æ‰©å±•å­ç±»"></a>ä½¿ç”¨ extends æ‰©å±•å­ç±»</h3><p><code>extends</code>å…³é”®å­—åœ¨ ç±»å£°æ˜ æˆ– ç±»è¡¨è¾¾å¼ ä¸­ç”¨äºåˆ›å»ºä¸€ä¸ªç±»ä½œä¸ºå¦ä¸€ä¸ªç±»çš„ä¸€ä¸ªå­ç±»ã€‚</p><pre><code class="js">class Animal &#123;  constructor(name) &#123;    this.name = name;  &#125;  speak() &#123;    console.log(`$&#123;this.name&#125; makes a noise.`);  &#125;&#125;class Dog extends Animal &#123;  constructor(name) &#123;    super(name); // è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°å¹¶ä¼ å…¥nameå‚æ•°  &#125;  speak() &#123;    console.log(`$&#123;this.name&#125; barks.`);  &#125;&#125;var d = new Dog(&#39;Mitzie&#39;);d.speak();// &#39;Mitzie barks.&#39;</code></pre><h3 id="ä½¿ç”¨-super-è°ƒç”¨è¶…ç±»"><a href="#ä½¿ç”¨-super-è°ƒç”¨è¶…ç±»" class="headerlink" title="ä½¿ç”¨ super è°ƒç”¨è¶…ç±»"></a>ä½¿ç”¨ super è°ƒç”¨è¶…ç±»</h3><p><code>super</code> å…³é”®å­—ç”¨äºè°ƒç”¨å¯¹è±¡çš„çˆ¶å¯¹è±¡ä¸Šçš„å‡½æ•°ã€‚</p><pre><code class="js">class Cat &#123;  constructor(name) &#123;    this.name = name;  &#125;  speak() &#123;    console.log(this.name + &#39; makes a noise.&#39;);  &#125;&#125;class Lion extends Cat &#123;  speak() &#123;    super.speak();    console.log(this.name + &#39; roars.&#39;);  &#125;&#125;</code></pre><h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><p>Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå·¥å‚ç±»æ¨¡å¼æŠ½è±¡ç¨‹åº¦ä»ä½åˆ°é«˜åˆ†ä¸ºï¼šç®€å•å·¥å‚æ¨¡å¼ -&gt; å·¥å‚æ¨¡å¼ -&gt; æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p><p><strong>æä¾›ä¸€ä¸ªæ¥å£ä»¥åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚</strong></p><p>ä½¿ç”¨å·¥å‚å‡½æ•°ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä»»æ„æ•°é‡çš„ç”¨æˆ·å¯¹è±¡ã€‚å‡å¦‚ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªèŠå¤©åº”ç”¨ï¼Œä½ ä¼šç”¨ä¸€ä¸ªç”¨æˆ·å¯¹è±¡è¡¨ç¤ºå½“å‰ç”¨æˆ·ï¼Œä»¥åŠç”¨å¾ˆå¤šä¸ªç”¨æˆ·å¯¹è±¡è¡¨ç¤ºå…¶ä»–å·²ç™»å½•å’Œåœ¨èŠå¤©çš„ç”¨æˆ·ï¼Œä»¥ä¾¿æ˜¾ç¤ºä»–ä»¬çš„åå­—å’Œå¤´åƒç­‰ç­‰ã€‚</p><p>è®©æˆ‘ä»¬æŠŠ user å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ª <code>createUser()</code> å·¥å‚æ–¹æ³•:</p><pre><code class="js">const createUser = (&#123; userName, avatar &#125;) =&gt; (&#123;  userName,  avatar,  setUserName (userName) &#123;    this.userName = userName;    return this;  &#125;&#125;);console.log(createUser(&#123; userName: &#39;echo&#39;, avatar: &#39;echo.png&#39; &#125;));/*&#123;  &quot;avatar&quot;: &quot;echo.png&quot;,  &quot;userName&quot;: &quot;echo&quot;,  &quot;setUserName&quot;: [Function setUserName]&#125;*/</code></pre><p>æœ€åï¼Œä½ è¿˜è¦åˆ‡è®°ï¼Œä¸è¦æŠŠäº‹æƒ…æå¤æ‚ï¼Œå·¥å‚å‡½æ•°ä¸æ˜¯å¿…éœ€çš„ï¼Œå¯¹äºæŸä¸ªé—®é¢˜ï¼Œä½ çš„è§£å†³æ€è·¯åº”å½“æ˜¯ï¼š</p><p><code>çº¯å‡½æ•° &gt; å·¥å‚å‡½æ•° &gt; å‡½æ•°å¼ Mixin &gt; ç±»</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;ç±»&quot;&gt;&lt;a href=&quot;#ç±»&quot; class=&quot;headerlink&quot; title=&quot;ç±»&quot;&gt;&lt;/a&gt;ç±»&lt;/h2&gt;&lt;p&gt;ç±»æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ã€‚ä»–ä»¬ç”¨ä»£ç å°è£…æ•°æ®ä»¥å¤„ç†è¯¥æ•°æ®</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—çš„33ä¸ªæ¦‚å¿µä¹‹Object.createå’ŒObject.assign</title>
    <link href="https://shinichikudo-fe.github.io/2021/01/07/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BObject-create%E5%92%8CObject-assign/"/>
    <id>https://shinichikudo-fe.github.io/2021/01/07/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BObject-create%E5%92%8CObject-assign/</id>
    <published>2021-01-07T01:23:17.000Z</published>
    <updated>2021-01-08T01:19:46.025Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p>æ¥æº<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">MDN</a></p><h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h2><p><code>Object.create()</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„<code>__proto__</code>ã€‚</p><pre><code class="js">const person = &#123;  isHuman: false,  printIntroduction: function() &#123;    console.log(`My name is $&#123;this.name&#125;. Am I human? $&#123;this.isHuman&#125;`);  &#125;&#125;;const me = Object.create(person);me.name = &#39;Matthew&#39;; // &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;me.isHuman = true; // inherited properties can be overwrittenme.printIntroduction();</code></pre><h2 id="Object-assign-target-â€¦source"><a href="#Object-assign-target-â€¦source" class="headerlink" title="Object.assign(target,â€¦source)"></a>Object.assign(target,â€¦source)</h2><p><code>Object.assign()</code> æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡åˆ†é…åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™å±æ€§å°†è¢«æºä¸­çš„å±æ€§è¦†ç›–ã€‚åæ¥çš„æºçš„å±æ€§å°†ç±»ä¼¼åœ°è¦†ç›–æ—©å…ˆçš„å±æ€§ã€‚</p><p><code>null</code> æˆ– <code>undefined</code> æºè¢«è§†ä¸ºç©ºå¯¹è±¡ä¸€æ ·å¯¹å¾…ï¼Œä¸ä¼šå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»»ä½•å½±å“ã€‚â€</p><pre><code class="js">const target1 = &#123;a: 1, b: 2&#125;const target2 = &#123;c: 3, d: 4&#125;const returnTarget = Object.assign(target1, target2)console.log(target1)console.log(returnTarget)</code></pre><h3 id="æ·±æ‹·è´çš„é—®é¢˜"><a href="#æ·±æ‹·è´çš„é—®é¢˜" class="headerlink" title="æ·±æ‹·è´çš„é—®é¢˜"></a>æ·±æ‹·è´çš„é—®é¢˜</h3><p>é’ˆå¯¹æ·±æ‹·è´ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–åŠæ³•ï¼Œå› ä¸º <code>Object.assign()</code>æ‹·è´çš„æ˜¯ï¼ˆå¯æšä¸¾ï¼‰å±æ€§å€¼ã€‚</p><p>å‡å¦‚æºå€¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä»…ä»…ä¼šå¤åˆ¶å…¶å¼•ç”¨å€¼ã€‚</p><pre><code class="js">const log = console.log;function test() &#123;  &#39;use strict&#39;;  let obj1 = &#123; a: 0 , b: &#123; c: 0&#125;&#125;;  let obj2 = Object.assign(&#123;&#125;, obj1);  log(JSON.stringify(obj2));  // &#123; a: 0, b: &#123; c: 0&#125;&#125;  obj1.a = 1;  log(JSON.stringify(obj1));  // &#123; a: 1, b: &#123; c: 0&#125;&#125;  log(JSON.stringify(obj2));  // &#123; a: 0, b: &#123; c: 0&#125;&#125;  obj2.a = 2;  log(JSON.stringify(obj1));  // &#123; a: 1, b: &#123; c: 0&#125;&#125;  log(JSON.stringify(obj2));  // &#123; a: 2, b: &#123; c: 0&#125;&#125;  obj2.b.c = 3;  log(JSON.stringify(obj1));  // &#123; a: 1, b: &#123; c: 3&#125;&#125;  log(JSON.stringify(obj2));  // &#123; a: 2, b: &#123; c: 3&#125;&#125;  // Deep Clone  obj1 = &#123; a: 0 , b: &#123; c: 0&#125;&#125;;  let obj3 = JSON.parse(JSON.stringify(obj1));  obj1.a = 4;  obj1.b.c = 4;  log(JSON.stringify(obj3));  // &#123; a: 0, b: &#123; c: 0&#125;&#125;&#125;test();</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;æ¥æº&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Object</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹åŸå‹ç»§æ‰¿åŠåŸå‹é“¾</title>
    <link href="https://shinichikudo-fe.github.io/2021/01/06/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    <id>https://shinichikudo-fe.github.io/2021/01/06/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF%E5%8F%8A%E5%8E%9F%E5%9E%8B%E9%93%BE/</id>
    <published>2021-01-06T01:45:25.000Z</published>
    <updated>2021-01-06T03:17:02.004Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><p>JavaScript ä¸­æè¿°äº†åŸå‹é“¾çš„æ¦‚å¿µï¼Œå¹¶å°†åŸå‹é“¾ä½œä¸ºå®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯<strong>åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•</strong>ã€‚ç®€å•å›é¡¾ä¸€ä¸‹æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹çš„å…³ç³»ï¼šæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆ</p><p><img src="https://segmentfault.com/img/bVvUCD" alt="åŸå‹ï¼Œæ„é€ å‡½æ•°ï¼Œå®ä¾‹"></p><p>é‚£ä¹ˆï¼Œå‡å¦‚æˆ‘ä»¬è®©åŸå‹å¯¹è±¡ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæ­¤æ—¶çš„åŸå‹å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªåŸå‹çš„æŒ‡é’ˆï¼Œç›¸åº”åœ°ï¼Œå¦ä¸€ä¸ªåŸå‹ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„æŒ‡é’ˆã€‚å‡å¦‚å¦ä¸€ä¸ªåŸå‹åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ï¼Œå¦‚æ­¤å±‚å±‚é€’è¿›ï¼Œå°±æ„æˆäº†å®ä¾‹ä¸åŸå‹çš„é“¾æ¡ã€‚è¿™å°±æ˜¯æ‰€è°“åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚</p><p>ECMAScriptä¸­æ— æ³•å®ç°æ¥å£ç»§æ‰¿.ECMAScriptåªæ”¯æŒ<code>å®ç°ç»§æ‰¿</code>,è€Œä¸”å…¶ <strong>å®ç°ç»§æ‰¿ ä¸»è¦æ˜¯ä¾é åŸå‹é“¾æ¥å®ç°çš„</strong>.</p><p>ä½¿ç”¨åŸå‹é“¾å, æˆ‘ä»¬æ€ä¹ˆå»åˆ¤æ–­åŸå‹å’Œå®ä¾‹çš„è¿™ç§ç»§æ‰¿å…³ç³»å‘¢? æ–¹æ³•ä¸€èˆ¬æœ‰ä¸¤ç§.</p><blockquote><p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦, åªè¦ç”¨è¿™ä¸ªæ“ä½œç¬¦æ¥æµ‹è¯•å®ä¾‹(instance)ä¸åŸå‹é“¾ä¸­å‡ºç°è¿‡çš„æ„é€ å‡½æ•°,ç»“æœå°±ä¼šè¿”å›true. ä»¥ä¸‹å‡ è¡Œä»£ç å°±è¯´æ˜äº†è¿™ç‚¹.</p></blockquote><pre><code class="js">alert(instance instanceof Object);//truealert(instance instanceof Father);//truealert(instance instanceof Son);//true</code></pre><blockquote><p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ <code>isPrototypeOf()</code> æ–¹æ³•, åŒæ ·åªè¦æ˜¯åŸå‹é“¾ä¸­å‡ºç°è¿‡çš„åŸå‹,<code>isPrototypeOf()</code> æ–¹æ³•å°±ä¼šè¿”å›true, å¦‚ä¸‹æ‰€ç¤º.</p></blockquote><pre><code class="js">alert(Object.prototype.isPrototypeOf(instance));//truealert(Father.prototype.isPrototypeOf(instance));//truealert(Son.prototype.isPrototypeOf(instance));//true</code></pre><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><h3 id="åŸå‹é“¾çš„é—®é¢˜"><a href="#åŸå‹é“¾çš„é—®é¢˜" class="headerlink" title="åŸå‹é“¾çš„é—®é¢˜"></a>åŸå‹é“¾çš„é—®é¢˜</h3><p>åŸå‹é“¾å¹¶éååˆ†å®Œç¾, å®ƒåŒ…å«å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜.</p><blockquote><p>é—®é¢˜ä¸€: å½“åŸå‹é“¾ä¸­åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„åŸå‹æ—¶,è¯¥å¼•ç”¨ç±»å‹å€¼<strong>ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«</strong>;<br>é—®é¢˜äºŒ: åœ¨åˆ›å»ºå­ç±»å‹(ä¾‹å¦‚åˆ›å»ºSonçš„å®ä¾‹)æ—¶,ä¸èƒ½å‘è¶…ç±»å‹(ä¾‹å¦‚Father)çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°.</p></blockquote><h3 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h3><p>ä¸ºè§£å†³åŸå‹é“¾ä¸­ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜, æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ä¸€ç§å«åš<strong>å€Ÿç”¨æ„é€ å‡½æ•°</strong>(constructor stealing)çš„æŠ€æœ¯(ä¹Ÿå«ç»å…¸ç»§æ‰¿).</p><blockquote><p>åŸºæœ¬æ€æƒ³:å³åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°.</p></blockquote><pre><code class="js">function Father()&#123;    this.colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];&#125;function Son()&#123;    Father.call(this);//ç»§æ‰¿äº†Father,ä¸”å‘çˆ¶ç±»å‹ä¼ é€’å‚æ•°&#125;var instance1 = new Son();instance1.colors.push(&quot;black&quot;);console.log(instance1.colors);//&quot;red,blue,green,black&quot;var instance2 = new Son();console.log(instance2.colors);//&quot;red,blue,green&quot; å¯è§å¼•ç”¨ç±»å‹å€¼æ˜¯ç‹¬ç«‹çš„</code></pre><p>å¾ˆæ˜æ˜¾,å€Ÿç”¨æ„é€ å‡½æ•°ä¸€ä¸¾è§£å†³äº†åŸå‹é“¾çš„ä¸¤å¤§é—®é¢˜:</p><p>å…¶ä¸€, ä¿è¯äº†åŸå‹é“¾ä¸­å¼•ç”¨ç±»å‹å€¼çš„ç‹¬ç«‹,ä¸å†è¢«æ‰€æœ‰å®ä¾‹å…±äº«;<br>å…¶äºŒ, å­ç±»å‹åˆ›å»ºæ—¶ä¹Ÿèƒ½å¤Ÿå‘çˆ¶ç±»å‹ä¼ é€’å‚æ•°.</p><p>éšä¹‹è€Œæ¥çš„æ˜¯, å¦‚æœä»…ä»…å€Ÿç”¨æ„é€ å‡½æ•°,é‚£ä¹ˆå°†æ— æ³•é¿å…æ„é€ å‡½æ•°æ¨¡å¼å­˜åœ¨çš„é—®é¢˜â€“<strong>æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰</strong>, å› æ­¤å‡½æ•°å¤ç”¨ä¹Ÿå°±ä¸å¯ç”¨äº†.è€Œä¸”è¶…ç±»å‹(å¦‚Father)ä¸­å®šä¹‰çš„æ–¹æ³•,å¯¹å­ç±»å‹è€Œè¨€ä¹Ÿæ˜¯ä¸å¯è§çš„. è€ƒè™‘æ­¤,å€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ä¹Ÿå¾ˆå°‘å•ç‹¬ä½¿ç”¨.</p><h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><p>ç»„åˆç»§æ‰¿, æœ‰æ—¶å€™ä¹Ÿå«åšä¼ªç»å…¸ç»§æ‰¿,æŒ‡çš„æ˜¯å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ç»„åˆåˆ°ä¸€å—,ä»è€Œå‘æŒ¥ä¸¤è€…ä¹‹é•¿çš„ä¸€ç§ç»§æ‰¿æ¨¡å¼.</p><blockquote><p>åŸºæœ¬æ€è·¯: ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿,é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿.</p></blockquote><p>è¿™æ ·,æ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨,åˆèƒ½ä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„å±æ€§. å¦‚ä¸‹æ‰€ç¤º.</p><pre><code class="js">function Father(name)&#123;    this.name = name;    this.colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];&#125;Father.prototype.sayName = function()&#123;    alert(this.name);&#125;;function Son(name,age)&#123;    Father.call(this,name);//ç»§æ‰¿å®ä¾‹å±æ€§ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨Father()    this.age = age;&#125;Son.prototype = new Father();//ç»§æ‰¿çˆ¶ç±»æ–¹æ³•,ç¬¬äºŒæ¬¡è°ƒç”¨Father()Son.prototype.sayAge = function()&#123;    alert(this.age);&#125;var instance1 = new Son(&quot;louis&quot;,5);instance1.colors.push(&quot;black&quot;);console.log(instance1.colors);//&quot;red,blue,green,black&quot;instance1.sayName();//louisinstance1.sayAge();//5var instance1 = new Son(&quot;zhai&quot;,10);console.log(instance1.colors);//&quot;red,blue,green&quot;instance1.sayName();//zhaiinstance1.sayAge();//10</code></pre><p>ç»„åˆç»§æ‰¿é¿å…äº†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„ç¼ºé™·,èåˆäº†å®ƒä»¬çš„ä¼˜ç‚¹,æˆä¸º JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼. è€Œä¸”, instanceof å’Œ isPrototypeOf( )ä¹Ÿèƒ½ç”¨äºè¯†åˆ«åŸºäºç»„åˆç»§æ‰¿åˆ›å»ºçš„å¯¹è±¡.<br>åŒæ—¶æˆ‘ä»¬è¿˜æ³¨æ„åˆ°ç»„åˆç»§æ‰¿å…¶å®è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°, é€ æˆäº†ä¸å¿…è¦çš„æ¶ˆè€—, é‚£ä¹ˆæ€æ ·æ‰èƒ½é¿å…è¿™ç§ä¸å¿…è¦çš„æ¶ˆè€—å‘¢, è¿™ä¸ªæˆ‘ä»¬å°†åœ¨åé¢è®²åˆ°.</p><h3 id="åŸå‹ç»§æ‰¿"><a href="#åŸå‹ç»§æ‰¿" class="headerlink" title="åŸå‹ç»§æ‰¿"></a>åŸå‹ç»§æ‰¿</h3><blockquote><p>åœ¨<code>object()</code>å‡½æ•°å†…éƒ¨, å…ˆåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°, ç„¶åå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹,æœ€åè¿”å›äº†è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªæ–°å®ä¾‹.</p></blockquote><pre><code class="js">function object(o)&#123;    function F()&#123;&#125;    F.prototype = o;    return new F();&#125;</code></pre><p>ä»æœ¬è´¨ä¸Šè®², <code>object()</code> è¿”å›äº†ä¸€ä¸ªå¼•ç”¨ä¼ å…¥å¯¹è±¡çš„æ–°å¯¹è±¡. è¿™æ ·<strong>å¯èƒ½å¸¦æ¥ä¸€äº›å…±äº«æ•°æ®çš„é—®é¢˜</strong>ï¼Œå¦‚ä¸‹.</p><pre><code class="js">var person = &#123;    friends : [&quot;Van&quot;,&quot;Louis&quot;,&quot;Nick&quot;]&#125;;var anotherPerson = object(person);anotherPerson.friends.push(&quot;Rob&quot;);var yetAnotherPerson = object(person);yetAnotherPerson.friends.push(&quot;Style&quot;);alert(person.friends);//&quot;Van,Louis,Nick,Rob,Style&quot;</code></pre><p>åœ¨ ECMAScript5 ä¸­,é€šè¿‡æ–°å¢ <code>object.create()</code> æ–¹æ³•è§„èŒƒåŒ–äº†ä¸Šé¢çš„åŸå‹å¼ç»§æ‰¿.</p><p><code>object.create()</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°:</p><ul><li>ä¸€ä¸ªç”¨ä½œæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡</li><li>(å¯é€‰çš„)ä¸€ä¸ªä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡</li></ul><pre><code class="js">var person = &#123;    name : &quot;Van&quot;&#125;;var anotherPerson = Object.create(person, &#123;    name : &#123;        value : &quot;Louis&quot;    &#125;&#125;);alert(anotherPerson.name);//&quot;Louis&quot;</code></pre><h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h3><blockquote><p>å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸(å¯„ç”Ÿ)æ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ç±»ä¼¼, å³<strong>åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°,è¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡,æœ€åå†åƒçœŸçš„æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡</strong>. å¦‚ä¸‹.</p></blockquote><pre><code class="js">function createAnother(original)&#123;    var clone = object(original);//é€šè¿‡è°ƒç”¨objectå‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡    clone.sayHi = function()&#123;//ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºè¿™ä¸ªå¯¹è±¡        alert(&quot;hi&quot;);    &#125;;    return clone;//è¿”å›è¿™ä¸ªå¯¹è±¡&#125;</code></pre><p>è¿™ä¸ªä¾‹å­ä¸­çš„ä»£ç åŸºäºpersonè¿”å›äº†ä¸€ä¸ªæ–°å¯¹è±¡â€“<code>anotherPerson</code>. æ–°å¯¹è±¡ä¸ä»…å…·æœ‰ <code>person</code> çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•, è€Œä¸”è¿˜è¢«å¢å¼ºäº†, æ‹¥æœ‰äº†<code>sayH()</code>æ–¹æ³•.</p><p><strong>æ³¨æ„</strong>: ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°, ä¼šç”±äºä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œé™ä½æ•ˆç‡;è¿™ä¸€ç‚¹ä¸æ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼.</p><h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3><p>å‰é¢è®²è¿‡,ç»„åˆç»§æ‰¿æ˜¯ <code>JavaScript</code> æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼; ä¸è¿‡, å®ƒä¹Ÿæœ‰è‡ªå·±çš„ä¸è¶³. ç»„åˆç»§æ‰¿æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹,éƒ½ä¼šè°ƒç”¨<strong>ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°</strong>;</p><p>ä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»å‹åŸå‹çš„æ—¶å€™, å¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»å‹æ„é€ å‡½æ•°å†…éƒ¨. </p><p><strong>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿å°±æ˜¯ä¸ºäº†é™ä½è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°çš„å¼€é”€è€Œå‡ºç°çš„ .</strong></p><blockquote><p>å…¶èƒŒåçš„åŸºæœ¬æ€è·¯æ˜¯: ä¸å¿…ä¸ºäº†æŒ‡å®šå­ç±»å‹çš„åŸå‹è€Œè°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°</p></blockquote><pre><code class="js">function extend(subClass,superClass)&#123;    var prototype = object(superClass.prototype);//åˆ›å»ºå¯¹è±¡    prototype.constructor = subClass;//å¢å¼ºå¯¹è±¡    subClass.prototype = prototype;//æŒ‡å®šå¯¹è±¡&#125;</code></pre><p><code>extend</code>çš„é«˜æ•ˆç‡ä½“ç°åœ¨å®ƒæ²¡æœ‰è°ƒç”¨<code>superClass</code>æ„é€ å‡½æ•°,å› æ­¤é¿å…äº†åœ¨<code>subClass.prototype</code>ä¸Šé¢åˆ›å»ºä¸å¿…è¦,å¤šä½™çš„å±æ€§. äºæ­¤åŒæ—¶,åŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜; å› æ­¤è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ <code>instanceof</code> å’Œ <code>isPrototypeOf() </code>æ–¹æ³•.</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹<code>extend</code>çš„å¦ä¸€ç§æ›´ä¸ºæœ‰æ•ˆçš„æ‰©å±•.</p><pre><code class="js">function extend(subClass, superClass) &#123;  var F = function() &#123;&#125;;  F.prototype = superClass.prototype;  subClass.prototype = new F();   subClass.prototype.constructor = subClass;  subClass.superclass = superClass.prototype;  if(superClass.prototype.constructor == Object.prototype.constructor) &#123;    superClass.prototype.constructor = superClass;  &#125;&#125;</code></pre><p>æˆ‘ä¸€ç›´ä¸å¤ªæ˜ç™½çš„æ˜¯ä¸ºä»€ä¹ˆè¦ â€œnew F()â€, æ—¢ç„¶extendçš„ç›®çš„æ˜¯å°†å­ç±»å‹çš„ <code>prototype</code> æŒ‡å‘è¶…ç±»å‹çš„<code>prototype</code>,ä¸ºä»€ä¹ˆä¸ç›´æ¥åšå¦‚ä¸‹æ“ä½œå‘¢?</p><pre><code class="js">subClass.prototype = superClass.prototype;//ç›´æ¥æŒ‡å‘è¶…ç±»å‹prototype</code></pre><p>æ˜¾ç„¶, åŸºäºå¦‚ä¸Šæ“ä½œ, å­ç±»å‹åŸå‹å°†ä¸è¶…ç±»å‹åŸå‹å…±ç”¨, æ ¹æœ¬å°±æ²¡æœ‰ç»§æ‰¿å…³ç³».</p><p>é‚£ä¹ˆæœ€ç»ˆ,åŸå‹é“¾ç»§æ‰¿å¯ä»¥è¿™ä¹ˆå®ç°,ä¾‹å¦‚:</p><pre><code class="js">function Father(name)&#123;    this.name = name;    this.colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];&#125;Father.prototype.sayName = function()&#123;    alert(this.name);&#125;;function Son(name,age)&#123;    Father.call(this,name);//ç»§æ‰¿å®ä¾‹å±æ€§ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨Father()    this.age = age;&#125;extend(Son,Father)//ç»§æ‰¿çˆ¶ç±»æ–¹æ³•,æ­¤å¤„å¹¶ä¸ä¼šç¬¬äºŒæ¬¡è°ƒç”¨Father()Son.prototype.sayAge = function()&#123;    alert(this.age);&#125;var instance1 = new Son(&quot;louis&quot;,5);instance1.colors.push(&quot;black&quot;);console.log(instance1.colors);//&quot;red,blue,green,black&quot;instance1.sayName();//louisinstance1.sayAge();//5var instance1 = new Son(&quot;zhai&quot;,10);console.log(instance1.colors);//&quot;red,blue,green&quot;instance1.sayName();//zhaiinstance1.sayAge();//10</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;åŸå‹é“¾&quot;&gt;&lt;a href=&quot;#åŸå‹é“¾&quot; class=&quot;headerlink&quot; title=&quot;åŸå‹é“¾&quot;&gt;&lt;/a&gt;åŸå‹é“¾&lt;/h2&gt;&lt;p&gt;JavaScript ä¸­æè¿°äº†åŸå‹é“¾çš„</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹new ä¸æ„é€ å‡½æ•°ï¼Œinstanceof ä¸å®ä¾‹</title>
    <link href="https://shinichikudo-fe.github.io/2021/01/05/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8Bnew-%E4%B8%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%8Cinstanceof-%E4%B8%8E%E5%AE%9E%E4%BE%8B/"/>
    <id>https://shinichikudo-fe.github.io/2021/01/05/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8Bnew-%E4%B8%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%EF%BC%8Cinstanceof-%E4%B8%8E%E5%AE%9E%E4%BE%8B/</id>
    <published>2021-01-05T07:42:16.000Z</published>
    <updated>2021-01-05T09:00:46.607Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>åœ¨Javascriptä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¦‚æœéœ€è¦åœ¨JavaScriptä¸­ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå¯¹è±¡æ˜¯å•ä¸ªå®ç‰©çš„æŠ½è±¡ï¼Œé€šå¸¸éœ€è¦ä¸€ä¸ªæ¨¡ç‰ˆï¼Œè¡¨ç¤ºæŸä¸€ç±»å®ç‰©çš„å…±åŒç‰¹å¾ï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ¨¡æ¿ç”Ÿæˆ</p><p>åœ¨Javascriptä¸­æ„é€ å‡½æ•°å°±ç§°ä¸ºæ¨¡æ¿ã€‚ä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç”Ÿæˆå¤šä¸ªå®ä¾‹å¯¹è±¡ï¼Œè¿™äº›å®ä¾‹å¯¹è±¡éƒ½æœ‰ç›¸åŒçš„ç»“æ„,æ„é€ å‡½æ•°åå­—çš„<strong>ç¬¬ä¸€ä¸ªå­—æ¯é€šå¸¸å¤§å†™</strong></p><p>æ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><blockquote><p>å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†thiså…³é”®å­—ï¼Œä»£è¡¨äº†æ‰€è¦ç”Ÿæˆçš„å¯¹è±¡å®ä¾‹<br>ç”Ÿæˆå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨newå‘½ä»¤</p></blockquote><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>newå‘½ä»¤çš„ä½œç”¨ï¼Œå°±æ˜¯æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><p>newå‘½ä»¤æœ¬èº«å°±å¯ä»¥æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åé¢çš„æ„é€ å‡½æ•°å¯ä»¥å¸¦æ‹¬å·ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦æ‹¬å·ã€‚ä¸‹é¢ä¸¤è¡Œä»£ç æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯ä¸ºäº†è¡¨ç¤ºè¿™é‡Œæ˜¯å‡½æ•°è°ƒç”¨ï¼Œæ¨èä½¿ç”¨æ‹¬å·ã€‚</p><p>å¦‚æœå¿˜äº†ä½¿ç”¨newå‘½ä»¤ï¼Œç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ï¼Ÿ</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>æ„é€ å‡½æ•°å°±å˜æˆäº†æ™®é€šå‡½æ•°ï¼Œå¹¶ä¸ä¼šç”Ÿæˆå®ä¾‹å¯¹è±¡ã€‚è€Œä¸”ç”±äºåé¢ä¼šè¯´åˆ°çš„åŸå› ï¼Œthisè¿™æ—¶ä»£è¡¨å…¨å±€å¯¹è±¡ï¼Œå°†é€ æˆä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœ</strong>ã€‚</p><h3 id="newçš„åŸç†"><a href="#newçš„åŸç†" class="headerlink" title="newçš„åŸç†"></a>newçš„åŸç†</h3><blockquote><ol><li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½œä¸ºå°†è¦è¿”å›çš„å¯¹è±¡å®ä¾‹ã€‚</li><li>å°†è¿™ä¸ªç©ºå¯¹è±¡çš„åŸå‹ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚</li><li>å°†è¿™ä¸ªç©ºå¯¹è±¡èµ‹å€¼ç»™å‡½æ•°å†…éƒ¨çš„thiså…³é”®å­—ã€‚</li><li>å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ã€‚</li></ol></blockquote><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>å®ä¾‹å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</p><pre><code class="js">var M = function()&#123;  this.name = &#39;Jane&#39;;&#125;var obj = new M();</code></pre><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><p><code>instanceof</code>è¡¨ç¤ºçš„å°±æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œæˆ–è€…åŸå‹é“¾çš„ç»“æ„ã€‚</p><p>ç”±äºæ‰€æœ‰çš„å¯¹è±¡çš„åŸå‹é“¾éƒ½ä¼šæ‰¾åˆ°<code>Object.prototype</code>ï¼Œå› æ­¤æ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šæœ‰<code>Object.prototype</code>çš„æ–¹æ³•ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œç»§æ‰¿â€</p><h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><pre><code class="js">function instance_of(L, R) &#123;//L è¡¨ç¤ºå·¦è¡¨è¾¾å¼ï¼ŒR è¡¨ç¤ºå³è¡¨è¾¾å¼  var O = R.prototype;// å– R çš„æ˜¾ç¤ºåŸå‹  L = L.__proto__;// å– L çš„éšå¼åŸå‹  while (true) &#123;    if (L === null)      return false;    if (O === L)// è¿™é‡Œé‡ç‚¹ï¼šå½“ O ä¸¥æ ¼ç­‰äº L æ—¶ï¼Œè¿”å› true      return true;    L = L.__proto__;  &#125; &#125;</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å¯ä»¥é€šè¿‡<code>new</code>å…³é”®å­— + æ„é€ å‡½æ•° æ¥ç”Ÿæˆæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡<code>instanceof</code> å¯ä»¥æ‰¾åˆ°å®ä¾‹çš„æ„é€ å‡½æ•°çš„åŸå‹</p><p><code>instanceof</code>æ‰¾åˆ°çš„æ˜¯å®ä¾‹åœ¨åŸå‹é“¾ä¸­æ‰€æœ‰çš„æ„é€ å‡½æ•°ï¼Œä¸å®¹æ˜“æ‰¾åˆ°ç›´æ¥åˆ›å»ºå®ä¾‹çš„æ„é€ å‡½æ•°ï¼›</p><p><code>constructor</code>æ‰¾åˆ°çš„æ˜¯æ„é€ å‡½æ•°åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯ç›´æ¥åˆ›å»ºè¿™ä¸ªå®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ç”¨<code>constructor</code>æ‰¾å®ä¾‹çš„æ„é€ å‡½æ•°æ›´ä¸¥è°¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;æ„é€ å‡½æ•°&quot;&gt;&lt;a href=&quot;#æ„é€ å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ„é€ å‡½æ•°&quot;&gt;&lt;/a&gt;æ„é€ å‡½æ•°&lt;/h2&gt;&lt;p&gt;åœ¨Javascriptä¸­ï¼Œä¸‡ç‰©</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨Reactä¸­å®Œç¾è¿ç”¨ï¼Ÿ</title>
    <link href="https://shinichikudo-fe.github.io/2020/12/28/React/%E5%A6%82%E4%BD%95%E5%9C%A8React%E4%B8%AD%E5%AE%8C%E7%BE%8E%E8%BF%90%E7%94%A8%EF%BC%9F/"/>
    <id>https://shinichikudo-fe.github.io/2020/12/28/React/%E5%A6%82%E4%BD%95%E5%9C%A8React%E4%B8%AD%E5%AE%8C%E7%BE%8E%E8%BF%90%E7%94%A8%EF%BC%9F/</id>
    <published>2020-12-28T08:27:03.000Z</published>
    <updated>2020-12-28T10:12:52.391Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://juejin.cn/post/6910863689260204039">åŸæ–‡åœ°å€</a></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¶å®å¦‚æœè¿ç”¨ç†Ÿç»ƒçš„è¯ï¼ŒTS åªæ˜¯åœ¨ç¬¬ä¸€æ¬¡å¼€å‘çš„æ—¶å€™ç¨å¾®å¤šèŠ±ä¸€äº›æ—¶é—´å»ç¼–å†™ç±»å‹ï¼Œåç»­ç»´æŠ¤ã€é‡æ„çš„æ—¶å€™å°±ä¼šå‘æŒ¥å®ƒç¥å¥‡çš„ä½œç”¨äº†ï¼Œè¿˜æ˜¯éå¸¸æ¨èé•¿æœŸç»´æŠ¤çš„é¡¹ç›®ä½¿ç”¨å®ƒçš„ã€‚</p><h2 id="å‰ç½®åŸºç¡€"><a href="#å‰ç½®åŸºç¡€" class="headerlink" title="å‰ç½®åŸºç¡€"></a>å‰ç½®åŸºç¡€</h2><p>é˜…è¯»æœ¬æ–‡çš„å‰ææ¡ä»¶æ˜¯ï¼š</p><p>ç†Ÿæ‚‰ React çš„ä½¿ç”¨ã€‚<br>ç†Ÿæ‚‰ TypeScript ä¸­çš„ç±»å‹çŸ¥è¯†ã€‚<br>æœ¬æ–‡ä¼šä¾§é‡ä½¿ç”¨ React Hook ä½œä¸ºç¤ºä¾‹ï¼Œå½“ç„¶å¤§éƒ¨åˆ†ç±»å‹çŸ¥è¯†éƒ½æ˜¯é€šç”¨çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç¯‡æ–‡ç« ä¾§é‡ç‚¹åœ¨äº ã€Œ<strong>React å’Œ TypeScript çš„ç»“åˆã€</strong>ï¼Œè€Œä¸æ˜¯åŸºç¡€çŸ¥è¯†ï¼ŒåŸºç¡€çŸ¥è¯†é˜…è¯»æ–‡æ¡£å³å¯å­¦ä¹ ã€‚</p><h2 id="ç»„ä»¶-Props"><a href="#ç»„ä»¶-Props" class="headerlink" title="ç»„ä»¶ Props"></a>ç»„ä»¶ Props</h2><p>å…ˆçœ‹å‡ ç§å®šä¹‰ Props ç»å¸¸ç”¨åˆ°çš„ç±»å‹ï¼š</p><h3 id="åŸºç¡€ç±»å‹"><a href="#åŸºç¡€ç±»å‹" class="headerlink" title="åŸºç¡€ç±»å‹"></a>åŸºç¡€ç±»å‹</h3><pre><code class="js">type BasicProps = &#123;  message: string;  count: number;  disabled: boolean;  /** æ•°ç»„ç±»å‹ */  names: string[];  /** ç”¨ã€Œè”åˆç±»å‹ã€é™åˆ¶ä¸ºä¸‹é¢ä¸¤ç§ã€Œå­—ç¬¦ä¸²å­—é¢é‡ã€ç±»å‹ */  status: &quot;waiting&quot; | &quot;success&quot;;&#125;;</code></pre><h3 id="å¯¹è±¡ç±»å‹"><a href="#å¯¹è±¡ç±»å‹" class="headerlink" title="å¯¹è±¡ç±»å‹"></a>å¯¹è±¡ç±»å‹</h3><pre><code class="js">type ObjectOrArrayProps = &#123;  /** å¦‚æœä½ ä¸éœ€è¦ç”¨åˆ°å…·ä½“çš„å±æ€§ å¯ä»¥è¿™æ ·æ¨¡ç³Šè§„å®šæ˜¯ä¸ªå¯¹è±¡ âŒ ä¸æ¨è */  obj: object;  obj2: &#123;&#125;; // åŒä¸Š  /** æ‹¥æœ‰å…·ä½“å±æ€§çš„å¯¹è±¡ç±»å‹ âœ… æ¨è */  obj3: &#123;    id: string;    title: string;  &#125;;  /** å¯¹è±¡æ•°ç»„ ğŸ˜ å¸¸ç”¨ */  objArr: &#123;    id: string;    title: string;  &#125;[];  /** key å¯ä»¥ä¸ºä»»æ„ stringï¼Œå€¼é™åˆ¶ä¸º MyTypeHere ç±»å‹ */  dict1: &#123;    [key: string]: MyTypeHere;  &#125;;  dict2: Record&lt;string, MyTypeHere&gt;; // åŸºæœ¬ä¸Šå’Œ dict1 ç›¸åŒï¼Œç”¨äº† TS å†…ç½®çš„ Record ç±»å‹ã€‚&#125;</code></pre><h3 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h3><pre><code class="js">type FunctionProps = &#123;  /** ä»»æ„çš„å‡½æ•°ç±»å‹ âŒ ä¸æ¨è ä¸èƒ½è§„å®šå‚æ•°ä»¥åŠè¿”å›å€¼ç±»å‹ */  onSomething: Function;  /** æ²¡æœ‰å‚æ•°çš„å‡½æ•° ä¸éœ€è¦è¿”å›å€¼ ğŸ˜ å¸¸ç”¨ */  onClick: () =&gt; void;  /** å¸¦å‡½æ•°çš„å‚æ•° ğŸ˜ éå¸¸å¸¸ç”¨ */  onChange: (id: number) =&gt; void;  /** å¦ä¸€ç§å‡½æ•°è¯­æ³• å‚æ•°æ˜¯ React çš„æŒ‰é’®äº‹ä»¶ ğŸ˜ éå¸¸å¸¸ç”¨ */  onClick(event: React.MouseEvent&lt;HTMLButtonElement&gt;): void;  /** å¯é€‰å‚æ•°ç±»å‹ ğŸ˜ éå¸¸å¸¸ç”¨ */  optional?: OptionalType;&#125;</code></pre><h3 id="React-ç›¸å…³ç±»å‹"><a href="#React-ç›¸å…³ç±»å‹" class="headerlink" title="React ç›¸å…³ç±»å‹"></a>React ç›¸å…³ç±»å‹</h3><pre><code class="js">export declare interface AppProps &#123;  children1: JSX.Element; // âŒ ä¸æ¨è æ²¡æœ‰è€ƒè™‘æ•°ç»„  children2: JSX.Element | JSX.Element[]; // âŒ ä¸æ¨è æ²¡æœ‰è€ƒè™‘å­—ç¬¦ä¸² children  children4: React.ReactChild[]; // ç¨å¾®å¥½ç‚¹ ä½†æ˜¯æ²¡è€ƒè™‘ null  children: React.ReactNode; // âœ… åŒ…å«æ‰€æœ‰ children æƒ…å†µ  functionChildren: (name: string) =&gt; React.ReactNode; // âœ… è¿”å› React èŠ‚ç‚¹çš„å‡½æ•°  style?: React.CSSProperties; // âœ… æ¨è åœ¨å†…è” style æ—¶ä½¿ç”¨  // âœ… æ¨èåŸç”Ÿ button æ ‡ç­¾è‡ªå¸¦çš„æ‰€æœ‰ props ç±»å‹  // ä¹Ÿå¯ä»¥åœ¨æ³›å‹çš„ä½ç½®ä¼ å…¥ç»„ä»¶ æå–ç»„ä»¶çš„ Props ç±»å‹  props: React.ComponentProps&lt;&quot;button&quot;&gt;;  // âœ… æ¨è åˆ©ç”¨ä¸Šä¸€æ­¥çš„åšæ³• å†è¿›ä¸€æ­¥çš„æå–å‡ºåŸç”Ÿçš„ onClick å‡½æ•°ç±»å‹   // æ­¤æ—¶å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè‡ªåŠ¨æ¨æ–­ä¸º React çš„ç‚¹å‡»äº‹ä»¶ç±»å‹  onClickButtonï¼šReact.ComponentProps&lt;&quot;button&quot;&gt;[&quot;onClick&quot;]&#125;</code></pre><h3 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h3><p>æœ€ç®€å•çš„ï¼š</p><pre><code class="js">interface AppProps = &#123; message: string &#125;;const App = (&#123; message &#125;: AppProps) =&gt; &lt;div&gt;&#123;message&#125;&lt;/div&gt;;</code></pre><p>åŒ…å« <code>children</code> çš„ï¼š</p><p>åˆ©ç”¨ <code>React.FC</code> å†…ç½®ç±»å‹çš„è¯ï¼Œä¸å…‰ä¼šåŒ…å«ä½ å®šä¹‰çš„ <code>AppProps</code> è¿˜ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€ä¸ª <code>children</code> ç±»å‹ï¼Œä»¥åŠå…¶ä»–ç»„ä»¶ä¸Šä¼šå‡ºç°çš„ç±»å‹ï¼š</p><pre><code class="js">// ç­‰åŒäºAppProps &amp; &#123;   children: React.ReactNode   propTypes?: WeakValidationMap&lt;P&gt;;  contextTypes?: ValidationMap&lt;any&gt;;  defaultProps?: Partial&lt;P&gt;;  displayName?: string;&#125;// ä½¿ç”¨interface AppProps = &#123; message: string &#125;;const App: React.FC&lt;AppProps&gt; = (&#123; message, children &#125;) =&gt; &#123;  return (    &lt;&gt;     &#123;children&#125;     &lt;div&gt;&#123;message&#125;&lt;/div&gt;    &lt;/&gt;  )&#125;;</code></pre><h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><p><code>@types/react</code> åŒ…åœ¨ 16.8 ä»¥ä¸Šçš„ç‰ˆæœ¬å¼€å§‹å¯¹ Hooks çš„æ”¯æŒã€‚</p><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><p>å¦‚æœä½ çš„é»˜è®¤å€¼å·²ç»å¯ä»¥è¯´æ˜ç±»å‹ï¼Œé‚£ä¹ˆä¸ç”¨æ‰‹åŠ¨å£°æ˜ç±»å‹ï¼Œäº¤ç»™ TS è‡ªåŠ¨æ¨æ–­å³å¯ï¼š</p><pre><code class="js">// val: booleanconst [val, toggle] = React.useState(false);toggle(false)toggle(true)</code></pre><p>å¦‚æœåˆå§‹å€¼æ˜¯ <code>null</code> æˆ– <code>undefined</code>ï¼Œé‚£å°±è¦é€šè¿‡æ³›å‹æ‰‹åŠ¨ä¼ å…¥ä½ æœŸæœ›çš„ç±»å‹ã€‚</p><pre><code class="js">const [user, setUser] = React.useState&lt;IUser | null&gt;(null);// later...setUser(newUser);</code></pre><p>è¿™æ ·ä¹Ÿå¯ä»¥ä¿è¯åœ¨ä½ ç›´æ¥è®¿é—® <code>user</code> ä¸Šçš„å±æ€§æ—¶ï¼Œæç¤ºä½ å®ƒæœ‰å¯èƒ½æ˜¯ <code>null</code>ã€‚</p><p>é€šè¿‡ <code>optional-chaining</code> è¯­æ³•ï¼ˆTS 3.7 ä»¥ä¸Šæ”¯æŒï¼‰ï¼Œå¯ä»¥é¿å…è¿™ä¸ªé”™è¯¯ã€‚</p><pre><code class="js">// âœ… okconst name = user?.name</code></pre><h3 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h3><p>éœ€è¦ç”¨ <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions">Discriminated Unions</a> æ¥æ ‡æ³¨ Action çš„ç±»å‹ã€‚</p><pre><code class="js">const initialState = &#123; count: 0 &#125;;type ACTIONTYPE =  | &#123; type: &quot;increment&quot;; payload: number &#125;  | &#123; type: &quot;decrement&quot;; payload: string &#125;;function reducer(state: typeof initialState, action: ACTIONTYPE) &#123;  switch (action.type) &#123;    case &quot;increment&quot;:      return &#123; count: state.count + action.payload &#125;;    case &quot;decrement&quot;:      return &#123; count: state.count - Number(action.payload) &#125;;    default:      throw new Error();  &#125;&#125;function Counter() &#123;  const [state, dispatch] = React.useReducer(reducer, initialState);  return (    &lt;&gt;      Count: &#123;state.count&#125;      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &quot;decrement&quot;, payload: &quot;5&quot; &#125;)&#125;&gt;        -      &lt;/button&gt;      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: &quot;increment&quot;, payload: 5 &#125;)&#125;&gt;        +      &lt;/button&gt;    &lt;/&gt;  );&#125;</code></pre><p>ã€Œ<code>Discriminated Unions</code>ã€ä¸€èˆ¬æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªç±»å‹éƒ½éœ€è¦é€šè¿‡ç±»ä¼¼ type è¿™ç§ç‰¹å®šçš„å­—æ®µæ¥åŒºåˆ†ï¼Œå½“ä½ ä¼ å…¥ç‰¹å®šçš„ type æ—¶ï¼Œå‰©ä¸‹çš„ç±»å‹ payload å°±ä¼šè‡ªåŠ¨åŒ¹é…æ¨æ–­ã€‚</p><p>è¿™æ ·ï¼š</p><ul><li>å½“ä½ å†™å…¥çš„ <code>type</code> åŒ¹é…åˆ° <code>decrement</code> çš„æ—¶å€™ï¼ŒTS ä¼šè‡ªåŠ¨æ¨æ–­å‡ºç›¸åº”çš„ payload åº”è¯¥æ˜¯ string ç±»å‹ã€‚</li><li>å½“ä½ å†™å…¥çš„ <code>type</code> åŒ¹é…åˆ° <code>increment</code> çš„æ—¶å€™ï¼Œåˆ™ payload åº”è¯¥æ˜¯ number ç±»å‹ã€‚</li></ul><p>è¿™æ ·åœ¨ä½  dispatch çš„æ—¶å€™ï¼Œè¾“å…¥å¯¹åº”çš„ <code>type</code>ï¼Œå°±è‡ªåŠ¨æç¤ºä½ å‰©ä½™çš„å‚æ•°ç±»å‹å•¦ã€‚</p><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p>è¿™é‡Œä¸»è¦éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>useEffect</code> ä¼ å…¥çš„å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼è¦ä¹ˆæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ˆæ¸…ç†å‡½æ•°ï¼‰ï¼Œè¦ä¹ˆå°±æ˜¯<code>undefined</code>ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¼šæŠ¥é”™ã€‚</p><p>æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªæƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬çš„ <code>useEffect</code> éœ€è¦æ‰§è¡Œä¸€ä¸ª <code>async</code> å‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="js">// âŒ // Type &#39;Promise&lt;void&gt;&#39; provides no match // for the signature &#39;(): void | undefined&#39;useEffect(async () =&gt; &#123;  const user = await getUser()  setUser(user)&#125;, [])</code></pre><p>è™½ç„¶æ²¡æœ‰åœ¨ <code>async</code> å‡½æ•°é‡Œæ˜¾å¼çš„è¿”å›å€¼ï¼Œä½†æ˜¯ <code>async</code> å‡½æ•°é»˜è®¤ä¼šè¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œè¿™ä¼šå¯¼è‡´ TS çš„æŠ¥é”™ã€‚</p><p>æ¨èè¿™æ ·æ”¹å†™ï¼š</p><pre><code class="js">useEffect(() =&gt; &#123;  const getUser = async () =&gt; &#123;    const user = await getUser()    setUser(user)  &#125;  getUser()&#125;, [])</code></pre><p>æˆ–è€…ç”¨è‡ªæ‰§è¡Œå‡½æ•°ï¼Ÿä¸æ¨èï¼Œå¯è¯»æ€§ä¸å¥½ã€‚</p><pre><code class="js">useEffect(() =&gt; &#123;  (async () =&gt; &#123;    const user = await getUser()    setUser(user)  &#125;)()&#125;, [])</code></pre><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><p>è¿™ä¸ª <code>Hook</code> åœ¨å¾ˆå¤šæ—¶å€™æ˜¯æ²¡æœ‰åˆå§‹å€¼çš„ï¼Œè¿™æ ·å¯ä»¥å£°æ˜è¿”å›å¯¹è±¡ä¸­ <code>current</code> å±æ€§çš„ç±»å‹ï¼š</p><pre><code class="js">const ref2 = useRef&lt;HTMLElement&gt;(null);</code></pre><p>ä»¥ä¸€ä¸ªæŒ‰é’®åœºæ™¯ä¸ºä¾‹ï¼š</p><pre><code class="js">function TextInputWithFocusButton() &#123;  const inputEl = React.useRef&lt;HTMLInputElement&gt;(null);  const onButtonClick = () =&gt; &#123;    if (inputEl &amp;&amp; inputEl.current) &#123;      inputEl.current.focus();    &#125;  &#125;;  return (    &lt;&gt;      &lt;input ref=&#123;inputEl&#125; type=&quot;text&quot; /&gt;      &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt;    &lt;/&gt;  );&#125;</code></pre><p>å½“ <code>onButtonClick</code> äº‹ä»¶è§¦å‘æ—¶ï¼Œå¯ä»¥è‚¯å®š <code>inputEl</code> ä¹Ÿæ˜¯æœ‰å€¼çš„ï¼Œå› ä¸ºç»„ä»¶æ˜¯åŒçº§åˆ«æ¸²æŸ“çš„ï¼Œä½†æ˜¯è¿˜æ˜¯ä¾ç„¶è¦åšå†—ä½™çš„éç©ºåˆ¤æ–­ã€‚</p><p><strong>æœ‰ä¸€ç§åŠæ³•å¯ä»¥ç»•è¿‡å»ã€‚</strong></p><pre><code class="js">const ref1 = useRef&lt;HTMLElement&gt;(null!);</code></pre><p>null! è¿™ç§è¯­æ³•æ˜¯éç©ºæ–­è¨€ï¼Œè·Ÿåœ¨ä¸€ä¸ªå€¼åé¢è¡¨ç¤ºä½ æ–­å®šå®ƒæ˜¯æœ‰å€¼çš„ï¼Œæ‰€ä»¥åœ¨ä½ ä½¿ç”¨ <code>inputEl.current.focus()</code> çš„æ—¶å€™ï¼ŒTS ä¸ä¼šç»™å‡ºæŠ¥é”™ã€‚</p><p>ä½†æ˜¯è¿™ç§è¯­æ³•æ¯”è¾ƒå±é™©ï¼Œéœ€è¦å°½é‡å‡å°‘ä½¿ç”¨ã€‚</p><p>åœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ<code>inputEl.current?.focus()</code> æ˜¯ä¸ªæ›´å®‰å…¨çš„é€‰æ‹©ï¼Œé™¤éè¿™ä¸ªå€¼çœŸçš„ä¸å¯èƒ½ä¸ºç©ºã€‚ï¼ˆæ¯”å¦‚åœ¨ä½¿ç”¨ä¹‹å‰å°±èµ‹å€¼äº†ï¼‰</p><h3 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h3><p>æ¨èä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>innerRef</code> æ¥ä»£æ›¿åŸç”Ÿçš„ <code>ref</code>ï¼Œå¦åˆ™è¦ç”¨åˆ° <code>forwardRef</code> ä¼šæçš„ç±»å‹å¾ˆå¤æ‚ã€‚</p><pre><code class="js">type ListProps = &#123;  innerRef?: React.Ref&lt;&#123; scrollToTop(): void &#125;&gt;&#125;function List(props: ListProps) &#123;  useImperativeHandle(props.innerRef, () =&gt; (&#123;    scrollToTop() &#123; &#125;  &#125;))  return null&#125;</code></pre><p>ç»“åˆåˆšåˆš <code>useRef</code> çš„çŸ¥è¯†ï¼Œä½¿ç”¨æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="js">function Use() &#123;  const listRef = useRef&lt;&#123; scrollToTop(): void &#125;&gt;(null!)  useEffect(() =&gt; &#123;    listRef.current.scrollToTop()  &#125;, [])  return (    &lt;List innerRef=&#123;listRef&#125; /&gt;  )&#125;</code></pre><p>å¾ˆå®Œç¾ï¼Œæ˜¯ä¸æ˜¯ï¼Ÿ</p><p>å¯ä»¥åœ¨çº¿è°ƒè¯• <a href="https://www.typescriptlang.org/play#code/JYWwDg9gTgLgBAKjgQwM5wEoFNkGN4BmUEIcA5FDvmQNwCwAUKJLHAN5wCuqWAyjMhhYANFx4BRAgSz5R3LNgJyeASXBYog4ADcsACWQA7ACYAbLHAC+cIiXKU8MWo0YwAnmAsAZYKhgAFYjB0AF52Rjg4YENDDUUAfgAuTCoYADpFAB4OVFxiU1MAFQhisAAKAEpk7QhgYysAPkZLFwYCTkN8YAhDOB8-MrAg1GT+gOGK8IZI+TVPTRgdfSMzLEHhtOjYqEVRSrgQhrgytgjIuFz8opKIcsmOFumrCoqzyhhOKF7DTgLm1vanUWPTgAFUePtTk9cD0-HBTL4YIoDmIFFgCNkLnkIAViqVKtVavVLA0yj8CgBCV4MM7ySTSfBlfaHKbneGIxRpXCfSiGdKXHHXfHUyKWUQAbQAutS3lgPl9jmdIpkxlEYnF0SE2Ai-IprAB6JpPamWIA">useImperativeHandle</a> çš„ä¾‹å­ã€‚</p><h3 id="è‡ªå®šä¹‰-Hook"><a href="#è‡ªå®šä¹‰-Hook" class="headerlink" title="è‡ªå®šä¹‰ Hook"></a>è‡ªå®šä¹‰ Hook</h3><p>å¦‚æœä½ æƒ³ä»¿ç…§ useState çš„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€å®šè¦è®°å¾—åœ¨é€‚å½“çš„æ—¶å€™ä½¿ç”¨ <code>as const</code>ï¼Œæ ‡è®°è¿™ä¸ªè¿”å›å€¼æ˜¯ä¸ªå¸¸é‡ï¼Œå‘Šè¯‰ TS æ•°ç»„é‡Œçš„å€¼ä¸ä¼šåˆ é™¤ï¼Œæ”¹å˜é¡ºåºç­‰ç­‰â€¦â€¦</p><p>å¦åˆ™ï¼Œä½ çš„æ¯ä¸€é¡¹éƒ½ä¼šè¢«æ¨æ–­æˆæ˜¯ã€Œæ‰€æœ‰ç±»å‹å¯èƒ½æ€§çš„è”åˆç±»å‹ã€ï¼Œè¿™ä¼šå½±å“ç”¨æˆ·ä½¿ç”¨ã€‚</p><pre><code class="js">export function useLoading() &#123;  const [isLoading, setState] = React.useState(false);  const load = (aPromise: Promise&lt;any&gt;) =&gt; &#123;    setState(true);    return aPromise.finally(() =&gt; setState(false));  &#125;;  // âœ… åŠ äº† as const ä¼šæ¨æ–­å‡º [boolean, typeof load]  // âŒ å¦åˆ™ä¼šæ˜¯ (boolean | typeof load)[]  return [isLoading, load] as const;[]&#125;</code></pre><p>å¯¹äº†ï¼Œå¦‚æœä½ åœ¨ç”¨ <code>React Hook</code> å†™ä¸€ä¸ªåº“ï¼Œåˆ«å¿˜äº†æŠŠç±»å‹ä¹Ÿå¯¼å‡ºç»™ç”¨æˆ·ä½¿ç”¨ã€‚</p><h2 id="React-API"><a href="#React-API" class="headerlink" title="React API"></a>React API</h2><h3 id="forwardRef"><a href="#forwardRef" class="headerlink" title="forwardRef"></a>forwardRef</h3><p>å‡½æ•°å¼ç»„ä»¶é»˜è®¤ä¸å¯ä»¥åŠ  refï¼Œå®ƒä¸åƒç±»ç»„ä»¶é‚£æ ·æœ‰è‡ªå·±çš„å®ä¾‹ã€‚è¿™ä¸ª API ä¸€èˆ¬æ˜¯å‡½æ•°å¼ç»„ä»¶ç”¨æ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ refã€‚</p><p>æ‰€ä»¥éœ€è¦æ ‡æ³¨å¥½å®ä¾‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯çˆ¶ç»„ä»¶é€šè¿‡ ref å¯ä»¥æ‹¿åˆ°ä»€ä¹ˆæ ·ç±»å‹çš„å€¼ã€‚</p><pre><code class="js">type Props = &#123; &#125;;export type Ref = HTMLButtonElement;export const FancyButton = React.forwardRef&lt;Ref, Props&gt;((props, ref) =&gt; (  &lt;button ref=&#123;ref&#125; className=&quot;MyClassName&quot;&gt;    &#123;props.children&#125;  &lt;/button&gt;));</code></pre><p>ç”±äºè¿™ä¸ªä¾‹å­é‡Œç›´æ¥æŠŠ ref è½¬å‘ç»™ button äº†ï¼Œæ‰€ä»¥ç›´æ¥æŠŠç±»å‹æ ‡æ³¨ä¸º <code>HTMLButtonElement</code> å³å¯ã€‚</p><p>çˆ¶ç»„ä»¶è¿™æ ·è°ƒç”¨ï¼Œå°±å¯ä»¥æ‹¿åˆ°æ­£ç¡®ç±»å‹ï¼š</p><pre><code class="js">export const App = () =&gt; &#123;  const ref = useRef&lt;HTMLButtonElement&gt;()  return (    &lt;FancyButton ref=&#123;ref&#125; /&gt;  )&#125;</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6910863689260204039&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€</summary>
      
    
    
    
    <category term="React" scheme="https://shinichikudo-fe.github.io/categories/React/"/>
    
    
    <category term="React" scheme="https://shinichikudo-fe.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>è°ˆè°ˆå‰ç«¯CodeReview,åŸ‹ç‚¹å’Œç›‘æ§</title>
    <link href="https://shinichikudo-fe.github.io/2020/12/23/%E6%9D%82%E6%96%87/CodeReview-%E5%9F%8B%E7%82%B9-%E7%9B%91%E6%8E%A7/"/>
    <id>https://shinichikudo-fe.github.io/2020/12/23/%E6%9D%82%E6%96%87/CodeReview-%E5%9F%8B%E7%82%B9-%E7%9B%91%E6%8E%A7/</id>
    <published>2020-12-23T07:09:49.000Z</published>
    <updated>2020-12-23T07:54:28.370Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://juejin.cn/post/6860365929927639047">åŸæ–‡åœ°å€(codereview)</a><br><a href="https://juejin.cn/post/6872583452160425997">åŸæ–‡åœ°å€(åŸ‹ç‚¹å’Œç›‘æ§)</a></p><h1 id="ä»£ç review"><a href="#ä»£ç review" class="headerlink" title="ä»£ç review"></a>ä»£ç review</h1><h2 id="ç°çŠ¶åˆ†æå’Œæ„ä¹‰"><a href="#ç°çŠ¶åˆ†æå’Œæ„ä¹‰" class="headerlink" title="ç°çŠ¶åˆ†æå’Œæ„ä¹‰"></a>ç°çŠ¶åˆ†æå’Œæ„ä¹‰</h2><p>å¤§å¤šæ•°å¼€å‘äººå‘˜ï¼Œæ‰€è®¤çŸ¥çš„ä»£ç reviewï¼Œå°±æ˜¯æŠŠä»£ç æ‹¿å‡ºæ¥ç»™åˆ«äººçœ‹ï¼Œå¤§å®¶è®¨è®ºè®¨è®ºï¼Œè„‘å­é‡Œé¢æ²¡æœ‰ç‰¹åˆ«æ·±åˆ»çš„æ¦‚å¿µã€‚</p><p>å…¶å®ä»£ç reviewæ‰€æ¶‰åŠçš„ä¸œè¥¿åŒ…æ‹¬ï¼š<code>reviewçš„å·¥å…·ã€reviewçš„è§„èŒƒã€reviewçš„æµç¨‹ã€reviewçš„æ–¹å¼ã€ç”šè‡³äººå‘˜å‚ä¸åº¦ã€æ—¶é—´æŠŠæ§</code>ç­‰ç­‰ã€‚</p><p>ä»£ç reviewçš„æ„ä¹‰ï¼Œ<strong>å½“ç„¶å°±æ˜¯é€šè¿‡æµç¨‹ç®¡ç†ï¼Œå°½å¯èƒ½çš„å‡å°‘çº¿ä¸Šé—®é¢˜</strong>ã€‚å¯¹äºTLï¼Œé€šè¿‡è¿™æ ·çš„è¿‡ç¨‹ç®¡ç†ï¼Œèƒ½å¤Ÿå¯¹é¡¹ç›®è´¨é‡æŠŠæ§ã€‚</p><p>å½“ç„¶å®ƒä¹Ÿæœ‰ä¸€å®šçš„<strong>ç¼ºç‚¹</strong>ï¼Œå¢åŠ äº†è½¯ä»¶å¼€å‘çš„æµç¨‹ï¼Œä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†æ•ˆç‡ã€‚ï¼ˆä¸è¿‡è¿™æ˜¯å‡è®¾æˆ‘ä»¬çš„é¡¹ç›®éƒ½æ˜¯é«˜è´¨é‡çš„ï¼Œå¦‚æœé¡¹ç›®çš„è´¨é‡æœ¬èº«å­˜åœ¨é—®é¢˜ï¼Œç­‰åˆ°çº¿ä¸Šä¿®å¤çš„æ—¶å€™ï¼Œä»£ä»·ä¼šå¤§çš„å¤šï¼‰</p><h2 id="ä¸€äº›è½¯æ€§çš„è§è§£"><a href="#ä¸€äº›è½¯æ€§çš„è§è§£" class="headerlink" title="ä¸€äº›è½¯æ€§çš„è§è§£"></a>ä¸€äº›è½¯æ€§çš„è§è§£</h2><ul><li>1ã€ä»£ç reviewçš„ç¯å¢ƒå¡‘é€ </li></ul><p>ä»£ç reviewæ˜¯ä¸€ä¸ªäº¤æµçš„è¿‡ç¨‹ï¼Œå¦‚æœä»£ç å†™çš„å¥½ï¼Œé‚£å°±æ˜¯å±•ç¤ºè‡ªæˆ‘çš„å¹³å°ï¼Œå‘å¤§å®¶åˆ†äº«ä¼˜ç§€çš„å®è·µã€‚<br>å¦‚æœä»£ç æœ‰é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå‘ç°é—®é¢˜ï¼Œå¹¶ä¸”è§£å†³é—®é¢˜ã€‚<br>ä¸€èˆ¬è€Œè¨€ï¼ŒTLåœ¨è¿™ä¸ªè¿‡ç¨‹çš„æ€åº¦å¾ˆé‡è¦ï¼Œå¦‚æœTLä»¥ä¸€ä¸ªæ‰¹è¯„çš„å£æ°”æ¥è¯´è°è°è°æœ‰é—®é¢˜ï¼Œé‚£å¤©ç„¶çš„å¤§å®¶ä¼šå¯¹è¿™ä»¶äº‹èµ·åæ„Ÿã€‚<br>å¦‚æœTLèƒ½åœ¨è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸€ç›´è¾“å‡ºä¸€äº›ä¼˜ç§€çš„æ€ç»´æ–¹å¼ï¼Œä»£ç æ¶æ„æ–¹å¼ï¼Œå…¶å®æ˜¯ç»™åº•ä¸‹äººä¼ æˆç»éªŒçš„è¿‡ç¨‹ï¼Œå¤§å®¶æ„Ÿè§‰æœ‰æ”¶è·ï¼Œè‡ªç„¶ä¼šå–œæ¬¢reviewã€‚<br>ç‰¹åˆ«çš„è¦æ³¨æ„æ€åº¦çš„é—®é¢˜ï¼Œäººçš„æƒ…ç»ªæ˜¯éå¸¸æ•æ„Ÿçš„ï¼Œå¦‚æœå›¢é˜Ÿæœ‰äººè¯´å‡ºç±»ä¼¼â€œè¿™è¡Œä»£ç çœŸåƒåœ¾â€è¿™æ ·çš„è¯ï¼ŒTLå…³æ³¨çš„ç‚¹ä¸€å®šä¸èƒ½è¯´è¿™ä¸ªä»£ç çš„é—®é¢˜ï¼Œè€Œæ˜¯å›¢é˜Ÿä¸­çš„æŸäº›äººçš„è¯­æ°”é—®é¢˜äº†ã€‚<br>æ¢è®¨åˆ«äººçš„ä»£ç çš„æ—¶å€™ï¼Œå¯ä»¥è¯´ï¼Œè¿™è¡Œä»£ç å¯ä»¥æ€ä¹ˆæ€ä¹ˆå®ç°ï¼Œè¡¨è¾¾è‡ªå·±çš„è®¤çŸ¥å°±è¡Œäº†ï¼Œä¸è¦è¡¨è¾¾ç‰¹æ®Šï¼ˆä¸å¥½ï¼‰æƒ…ç»ªã€‚<br>ä¸ªäººåè€Œéå¸¸å–œæ¬¢èµèµåˆ«äººï¼Œæ¯”å¦‚ä»£ç é‡å¤šï¼Œå¯ä»¥è¯´åˆ«äººè¿™æ®µæ—¶é—´å¹¸è‹¦äº†ã€‚é€»è¾‘å¤æ‚ï¼Œå¯ä»¥è¯´è¿™ä¸ªç¡®å®è€—è´¹äº†ä¸å°‘å¿ƒåŠ›ä¹‹ç±»çš„è¯ã€‚</p><ul><li>2ã€ä»£ç reviewâ€”â€”å¦‚ä½•æ¨åŠ¨</li></ul><p>å…¶å®äººæ€»æ˜¯ä¸æƒ³æŠŠè‡ªå·±çš„ä¸œè¥¿æš´éœ²å‡ºæ¥ï¼Œç±»ä¼¼æˆ‘å†™çš„ä»£ç ï¼Œå°±æ˜¯æˆ‘çš„ä¸œè¥¿çš„æ„Ÿè§‰ã€‚<br>åœ¨æ¨åŠ¨ä»£ç reviewçš„æ—¶å€™ï¼Œè¦ä»ä¸¤æ–¹é¢ä¸‹æ‰‹ï¼Œç›¸è¾…ç›¸æˆã€‚</p><p><strong>ä¸€æ–¹é¢æ˜¯ä»·å€¼å®£å¯¼ï¼Œè®©å¤§å®¶è®¤å¯è¿™ä»¶äº‹ï¼Œè®¤å¯ä»£ç reviewçš„é‡è¦æ€§ï¼Œå¦ä¸€æ–¹é¢æ˜¯éœ€è¦ä¸€å®šçš„å¼ºåˆ¶æ€§ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯å›¢é˜Ÿä»£ç è´¨é‡çš„éœ€è¦ï¼Œä¹Ÿæ˜¯å…¬å¸ä¸šåŠ¡ç¨³å®šæ€§çš„</strong>éœ€è¦ã€‚</p><p>ä¾ç…§ä¸ªäººç»éªŒï¼Œä»·å€¼è§‚å®£å¯¼ï¼Œå¯ä»¥ä»è¡Œä¸šå†…å¤§å‚çš„åšæ³•ï¼Œä»¥åŠå¿…è¦æ€§ï¼Œç”šè‡³å›¢é˜Ÿæˆå‘˜çš„èŒä¸šå‘å±•ä¸Šè¯´æ˜ï¼Œå¤§æ¦‚ç‡æ˜¯å¯ä»¥è®©å¤§å®¶è®¤å¯çš„ã€‚<br>æ¯æ¬¡é‡åˆ°é‡å¤§é—®é¢˜çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿæ˜¯æœºä¼šï¼Œå°±çœ‹æˆ‘ä»¬ä¼šä¸ä¼šåˆ©ç”¨ï¼Œå‡å¦‚å‡ºç°çº¿ä¸Šé—®é¢˜ï¼Œæå‡ºä»£ç reviewçš„äº‹æƒ…ï¼Œå¤§å®¶åº”è¯¥ä¼šæ¥å—ã€‚</p><ul><li>3ã€ä»£ç reviewâ€”â€”ä¸å¿˜åˆå¿ƒ</li></ul><p>æ—¶åˆ»è°¨è®°ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ä»€ä¹ˆã€‚<br>ä¸è¦æ”¹ä¸€è¡Œæ ·å¼ä»£ç ï¼Œå°±è¦è¿›è¡Œä¸€æ¬¡reviewã€‚å› ä¸ºè¿™ä¸ªä¸œè¥¿æœ¬èº«æ²¡æœ‰ä»€ä¹ˆæ¢è®¨çš„ä»·å€¼ã€‚<br>ä¸€èˆ¬è€Œè¨€ï¼Œä»£ç é‡è¶…è¿‡ä¸€å®šé‡çš„æ—¶å€™ï¼Œå…¶ä¸šåŠ¡å¤æ‚åº¦ï¼Œä»£ç çš„è®¾è®¡éƒ½æ˜¯å¯ä»¥è¿›è¡Œæ¢è®¨çš„ã€‚</p><h2 id="reviewçš„è§„èŒƒ"><a href="#reviewçš„è§„èŒƒ" class="headerlink" title="reviewçš„è§„èŒƒ"></a>reviewçš„è§„èŒƒ</h2><p>reviewçš„è§„èŒƒï¼Œåº”è¯¥ç»“åˆå›¢é˜Ÿå…·ä½“çš„æƒ…å†µï¼Œä¸¾è¡Œæ–½è¡Œã€‚</p><p>ä¸è¿‡è¿˜æ˜¯æœ‰ä¸€äº›å…±æ€§çš„ä¸œè¥¿ï¼šæ¯”å¦‚reviewçš„è¦ç‚¹æœ‰é‚£äº›ï¼Ÿreviewçš„å‚ä¸äººéƒ½æœ‰é‚£äº›ï¼Ÿreviewçš„ç²’åº¦æ˜¯ä»€ä¹ˆï¼Ÿ</p><h3 id="reviewçš„è¦ç‚¹"><a href="#reviewçš„è¦ç‚¹" class="headerlink" title="reviewçš„è¦ç‚¹"></a>reviewçš„è¦ç‚¹</h3><ul><li><p>1ã€ä»£ç æ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒ<br>è¿™ä¸€éƒ¨åˆ†åŒ…æ‹¬lintè§„èŒƒã€å‘½åè§„èŒƒç­‰ã€‚lintè§„èŒƒä¸€èˆ¬ä½¿ç”¨å·¥å…·å¯ä»¥è§£å†³ï¼Œä½†æ˜¯å‘½åæ˜¯å¦è§„èŒƒéœ€è¦æˆ‘ä»¬å»å®¡æŸ¥ã€‚</p></li><li><p>2ã€ä»£ç çš„å¯è¯»æ€§<br>æ˜¯ä¸æ˜¯æœ‰æ·±å±‚çš„if elseåµŒå¥—ã€‚<br>æ˜¯ä¸æ˜¯æœ‰éš¾ä»¥ç†è§£çš„å‡½æ•°ã€æˆ–è€…ä¸€ä¸ªå‡½æ•°è¿‡äºé•¿ã€‚</p></li><li><p>3ã€è¾¹ç•Œé—®é¢˜<br>æ˜¯ä¸æ˜¯æœ‰å¼€å‘äººå‘˜æ²¡æœ‰æƒ³åˆ°çš„å¼‚å¸¸æƒ…å†µï¼Œè¿™ä¸€èˆ¬æ˜¯å’Œå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ç›¸å…³ã€‚</p></li><li><p>4ã€ä»£ç æ¶æ„<br>ä»£ç çš„ç»„ç»‡æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯æœ‰è°ƒæ•´çš„ç©ºé—´ã€‚æ˜¯ä¸æ˜¯æœ‰å¯å¤ç”¨çš„ä»£ç ï¼Œæå–å‡ºæ¥ï¼Ÿ</p></li></ul><h3 id="å‚ä¸äººå‘˜"><a href="#å‚ä¸äººå‘˜" class="headerlink" title="å‚ä¸äººå‘˜"></a>å‚ä¸äººå‘˜</h3><p>å¦‚æœæ¯”è¾ƒå°çš„å›¢é˜Ÿï¼Œæ¯”å¦‚ä¸‰å››ä¸ªäººï¼Œå¤§å®¶åšçš„ä¸œè¥¿ï¼Œåº”è¯¥éƒ½æ¯”è¾ƒäº†è§£ï¼Œå¯ä»¥å…¨å‘˜å‚ä¸<br>å¦‚æœæ¯”è¾ƒå¤§å‹çš„å›¢é˜Ÿï¼Œå…¶å®ä¹Ÿæ˜¯æŒ‰ç…§æ‰€ç†Ÿæ‚‰çš„ä¸šåŠ¡ï¼Œåˆ†ä¸ºä¸åŒçš„æ–¹å‘ï¼Œç›¸å…³äººå‘˜å¯ä»¥å‚ä¸reivewã€‚<br>ä¸è¿‡å…·ä½“æ‰§è¡Œå±‚é¢ï¼Œéœ€è¦å…·ä½“é—®é¢˜ï¼Œå…·ä½“åˆ†æã€‚</p><h3 id="reviewçš„ç²’åº¦"><a href="#reviewçš„ç²’åº¦" class="headerlink" title="reviewçš„ç²’åº¦"></a>reviewçš„ç²’åº¦</h3><p>ä¸ªäººè®¤ä¸ºï¼Œä¸€äº›ç®€å•çš„æ”¹åŠ¨ï¼Œæ˜¯ä¸éœ€è¦ä»£ç reviewçš„ã€‚<br>ä½†æ˜¯å›¢é˜Ÿæˆå‘˜çš„ç®¡ç†ä¸Šï¼Œéœ€è¦ä¸€äº›ç¡¬æ€§è§„å®šï¼Œé‚£ä¹ˆå¯ä»¥æŠŠä»£ç é‡è¶…è¿‡500è¡Œï¼Œç®—ä½œä¸€ä¸ªä¸´ç•Œç‚¹ã€‚</p><h3 id="reviewçš„å·¥å…·"><a href="#reviewçš„å·¥å…·" class="headerlink" title="reviewçš„å·¥å…·"></a>reviewçš„å·¥å…·</h3><p>reviewæ˜¯ä¸€ä¸ªç³»ç»Ÿçš„å·¥ç¨‹ï¼Œæœ‰å‚ä¸çš„äººå‘˜ã€æœ‰ç›¸å…³è§„èŒƒï¼Œä¸€å®šä¹Ÿæœ‰å·¥å…·ã€‚<br>ä¸ªäººå®è·µä¸Šï¼Œåœ¨é˜¿é‡Œå†…éƒ¨ï¼Œå…¶å®æœ‰ç±»ä¼¼çš„å·¥å…·ã€‚<br>ä½†æ˜¯è€ƒè™‘å¤§å¤šæ•°å…¬å¸å¯èƒ½æ²¡æœ‰è‡ªå·±ç¡®å®šçš„å·¥å…·ï¼Œé‚£ä¹ˆä¸ªäººæ¨èå¼€æºå·¥å…·<a href="http://www.reviewboard.org.cn/">reviewboard</a>ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯ä¸€ä¸ªåŸ‹ç‚¹ç³»ç»Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸€ä¸ªåŸ‹ç‚¹ç³»ç»Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸€ä¸ªåŸ‹ç‚¹ç³»ç»Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸€ä¸ªåŸ‹ç‚¹ç³»ç»Ÿ</h1><p><strong>åŸ‹ç‚¹ç³»ç»Ÿ = åŸ‹ç‚¹SDK + åŸ‹ç‚¹å¯è§†åŒ–å¹³å° + åŸ‹ç‚¹æ¥å…¥æ–¹å¼</strong></p><p>åŸ‹ç‚¹SDKï¼Œè§£å†³çš„é—®é¢˜ï¼Œå°±æ˜¯åŸ‹ç‚¹çš„ä¸€äº›é€šç”¨çš„åŠŸèƒ½çš„å®ç°ï¼Œæ¯”å¦‚ç»Ÿè®¡ç”¨æˆ·çš„UVã€PVç­‰ç­‰ã€‚å®ƒåœ¨å†…éƒ¨ä¸»è¦é€šè¿‡å‘åŸ‹ç‚¹æœåŠ¡åå°å‘é€ç›¸å…³çš„æ•°æ®ã€‚å®ƒå¯¹å¤–æš´éœ²ä¸€å¥—ç»Ÿä¸€ä¸ªapiï¼Œæ–¹ä¾¿æˆ‘ä»¬æ¥å…¥ã€‚<br>åŸ‹ç‚¹å¯è§†åŒ–å¹³å°ï¼Œè§£å†³çš„é—®é¢˜ï¼Œå°±æ˜¯å½“æˆ‘è¿™äº›åŸ‹ç‚¹æ•°æ®è¢«ä¸ŠæŠ¥ä¹‹åï¼Œæˆ‘èƒ½çœ‹åˆ°ç›¸å…³çš„æ•°æ®ã€‚æ¯”å¦‚ä»Šå¤©çš„UVã€PVæ˜¯å¤šå°‘ï¼Œç›¸æ¯”æ˜¨å¤©çš„ç¯æ¯”å¢é•¿æ˜¯å¤šå°‘ç­‰ç­‰ã€‚</p><p>åŸ‹ç‚¹æ¥å…¥æ–¹å¼ï¼Œè¿™æ˜¯åŸ‹ç‚¹ç³»ç»Ÿå¯¹å¤–å¼€æ”¾çš„èƒ½åŠ›ï¼Œä¸€èˆ¬ä¼šéœ€è¦ç”³è¯·ä¸€ä¸ªappidï¼Œè¿™ä¸ªappidæ˜¯å”¯ä¸€çš„ï¼Œç„¶åæ¯æ¬¡ä¸ŠæŠ¥åŸ‹ç‚¹çš„æ—¶å€™ï¼Œå°±çŸ¥é“æ˜¯å“ªä¸ªé¡¹ç›®çš„æ•°æ®äº†ã€‚</p><p>æ›´è¯¦ç»†ä¸€ç‚¹çš„ï¼š<br>ä¸Šé¢çš„è¯´æ³•æ¯”è¾ƒç¬¼ç»Ÿï¼Œæ¯”å¦‚åŸ‹ç‚¹SDKï¼Œå®šä¹‰çš„æ›´è¯¦ç»†ä¸€ç‚¹ï¼Œæœ¬è´¨ä¸Šå®ƒå°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼Œè¿™ä¸ªjsæ–‡ä»¶æ˜¯ç”±å¼€å‘å•†æä¾›çš„ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åšè‡ªå·±çš„åŸ‹ç‚¹SDKã€‚<br>ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºSDKï¼Œè¿˜æœ‰ä¸€å±‚åŸå› ï¼Œå°±æ˜¯SDKåŸºæœ¬ä¸Šæ˜¯ä¸å˜çš„ï¼Œå°±å’Œæˆ‘ä»¬å¼€å‘Vueé¡¹ç›®ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥vue.jsæ–‡ä»¶ã€‚æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“vue.jsæ–‡ä»¶æ€ä¹ˆå®ç°çš„ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“å®ƒæä¾›çš„apiæ˜¯ä»€ä¹ˆå°±è¡Œã€‚</p><p>SDKå†…éƒ¨æ‰€åšçš„äº‹æƒ…ï¼Œå°±æ˜¯ä¸ŠæŠ¥æ•°æ®ï¼Œæ‰€è°“çš„ä¸ŠæŠ¥æ•°æ®ï¼Œæ— éå°±æ˜¯å‘é€ä¸€ä¸ªhttpè¯·æ±‚æ¥å£ï¼Œå‘é€åˆ°åå°æœåŠ¡å™¨ã€‚ç„¶åå­˜å…¥æ•°æ®åº“ä¸­ã€‚<br>åŸ‹ç‚¹å¯è§†åŒ–å¹³å°ï¼Œå°±æ˜¯ä»æ•°æ®åº“ä¸­ï¼ŒæŠŠè¿™äº›æ•°æ®è¯»å–å‡ºæ¥ï¼Œå±•ç¤ºå‡ºæ¥è€Œå·²ã€‚æ›´æ·±å±‚æ¬¡çš„ï¼Œæ— éå°±æ˜¯åšæ•°æ®åˆ†æï¼Œè½¬åŒ–ç‡åˆ†æä¹‹ç±»ã€‚</p><h2 id="åŸ‹ç‚¹å’Œç›‘æ§æ˜¯ä¸¤å›äº‹"><a href="#åŸ‹ç‚¹å’Œç›‘æ§æ˜¯ä¸¤å›äº‹" class="headerlink" title="åŸ‹ç‚¹å’Œç›‘æ§æ˜¯ä¸¤å›äº‹"></a>åŸ‹ç‚¹å’Œç›‘æ§æ˜¯ä¸¤å›äº‹</h2><p>å¥½å¤šåŒå­¦æŠŠåŸ‹ç‚¹å’Œç›‘æ§æ··ä¸ºä¸€è°ˆï¼Œå…¶å®åœ¨å¤§å‚å†…éƒ¨ï¼Œä»–ä»¬å®Œå…¨æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><ul><li><strong>ä»åŠŸèƒ½ä¸Šè¯´:</strong></li></ul><p>ç›‘æ§ä¸»è¦æ˜¯è¿›è¡ŒJSé”™è¯¯ç›‘æ§ã€æ¥å£å¼‚å¸¸ç›‘æ§ã€é¡µé¢æ€§èƒ½ç›‘æ§ã€èµ„æºåŠ è½½å¼‚å¸¸ã€ä»¥åŠä¸€äº›è‡ªå®šä¹‰çš„å¼‚å¸¸ã€‚è€ŒåŸ‹ç‚¹ä¸»è¦åšçš„äº‹æƒ…æ˜¯æ•°æ®ä¸ŠæŠ¥ï¼Œæ•°æ®ç»Ÿè®¡ï¼Œæ•°æ®åˆ†æã€‚</p><ul><li><strong>ä»ä½¿ç”¨çš„è§’åº¦æ¥è¯´:</strong></li></ul><p>ç›‘æ§èƒ½å‡†ç¡®çš„å®šä½åˆ°é”™è¯¯ï¼Œä¸éœ€è¦æˆ‘ä»¬åœ¨ä»£ç ä¸­æ·»åŠ é¢å¤–çš„ä¸œè¥¿ï¼Œåªéœ€è¦å¼•å…¥ç›‘æ§çš„SDKï¼Œå°±èƒ½å®ç°é”™è¯¯çš„ç›‘æ§ã€‚<br>è€ŒåŸ‹ç‚¹æ›´å¤šçš„æ˜¯ä¸šåŠ¡è¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡å±‚é¢ï¼Œå¾—è‡ªå·±å†³å®šï¼Œè‡ªå·±æƒ³çŸ¥é“ä»€ä¹ˆæ•°æ®ï¼Œæƒ³è¦æ€ä¹ˆåŸ‹ç‚¹ï¼Œç„¶åå†åšä»€ä¹ˆæ ·çš„åˆ†æï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥å…¥åŸ‹ç‚¹SDKä¹‹åï¼Œè¿˜éœ€è¦è°ƒç”¨åŸ‹ç‚¹çš„apiè¿›è¡Œæ•°æ®ä¸ŠæŠ¥ã€‚</p><p>æ‰€ä»¥ä¸€å®šè¦æ˜ç¡®ï¼ŒåŸ‹ç‚¹å’Œç›‘æ§æ˜¯ä¸¤å›äº‹ã€‚</p><h2 id="åŸ‹ç‚¹å’Œç›‘æ§çš„å®ç°æ˜¯æœ‰å·®å¼‚çš„"><a href="#åŸ‹ç‚¹å’Œç›‘æ§çš„å®ç°æ˜¯æœ‰å·®å¼‚çš„" class="headerlink" title="åŸ‹ç‚¹å’Œç›‘æ§çš„å®ç°æ˜¯æœ‰å·®å¼‚çš„"></a>åŸ‹ç‚¹å’Œç›‘æ§çš„å®ç°æ˜¯æœ‰å·®å¼‚çš„</h2><p>è¿™é‡Œæ‰€è¯´çš„å®ç°ï¼Œæ˜¯<strong>æŒ‡è¿™ä¸ªç›¸å…³çš„SDKçš„å®ç°åŸç†</strong>ã€‚</p><ul><li><strong>åŸ‹ç‚¹çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li></ul><p>åŸ‹ç‚¹çš„æœ¬è´¨æ˜¯æ•°æ®ä¸ŠæŠ¥ï¼Œé‚£ä¸€å®šç¦»ä¸å¼€è¿™ä¹ˆä¸€äº›çº¬åº¦çš„æ•°æ®ï¼šåœ°ç†ä½ç½®ã€é¡µé¢è·¯å¾„ã€æµè§ˆå™¨ä¿¡æ¯ã€userIdã€æ—¶é—´æˆ³ç­‰ç­‰ã€‚ç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯ï¼Œåœ¨ç”¨æˆ·ä¸ŠæŠ¥çš„æ—¶å€™ï¼Œåº”è¯¥éƒ½æ˜¯è‡ªåŠ¨æºå¸¦çš„ã€‚<br>ä¸€äº›ä¸ŠæŠ¥çš„æ•°æ®ï¼Œå¯èƒ½ä¼šå’Œä¸šåŠ¡ç›¸å…³ï¼Œæä¾›çš„åŸ‹ç‚¹apiä¸­ï¼ŒåŠ ä¸€æ¡ç±»ä¼¼ä¸šåŠ¡æ ‡è¯†çš„IDï¼Œè®©ç›¸å…³æ•°æ®å…³è”èµ·æ¥ã€‚</p><ul><li><strong>ç›‘æ§çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li></ul><p>å…¶å®æ— éåœ¨SDKå†…éƒ¨ï¼Œå®ç°å‡ ç§å¼‚å¸¸ç›‘æ§ã€‚</p><p>JSé”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨<code>window.onerror</code>çš„æ–¹å¼ç›‘æ§ã€‚</p><p>æ¥å£å¼‚å¸¸ï¼Œç°åœ¨çš„è¯·æ±‚ä¸€èˆ¬æ˜¯<code>fetchæˆ–è€…æ˜¯ajaxè¯·æ±‚</code>ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠä»–ä»¬åŒ…è£…ä¸€å±‚ï¼Œåœ¨ç›¸åº”çš„å“åº”äº‹ä»¶ä¸­ï¼Œè·å–æˆ‘ä»¬çš„ä¿¡æ¯ï¼Œå¦‚æœè¿”å›çš„ä¸æ˜¯200çš„è¯·æ±‚ï¼Œç›´æ¥ä¸ŠæŠ¥é”™è¯¯ã€‚</p><p>é¡µé¢æ€§èƒ½ï¼Œä¸»è¦é€šè¿‡æµè§ˆå™¨æä¾›çš„ä¸€ä¸ªå¯¹è±¡æ¥å®ç°ï¼Œ<code>Performanceç›¸å…³çš„api</code>ï¼Œå®ƒè®°å½•äº†æµè§ˆå™¨åŠ è½½ã€è§£æèµ„æºçš„æ—¶é—´å ç”¨æƒ…å†µã€‚</p><p>èµ„æºåŠ è½½é”™è¯¯ï¼Œæœ€ç®€å•çš„æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡<code>onerror</code>äº‹ä»¶æ¥å®ç°ã€‚scriptå¯ä»¥ç”¨ï¼Œimgæ ‡ç­¾éƒ½å¯ä»¥ç”¨ã€‚<br>è¿™äº›è¡¨è¿°ï¼Œæ¯”è¾ƒç¬¼ç»Ÿï¼Œæ¯”å¦‚jsé”™è¯¯é‡Œé¢ï¼Œå…³äºpromiseã€å…³äºvueçš„é”™è¯¯ï¼Œåœ¨é”™è¯¯æ•è·ä¸Šéƒ½éœ€è¦åšè¡¥å……ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6860365929927639047&quot;&gt;åŸæ–‡åœ°å€(codereview)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http</summary>
      
    
    
    
    <category term="æ‚æ–‡" scheme="https://shinichikudo-fe.github.io/categories/%E6%9D%82%E6%96%87/"/>
    
    
    <category term="CodeReview" scheme="https://shinichikudo-fe.github.io/tags/CodeReview/"/>
    
  </entry>
  
  <entry>
    <title>GraphQL vs Restful Api</title>
    <link href="https://shinichikudo-fe.github.io/2020/11/18/GraphQL/GraphQL-vs-Restful-Api/"/>
    <id>https://shinichikudo-fe.github.io/2020/11/18/GraphQL/GraphQL-vs-Restful-Api/</id>
    <published>2020-11-18T09:07:34.000Z</published>
    <updated>2020-11-19T03:50:42.329Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://cloud.tencent.com/developer/news/572892">åŸæ–‡åœ°å€</a></p><h2 id="ä¸ä¼ ç»Ÿ-REST-API-ç›¸æ¯”ï¼ŒGraphQL-æä¾›äº†å“ªäº›ä¼˜åŠ¿ï¼Ÿ"><a href="#ä¸ä¼ ç»Ÿ-REST-API-ç›¸æ¯”ï¼ŒGraphQL-æä¾›äº†å“ªäº›ä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="ä¸ä¼ ç»Ÿ REST API ç›¸æ¯”ï¼ŒGraphQL æä¾›äº†å“ªäº›ä¼˜åŠ¿ï¼Ÿ"></a>ä¸ä¼ ç»Ÿ REST API ç›¸æ¯”ï¼ŒGraphQL æä¾›äº†å“ªäº›ä¼˜åŠ¿ï¼Ÿ</h2><p>æˆ‘ä»¬å°†è®¨è®º GraphQL çš„è®¾è®¡åŸåˆ™ï¼Œæ¯”è¾ƒ GraphQL ä¸ REST ä¸­çš„ç›¸åŒè¯·æ±‚ï¼Œå¹¶æ·±å…¥æ¢è®¨ GraphQL ç›¸å¯¹å…¶ä»–æ¶æ„çš„ä¼˜ç‚¹ã€‚</p><p>ä¸ºç†è§£ GraphQL ä½œä¸º API æ¶æ„çš„å¥½å¤„ï¼Œæˆ‘ä»¬è¦è®¨è®º API åœ¨<code>å®¢æˆ·ç«¯ - æœåŠ¡å™¨</code>ç»“æ„ä¸­çš„ä½œç”¨ã€‚<strong>APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œå®ƒå…è®¸æœåŠ¡å™¨ä»å®¢æˆ·ç«¯æ¥æ”¶ç»“æ„åŒ–æ•°æ®è¯·æ±‚ï¼Œå¹¶é’ˆå¯¹è¯·æ±‚çš„æ•°æ®å‘é€ç»“æ„åŒ–çš„å“åº”</strong>ã€‚è®¾è®¡ API æ¶æ„çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ã€‚</p><p>è®©æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ä¿ƒä½¿ GraphQL é€‚åˆç°ä»£åŒ– Web åº”ç”¨ç¨‹åºçš„é‡è¦åŸºæœ¬è®¾è®¡åŸåˆ™ã€‚</p><h2 id="GraphQL-æœåŠ¡å™¨çš„è®¾è®¡åŸåˆ™"><a href="#GraphQL-æœåŠ¡å™¨çš„è®¾è®¡åŸåˆ™" class="headerlink" title="GraphQL æœåŠ¡å™¨çš„è®¾è®¡åŸåˆ™"></a>GraphQL æœåŠ¡å™¨çš„è®¾è®¡åŸåˆ™</h2><p> 1.<strong>æŸ¥è¯¢ä¸ºåˆ†å±‚ç»“æ„</strong>ï¼Œä½¿ç”¨å°†æŸ¥è¯¢ä¸å“åº”æ•°æ®1å¯¹1åŒ¹é…çš„åˆ†å±‚å’ŒåµŒå¥—å­—æ®µæ ¼å¼ã€‚æŸ¥è¯¢å’Œå“åº”çš„å½¢çŠ¶ç±»ä¼¼äºæ ‘ï¼Œå¯æŸ¥è¯¢æ¯ä¸ªé¡¹çš„å…¶ä»–åµŒå¥—å­—æ®µã€‚åœ¨ Facebook çš„æ–°é—»æ¨é€ä¸­ï¼Œè¿™ç§ç»“æ„å…è®¸ä¸€ä¸ªæŸ¥è¯¢è¿”å›ä¸€ä¸ªå¸–å­åˆ—è¡¨ã€æ¯ä¸ªç‰¹å®šå¸–å­çš„è¯„è®ºï¼Œä»¥åŠæ¯ä¸ªè¯„è®ºçš„ç‚¹èµã€‚</p><p> 2.<strong>è¯¥ç»“æ„ä»¥äº§å“ä¸ºä¸­å¿ƒï¼Œå…³æ³¨å‰ç«¯å¸Œæœ›å¦‚ä½•æ¥æ”¶æ•°æ®ï¼Œå¹¶æ„å»ºäº¤ä»˜æ‰€éœ€çš„è¿è¡Œæ—¶</strong>ã€‚è¿™ä½¿å¾— Facebook çš„æ–°é—»æ¨é€å¯é€šè¿‡ä¸€æ¬¡è¯·æ±‚ä»åç«¯è·å–éœ€è¦çš„æ‰€æœ‰æ•°æ®ï¼Œä½¿æœåŠ¡å™¨æŒ‰ç…§ GraphQL çš„è§„èŒƒä»ä¸åŒçš„ç«¯ç‚¹è·å–æ•°æ®ã€‚</p><p> 3.<strong>å®ƒä½¿ç”¨ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ç±»å‹ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿä½¿å¼€å‘äººå‘˜èƒ½åœ¨æ‰§è¡Œå‰ç¡®ä¿æŸ¥è¯¢ä½¿ç”¨äº†æœ‰æ•ˆç±»å‹ï¼Œå¹¶ä¸”è¯­æ³•æ­£ç¡®</strong>ã€‚ä¾‹å¦‚ï¼Œæ–°é—»æ¨é€çš„ GraphQL æ¨¡å¼è¦æ±‚å­—æ®µâ€œ<code>user</code>â€å¿…é¡»åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œâ€œ<code>likes</code>â€å¿…é¡»åŒ…å«ä¸€ä¸ªæ•°å­—ã€‚å¦‚æœæŸ¥è¯¢è¯•å›¾æ·»åŠ ä¸åŒç±»å‹çš„è¾“å…¥ï¼ŒGraphQL å°†åœ¨æ‰§è¡ŒæŸ¥è¯¢å‰æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p> 4.<strong>GraphQL æŸ¥è¯¢æ˜¯åœ¨å®¢æˆ·ç«¯æŒ‡å®šçš„ï¼Œå› æ­¤ï¼Œå®¢æˆ·ç«¯ç¡®åˆ‡çŸ¥é“å®ƒå°†ä»¥ä½•ç§æ ¼å¼æ¥æ”¶æ•°æ®</strong>ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå‰ç«¯è¯·æ±‚çš„æ ¼å¼æ˜¯åŒ…å«ç”¨æˆ·åã€è¯„è®ºå’Œç‚¹èµçš„ post æ•°æ®ï¼Œé‚£ä¹ˆæ¥è‡ª Facebook æ–°é—»æ¨é€çš„è¯·æ±‚ä¼šæ„å»ºåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯åƒå…¶ä»–æ¶æ„é‚£æ ·æ„å»ºå¤šä¸ªå•ç‹¬çš„æ•°æ®å—ã€‚</p><p> 5.<strong>ä½¿ç”¨ GraphQL çš„æœåŠ¡å™¨ç»“æ„å¿…é¡»æ˜¯å†…çœçš„ï¼Œæˆ–è€…å¯ç”± GraphQL è‡ªå·±æŸ¥è¯¢</strong>ã€‚äºæ˜¯æ‰æœ‰äº†åƒ <a href="https://github.com/graphql/graphiql">GraphiQL</a> æˆ– <a href="https://www.apollographql.com/docs/apollo-server/testing/graphql-playground/">GraphQL playground</a> è¿™æ ·çš„å¼ºå¤§å·¥å…·ã€‚è¿™ä¸¤ç§å·¥å…·éƒ½å¯ä»¥è®© Facebook å¼€å‘äººå‘˜å‡†ç¡®åœ°çœ‹åˆ°åœ¨ä»–ä»¬çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨äº†å“ªäº›æŸ¥è¯¢å’Œå­—æ®µã€‚</p><h2 id="ä¼ ç»Ÿçš„-RESTful-æ¶æ„"><a href="#ä¼ ç»Ÿçš„-RESTful-æ¶æ„" class="headerlink" title="ä¼ ç»Ÿçš„ RESTful æ¶æ„"></a>ä¼ ç»Ÿçš„ RESTful æ¶æ„</h2><p>REST æ¶æ„çš„è®¾è®¡èŒƒå¼ä¾§é‡äºåˆ†é… HTTP è¯·æ±‚æ–¹æ³•ï¼ˆ<code>GETã€POSTã€PUTã€PATCHã€DELETE</code>ï¼‰å’Œ URL ç«¯ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src="https://ask.qcloudimg.com/http-save/yehe-7350649/gmtfcrky41.png?imageView2/2/w/1620" alt="restful"></p><p><strong>åœ¨ REST æ¶æ„ä¸­ï¼Œæ–¹æ³•å’Œç«¯ç‚¹çš„æ¯ä¸ªç»„åˆå¾—åˆ°ä¸åŒçš„å°è£…åŠŸèƒ½</strong>ã€‚å¦‚æœå®¢æˆ·ç«¯éœ€è¦çš„æ•°æ®ç‰¹å®šç«¯ç‚¹ / æ–¹æ³•ä¸æä¾›ï¼Œåˆ™å¯èƒ½éœ€è¦é¢å¤–è¯·æ±‚ã€‚ä» REST è¯·æ±‚è¿”å›çš„æ•°æ®æ ¼å¼ä¾èµ–äºç«¯ç‚¹â€”ä¸èƒ½ä¿è¯è¿™äº›æ•°æ®ä¼šæŒ‰ç…§å‰ç«¯éœ€è¦çš„æ–¹å¼è¿›è¡Œæ ¼å¼åŒ–ã€‚ä¸ºä½¿ç”¨æ¥è‡ªå“åº”çš„æ•°æ®ï¼ˆæ ¼å¼ä¸ç¼ºçœæƒ…å†µä¸‹ä»ç«¯ç‚¹è¿”å›çš„æ ¼å¼ä¸åŒï¼‰ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯ç¼–å†™æ•°æ®è§£æå’Œæ•°æ®æ“ä½œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ GraphQL è§„èŒƒä¸ REST çš„ä¸åŒä¹‹å¤„ï¼Œä»¥åŠå®ƒçš„ä¼˜ç‚¹ã€‚è¿™äº›ä¼˜ç‚¹ä½¿è¿™ä¸ªæ–°æ¶æ„æˆä¸ºç‰¹åˆ«é€‚åˆè§£å†³å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ•°æ®äº¤ä»˜é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="GraphQL-æ¶æ„"><a href="#GraphQL-æ¶æ„" class="headerlink" title="GraphQL æ¶æ„"></a>GraphQL æ¶æ„</h2><p>ä¸ RESTful API ä¸€æ ·ï¼ŒGraphQL API è®¾è®¡ç”¨äºå¤„ç† HTTP è¯·æ±‚å¹¶å¯¹è¿™äº›è¯·æ±‚æä¾›å“åº”ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™å°±æ˜¯ç›¸ä¼¼ä¹‹å¤„ã€‚**REST API æ„å»ºåœ¨è¯·æ±‚æ–¹æ³•å’Œç«¯ç‚¹ä¹‹é—´çš„è¿æ¥ä¸Šï¼Œè€Œ GraphQL API è¢«è®¾è®¡ä¸ºåªé€šè¿‡ä¸€ä¸ªç«¯ç‚¹ï¼Œå§‹ç»ˆä½¿ç”¨ POST è¯·æ±‚è¿›è¡ŒæŸ¥è¯¢ï¼Œå…¶ URL é€šå¸¸æ˜¯ <code>yourdomain.com/graphql</code>**ã€‚</p><p><img src="https://ask.qcloudimg.com/http-save/yehe-7350649/yvuf86kzg2.jpeg?imageView2/2/w/1620" alt="graphql"></p><p>è¯·æ±‚åˆ°è¾¾ GraphQL ç«¯ç‚¹åï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„è½½è·å®Œå…¨åœ¨è¯·æ±‚ä½“ä¸­å¤„ç†ã€‚è¿™ä¸ªè¯·æ±‚ä½“å¿…é¡»éµå¾ª GraphQL è§„èŒƒï¼ŒAPI å¿…é¡»<strong>æœ‰é€‚å½“çš„æœåŠ¡å™¨ç«¯é€»è¾‘æ¥å¤„ç†è¿™äº›è¯·æ±‚å¹¶æä¾›é€‚å½“çš„å“åº”</strong>ã€‚</p><p>è¿™æä¾›äº†æ¯” RESTful API æ›´æµç•…çš„å®¢æˆ·ç«¯ä½“éªŒï¼Œåè€…å¯èƒ½è¦æ±‚å®¢æˆ·ç«¯é’ˆå¯¹å¤šä¸ªæ•°æ®å—å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œå¹¶åœ¨æ•°æ®è¿”å›åè¿›è¡Œæ“ä½œã€‚</p><p>ä¸ºäº†é˜æ˜ GraphQL æ˜¯å¦‚ä½•å®ç°è¿™ä¸€ç‚¹çš„ï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹ GraphQL æœåŠ¡å™¨çš„ç»“æ„ã€‚</p><h2 id="GraphQL-æœåŠ¡å™¨"><a href="#GraphQL-æœåŠ¡å™¨" class="headerlink" title="GraphQL æœåŠ¡å™¨"></a>GraphQL æœåŠ¡å™¨</h2><p>å¯ç”¨ GraphQL é€»è¾‘çš„æœåŠ¡å™¨ç«¯é€»è¾‘ç”±å®šä¹‰äº†æœåŠ¡å™¨åŠŸèƒ½çš„ <code>Documents</code> ç»„æˆã€‚è¿™äº› <code>Documents</code> åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶å’Œç±»å‹ç³»ç»Ÿå®šä¹‰ã€‚é¡¾åæ€ä¹‰ï¼Œç±»å‹ç³»ç»Ÿå®šä¹‰ä¸ºæ¯ä¸ªæ•°æ®å­—æ®µå®šä¹‰å¯æ¥å—çš„ç±»å‹å’Œæ ¼å¼è¾“å…¥åŠç»“æœã€‚</p><p>å¯æ‰§è¡Œæ–‡ä»¶åŒ…å«è¦å¤„ç†çš„å¯èƒ½çš„æ“ä½œåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬æ“ä½œç±»å‹ï¼ˆæŸ¥è¯¢ã€ä¿®æ”¹æˆ–è®¢é˜…ï¼‰ã€æ“ä½œåç§°ã€è¦æŸ¥è¯¢æˆ–å†™å…¥çš„å­—æ®µå’Œä¸€ä¸ªé€‰æ‹©é›†ï¼Œè¯¥é€‰æ‹©é›†å‡†ç¡®å®šä¹‰äº†å°†ä»æ“ä½œè¿”å›çš„æ•°æ®ã€‚é€‰æ‹©é›†æ˜¯ GraphQL çš„æœ€å¤§ä»·å€¼æ‰€åœ¨â€”â€”å®ƒä»¬å…è®¸å®¢æˆ·ç«¯æŸ¥è¯¢ç‰¹å®šçš„æ•°æ®é›†å¹¶æ¥æ”¶åŒ…å«æ‰€è¯·æ±‚ä¿¡æ¯çš„å“åº”ï¼šä¸å¤šä¸å°‘ã€‚</p><p>æœ‰å…³ GraphQL è§„èŒƒçš„ç»“æ„å’Œè¯­æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="http://spec.graphql.org/June2018/#sec-Overview">GraphQL çš„æ–‡æ¡£</a>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†çœ‹ä¸‹ GraphQL ä¸­æŸ¥è¯¢çš„ç»“æ„ã€‚</p><h2 id="GraphQL-æŸ¥è¯¢è§£æ"><a href="#GraphQL-æŸ¥è¯¢è§£æ" class="headerlink" title="GraphQL æŸ¥è¯¢è§£æ"></a>GraphQL æŸ¥è¯¢è§£æ</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„ GraphQL æŸ¥è¯¢ï¼Œç”¨äºè·å–ç‰¹å®šä¹¦ç±çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä½œè€…çš„å§“å’Œåã€‚</p><pre><code class="js">GET /graphql?query=&#123; books(id:12) &#123; authors &#123; firstName, lastName &#125; title, yearPublished, length &#125; &#123;   Query &#123;                 //  operation type  books (id:12) &#123;         //  operation endpoint     authors &#123;            //  requested fields        firstName        lastName     &#125;      title     yearPublished        &#125;  &#125;&#125;</code></pre><p>è¿™ä¸€åˆ‡éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæŸ¥è¯¢ç”± GraphQL æœåŠ¡å™¨é€»è¾‘è§£æå’Œå¤„ç†å®Œæˆã€‚å½“æŠŠå®ƒä¸ REST æ¶æ„ä¸­ç›¸åŒç»“æ„çš„è¯·æ±‚è¿›è¡Œæ¯”è¾ƒæ—¶ï¼ŒGraphQL çš„ä¼˜åŠ¿å°±å¼€å§‹æ˜¾ç°å‡ºæ¥äº†ã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ REST è¯·æ±‚ç»“æ„ï¼Œç„¶åé‡ç‚¹è®¨è®ºå…¶ä¸­çš„ä¸€äº›å·®å¼‚ï¼</p><h2 id="REST-è¯·æ±‚è§£æ"><a href="#REST-è¯·æ±‚è§£æ" class="headerlink" title="REST è¯·æ±‚è§£æ"></a>REST è¯·æ±‚è§£æ</h2><p>è¦å‘ REST API å‘å‡ºç›¸åŒçš„è¯·æ±‚ï¼Œå®¢æˆ·ç«¯é¦–å…ˆéœ€è¦å‘èƒ½å¤Ÿè¿”å›å›¾ä¹¦æ•°æ®çš„ç«¯ç‚¹å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶å°†å›¾ä¹¦ id ä½œä¸ºå‚æ•°ä¼ å…¥ï¼š</p><pre><code class="js">GET /books/12</code></pre><p>è¿™ä¸ªè¯·æ±‚å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªåŒ…å«ç‰¹å®šå›¾ä¹¦æ‰€æœ‰æ•°æ®çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="js">&#123;   â€œtitleâ€ : â€œThe Hitchhiker&#39;s Guide to the Galaxyâ€,  â€œauthorIDâ€: 42,  â€œyearPublishedâ€ : 1978,  â€œlengthâ€: 208,  â€œgenreâ€: â€œScience Fictionâ€&#125;</code></pre><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œä¸ç›¸åŒçš„ GraphQL æŸ¥è¯¢ç›¸æ¯”ï¼Œè¯¥å“åº”æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ul><li>1.REST å“åº”åŒ…å«ç±»ä¼¼ genre è¿™æ ·çš„é¢å¤–æ•°æ®ï¼Œè¿”å›çš„ä¿¡æ¯è¶…å‡ºäº†æˆ‘ä»¬çš„éœ€æ±‚ã€‚</li><li>2.REST éœ€è¦å†å‘é€ä¸€ä¸ªè¯·æ±‚æ¥è·å¾—æˆ‘ä»¬å®é™…ä¸Šæ­£åœ¨æŸ¥æ‰¾çš„æ•°æ®ï¼šè¿™ä¸ªç‰¹å®šä½œè€…çš„æ‰€æœ‰ä¹¦ç±ã€‚</li></ul><p>ä¸ºäº†è·å¾—è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬çš„ <code>authorID</code> å‘å‡ºä¸€ä¸ªé¢å¤–çš„è¯·æ±‚ï¼š</p><pre><code class="js">GET /authors/42</code></pre><p>è¿™ä¸ªè¯·æ±‚çš„å“åº”åº”è¯¥åŒ…å«æˆ‘ä»¬æ­£åœ¨æŸ¥æ‰¾çš„æ‰€æœ‰æ•°æ®ï¼š</p><pre><code class="js">&#123;   â€œfirstNameâ€ : â€œDouglasâ€,  â€œlastNameâ€: â€œAdamsâ€&#125;</code></pre><p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†éœ€è¦çš„æ‰€æœ‰ä¹¦ç±å’Œä½œè€…æ•°æ®ï¼Œå“åº”è§£æç”±å®¢æˆ·ç«¯å®Œæˆã€‚ç°åœ¨ï¼Œå‰ç«¯åº”ç”¨ç¨‹åºå¿…é¡»å°†æ¥è‡ªä¸åŒç«¯ç‚¹çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·ï¼Œç”¨äºå®ç°æœŸæœ›çš„åŠŸèƒ½ã€‚æ€»çš„æ¥è¯´ï¼Œä¸ REST API ç›¸æ¯”ï¼ŒGraphQL æä¾›çš„æ€§èƒ½ä¼˜åŠ¿å¯ä»¥ä¸ºå‰ç«¯å¼€å‘äººå‘˜å¸¦æ¥å›æŠ¥ã€‚ä½¿ç”¨ GraphQL è§„èŒƒåˆ›å»ºæœåŠ¡å™¨å¯èƒ½éœ€è¦æ›´å¤šçš„è®¾ç½®ä»¥åŠç¼–å†™é¢„æµ‹æ€§çš„æœåŠ¡å™¨ç«¯é€»è¾‘æ¥è§£æå’Œå¤„ç†è¯·æ±‚ã€‚</p><p>è™½ç„¶ GraphQL çš„è®¾ç½®æˆæœ¬å¯èƒ½æ¯”ä¼ ç»Ÿçš„ REST æ¶æ„è¦é«˜ï¼Œä½†æ˜¯ï¼Œæ›´æ˜“äºç»´æŠ¤çš„ä»£ç ã€å¥å£®çš„å¼€å‘å·¥å…·å’Œç²¾ç®€çš„å®¢æˆ·ç«¯æŸ¥è¯¢æ‰€å¸¦æ¥çš„å¥½å¤„é€šå¸¸ä¼šè¶…è¿‡æˆæœ¬ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç›¸åŒï¼š éƒ½æ‹¥æœ‰èµ„æºè¿™ä¸ªæ¦‚å¿µï¼Œè€Œä¸”éƒ½å¯ä»¥æŒ‡å®šèµ„æºçš„èº«ä»½<br>ç›¸åŒï¼š éƒ½èƒ½é€šè¿‡ HTTP GET å’Œä¸€ä¸ª URL æ¥è·å–ä¿¡æ¯<br>ç›¸åŒï¼š è¯·æ±‚çš„è¿”å›å€¼éƒ½æ˜¯ JSON æ•°æ®<br>ä¸åŒï¼š åœ¨ REST ä¸­ï¼Œä½ æ‰€è®¿é—®çš„ç»ˆç«¯å°±æ˜¯æ‰€éœ€å¯¹è±¡çš„èº«ä»½ï¼Œåœ¨ GraphQL ä¸­ï¼Œå¯¹è±¡çš„èº«ä»½å’Œè·å–çš„æ–¹å¼æ˜¯ç‹¬ç«‹å­˜åœ¨çš„<br>ä¸åŒï¼š åœ¨ REST ä¸­ï¼Œèµ„æºçš„å½¢å¼å’Œå¤§å°æ˜¯ç”±æœåŠ¡å™¨æ‰€å†³å®šçš„ã€‚åœ¨ GraphQL ä¸­ï¼ŒæœåŠ¡å™¨å£°æ˜å“ªäº›èµ„æºå¯ä»¥è·å¾—ï¼Œè€Œå®¢æˆ·ç«¯ä¼šå¯¹å…¶æ‰€éœ€èµ„æºä½œå‡ºè¯·æ±‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/news/572892&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸ä¼ ç»Ÿ-REST-AP</summary>
      
    
    
    
    <category term="GraphQL" scheme="https://shinichikudo-fe.github.io/categories/GraphQL/"/>
    
    
    <category term="GraphQL" scheme="https://shinichikudo-fe.github.io/tags/GraphQL/"/>
    
  </entry>
  
  <entry>
    <title>GraphQL åŸºç¡€å®è·µ</title>
    <link href="https://shinichikudo-fe.github.io/2020/11/11/GraphQL/GraphQL%20%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5/"/>
    <id>https://shinichikudo-fe.github.io/2020/11/11/GraphQL/GraphQL%20%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5/</id>
    <published>2020-11-11T05:18:03.000Z</published>
    <updated>2020-11-11T08:07:34.956Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://juejin.im/post/6844903641996869645#heading-19">åŸæ–‡åœ°å€</a></p><p><a href="https://ppt.baomitu.com/d/4248c64a#/1">PPTè®²è§£åœ°å€</a></p><h1 id="ä»€ä¹ˆæ˜¯GraphQL"><a href="#ä»€ä¹ˆæ˜¯GraphQL" class="headerlink" title="ä»€ä¹ˆæ˜¯GraphQL"></a>ä»€ä¹ˆæ˜¯GraphQL</h1><p><code>GraphQL</code> æ˜¯ä¸€æ¬¾ç”± Facebook ä¸»å¯¼å¼€å‘çš„æ•°æ®æŸ¥è¯¢å’Œæ“ä½œè¯­è¨€ï¼Œ å†™è¿‡ SQL æŸ¥è¯¢çš„åŒå­¦å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ˜¯ SQL æŸ¥è¯¢è¯­è¨€ï¼Œä½† <code>GraphQL</code> æ˜¯ç»™å®¢æˆ·ç«¯æŸ¥è¯¢æ•°æ®ç”¨çš„ã€‚è™½ç„¶è¿™è®©ä½ å¬èµ·æ¥è§‰å¾—åƒæ˜¯ä¸€æ¬¾æ•°æ®åº“è½¯ä»¶ï¼Œä½†å®é™…ä¸Š <code>GraphQL</code> å¹¶ä¸æ˜¯æ•°æ®åº“è½¯ä»¶ã€‚<strong>ä½ å¯ä»¥å°† <code>GraphQL</code> ç†è§£æˆä¸€ä¸ªä¸­é—´ä»¶ï¼Œæ˜¯è¿æ¥å®¢æˆ·ç«¯å’Œæ•°æ®åº“ä¹‹é—´çš„ä¸€åº§æ¡¥æ¢ï¼Œå®¢æˆ·ç«¯ç»™å®ƒä¸€ä¸ªæè¿°ï¼Œç„¶åä»æ•°æ®åº“ä¸­ç»„åˆå‡ºç¬¦åˆè¿™æ®µæè¿°çš„æ•°æ®è¿”å›</strong>ã€‚è¿™ä¹Ÿæ„å‘³ç€ <code>GraphQL</code> å¹¶ä¸å…³å¿ƒæ•°æ®å­˜åœ¨ä»€ä¹ˆæ•°æ®åº“ä¸Šã€‚</p><p>åŒæ—¶ GraphQL ä¹Ÿæ˜¯ä¸€å¥—æ ‡å‡†ï¼Œåœ¨è¿™ä¸ªæ ‡å‡†ä¸‹ä¸åŒå¹³å°ä¸åŒè¯­è¨€æœ‰ç›¸åº”çš„å®ç°ã€‚GraphQL ä¸­è¿˜è®¾è®¡äº†ä¸€å¥—ç±»å‹ç³»ç»Ÿï¼Œåœ¨è¿™ä¸ªç±»å‹ç³»ç»Ÿçš„çº¦æŸä¸‹ï¼Œå¯ä»¥è·å¾—ä¸ <code>TypeScript</code> ç›¸è¿‘çš„ç›¸å¯¹å®‰å…¨çš„å¼€å‘ä½“éªŒã€‚</p><h2 id="GraphQL-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#GraphQL-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="GraphQL è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>GraphQL è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å·²ç»éå¸¸ç†Ÿæ‚‰çš„ RESTful API è®¾è®¡ã€‚ç®€å•çš„è¯´ RESTful API ä¸»è¦æ˜¯ä½¿ç”¨ URL çš„æ–¹å¼è¡¨è¾¾å’Œå®šä½èµ„æºï¼Œç”¨ HTTP åŠ¨è¯æ¥æè¿°å¯¹è¿™ä¸ªèµ„æºçš„æ“ä½œã€‚</p><p>æˆ‘ä»¬ä»¥ IMDB ç”µå½±ä¿¡æ¯è¯¦æƒ…é¡µä¸ºä¾‹å­ï¼Œçœ‹çœ‹æˆ‘ä»¬å¾—éœ€è¦ä»€ä¹ˆæ ·çš„ API æ‰èƒ½æ»¡è¶³ RESTful API è®¾è®¡çš„è¦æ±‚ã€‚å…ˆæ¥çœ‹çœ‹ä¸»é¡µé¢ä¸Šéƒ½éœ€è¦ä»€ä¹ˆä¿¡æ¯ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzuD8b0MhgbohicKNzDDHlXNjCdTl00r1vryK0nicEnnlHWN5o1ibteyjRQ/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="imdb demo"></p><p>å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šç”±<em>ç”µå½±åŸºæœ¬ä¿¡æ¯ï¼Œæ¼”å‘˜å’Œè¯„åˆ†/è¯„è®ºä¿¡æ¯ç»„æˆ</em>ï¼ŒæŒ‰ç…§è®¾è®¡è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸‰ç§èµ„æºæ”¾åœ¨ä¸åŒ API ä¹‹ä¸‹ã€‚é¦–å…ˆæ˜¯ç”µå½±åŸºæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬æœ‰ API <code>/movie/:id</code>ï¼Œç»™å®šä¸€ä¸ªç”µå½±IDè¿”å›åŸºæœ¬ä¿¡æ¯æ•°æ®ã€‚</p><p>å‡è£… GET ä¸€ä¸‹è·å¾—ä¸€ä¸ª JSON æ ¼å¼çš„æ•°æ®ï¼š</p><pre><code class="js">&#123;  name: â€œManchester by the Seaâ€,  ratings: â€œPG-13â€,  score: 8.2,  release: â€œ2016â€,  actors:[â€œhttps://api/movie/1/actor/1/â€],  reviews:[â€œhttps://api/movie/1/reviewsâ€]&#125;</code></pre><p>è¿™é‡Œé¢åŒ…å«äº†æˆ‘ä»¬æ‰€éœ€çš„ç”µå½±åã€åˆ†çº§ç­‰ä¿¡æ¯ï¼Œä»¥åŠä¸€ç§å«åš <code>HyperMedia</code> çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª URLï¼ŒæŒ‡æ˜äº†èƒ½å¤Ÿè·å–è¿™ä¸ªèµ„æºçš„ API ç«¯ç‚¹åœ°å€ã€‚å¦‚æœæˆ‘ä»¬è·Ÿç€ <code>HyperMedia</code> æŒ‡å‘çš„è¿æ¥è¯·æ±‚ä¸‹å»ï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°æˆ‘ä»¬é¡µé¢ä¸Šæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p><p><code>GET /api/movue/1/actor/1</code></p><pre><code class="js">&#123;  name: â€œBen Affleckâ€,  dob: â€œ1971-01-26â€,  desc: â€œblablablaâ€,  movies:[â€œhttps://api/movie/1â€]&#125;</code></pre><p><code>GET /api/movie/1/reviews</code></p><pre><code class="js">[  &#123;     content: â€œItsâ€™s as good asâ€¦â€,     score: 9  &#125;]</code></pre><p>æœ€åæ ¹æ®éœ€è¦ï¼Œæˆ‘ä»¬è¦å°†æ‰€æœ‰åŒ…å«éœ€è¦ä¿¡æ¯çš„ API ç«¯ç‚¹éƒ½è¯·æ±‚ä¸€éï¼Œ<strong>å¯¹äºç§»åŠ¨ç«¯æ¥è¯´ï¼Œå‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚è¿˜æ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„</strong>ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›ç½‘ç»œè¿æ¥è´¨é‡ä¸ä½³çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸‹å‘å‡ºå¤šä¸ªè¯·æ±‚åè€Œä¼šå¯¼è‡´ä¸å¥½çš„ä½“éªŒã€‚</p><p>è€Œä¸”åœ¨è¿™æ ·çš„ API è®¾è®¡ä¹‹ä¸­ï¼Œç‰¹å®šèµ„æºåˆ†å¸ƒåœ¨ç‰¹å®šçš„ API ç«¯ç‚¹ä¹‹ä¸­ï¼Œå¯¹äºåç«¯æ¥è¯´å†™èµ·æ¥æ˜¯æŒºæ–¹ä¾¿çš„ï¼Œä½†å¯¹äºWebç«¯æˆ–è€…å®¢æˆ·ç«¯æ¥è¯´å¹¶ä¸ä¸€å®šã€‚ä¾‹å¦‚åœ¨ Android æˆ– iOS å®¢æˆ·ç«¯ä¸Šï¼Œå‘ç‰ˆå‡çº§äº†ä¸€ä¸ªå¾ˆçˆ†ç‚¸çš„åŠŸèƒ½ï¼ŒåŒä¸€ä¸ªAPIä¸Šå¯èƒ½ä¸ºäº†æ”¯æŒè¿™ä¸ªåŠŸèƒ½è€Œå¤šåä¸€äº›æ•°æ®ã€‚ä½†æ˜¯å¯¹äºæœªå‡çº§çš„å®¢æˆ·ç«¯æ¥è¯´ï¼Œè¿™äº›æ–°æ•°æ®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œä¹Ÿé€ æˆäº†ä¸€å®šçš„èµ„æºæµªè´¹ã€‚å¦‚æœå•å•å°†æ‰€æœ‰èµ„æºæ•´åˆåˆ°ä¸€ä¸ª API ä¹‹ä¸­ï¼Œè¿˜æœ‰å¯èƒ½ä¼šå› ä¸ºæ•´åˆäº†æ— å…³çš„æ•°æ®è€Œå¯¼è‡´æ•°æ®é‡çš„å¢åŠ ã€‚</p><p>è€Œ <code>GraphQL</code> å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œæ¥çš„ï¼Œ<strong>å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡æè¿°ä¿¡æ¯ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ï¼Œæ•°æ®çš„æ§åˆ¶ç”šè‡³å¯ä»¥ç²¾ç»†åˆ°å­—æ®µ</strong>ï¼Œè¾¾åˆ°ä¸€æ¬¡è¯·æ±‚è·å–æ‰€æœ‰æ‰€éœ€æ•°æ®çš„ç›®çš„ã€‚</p><h2 id="GraphQL-Hello-World"><a href="#GraphQL-Hello-World" class="headerlink" title="GraphQL Hello World"></a>GraphQL Hello World</h2><h3 id="GraphQL-è¯·æ±‚ä½“"><a href="#GraphQL-è¯·æ±‚ä½“" class="headerlink" title="GraphQL è¯·æ±‚ä½“"></a>GraphQL è¯·æ±‚ä½“</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸€ä¸ª GraphQL è¯·æ±‚é•¿ä»€ä¹ˆæ ·ï¼š</p><pre><code class="js">query myQry ($name: String!) &#123;  movie(name: â€œManchesterâ€) &#123;    name    desc    ratings  &#125;&#125;</code></pre><p>é‚£ä¹ˆï¼Œä¸Šé¢çš„è¿™ä¸ªè¯·æ±‚æè¿°ç§°ä¸ºä¸€ä¸ª <code>GraphQL</code> è¯·æ±‚ä½“ï¼Œè¯·æ±‚ä½“å³ç”¨æ¥æè¿°ä½ è¦ä»æœåŠ¡å™¨ä¸Šå–ä»€ä¹ˆæ•°æ®ç”¨çš„ã€‚ä¸€èˆ¬è¯·æ±‚ä½“ç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä»é‡Œåˆ°å¤–äº†è§£ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆæ˜¯å­—æ®µï¼Œå­—æ®µè¯·æ±‚çš„æ˜¯ä¸€ä¸ªæ•°æ®å•å…ƒã€‚åŒæ—¶åœ¨ <code>GraphQL</code> ä¸­ï¼Œæ ‡é‡å­—æ®µæ˜¯ç²’åº¦æœ€ç»†çš„ä¸€ä¸ªæ•°æ®å•å…ƒäº†ï¼ŒåŒæ—¶ä½œä¸ºè¿”å› JSON å“åº”æ•°æ®ä¸­çš„æœ€åä¸€ä¸ªå­—æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª Objectï¼Œè¿˜å¿…é¡»é€‰æ‹©è‡³å°‘å…¶ä¸­çš„ä¸€ä¸ªå­—æ®µã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzViawDHFfDRibXSlV3o9tLpPTWK9OU42F887H8AIREaAbnj0DUibsQ6dSA/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å­—æ®µ"></p><p>æŠŠæˆ‘ä»¬æ‰€éœ€è¦çš„å­—æ®µåˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸ºæŸæŸçš„é€‰æ‹©é›†ã€‚ä¸Šé¢çš„ <code>nameã€descã€ratings</code> åˆåœ¨ä¸€èµ·åˆ™ç§°ä¹‹ä¸º <code>movie</code> <code>çš„é€‰æ‹©é›†ï¼ŒåŒç†ï¼Œmovie</code> æ˜¯ <code>myQry</code> çš„é€‰æ‹©é›†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ ‡é‡ä¸Šä¸èƒ½ä½¿ç”¨é€‰æ‹©é›†è¿™ç§æ“ä½œï¼Œå› ä¸ºå®ƒå·²ç»æ˜¯æœ€åä¸€å±‚äº†ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzhKXezDO26xBpnuyiaX1LP2ich5JvESXXBXJqibg5jc2ckQgjIv7luy8KQ/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="é€‰æ‹©é›†"></p><p>åœ¨ <code>movie</code> çš„æ—è¾¹ï¼Œ<code>name: &quot;Manchester&quot;</code>ï¼Œè¿™ä¸ªä»£è¡¨ç€ä¼ å…¥ <code>movie</code> çš„å‚æ•°ï¼Œå‚æ•°åä¸º <code>name</code> å€¼ä¸º<code>Manchester</code>ï¼Œåˆ©ç”¨è¿™äº›å‚æ•°å‘æœåŠ¡å™¨è¡¨è¾¾ä½ æ‰€éœ€çš„æ•°æ®éœ€è¦ç¬¦åˆä»€ä¹ˆæ¡ä»¶ã€‚</p><p>æœ€åæˆ‘ä»¬æ¥åˆ°è¯·æ±‚ä½“çš„æœ€å¤–å±‚ï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdz4daRBcWjtx0slTOtNUtkwvyZFEafEqvzyic2CvwGp8qKvJcZ5Bws7Jg/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="æœ€å¤–å±‚"></p><ul><li><p><code>æ“ä½œç±»å‹</code>ï¼šæŒ‡å®šæœ¬è¯·æ±‚ä½“è¦å¯¹æ•°æ®åšä»€ä¹ˆæ“ä½œï¼Œç±»ä¼¼ä¸ <code>REST</code> ä¸­çš„ <code>GET POST</code>ã€‚<code>GraphQL</code> ä¸­åŸºæœ¬æ“ä½œç±»å‹æœ‰ <code>query è¡¨ç¤ºæŸ¥è¯¢ï¼Œmutation è¡¨ç¤ºå¯¹æ•°æ®è¿›è¡Œæ“ä½œ</code>ï¼Œä¾‹å¦‚å¢åˆ æ”¹æ“ä½œï¼Œ<code>subscription è®¢é˜…æ“ä½œ</code>ã€‚</p></li><li><p><code>æ“ä½œåç§°</code>ï¼šæ“ä½œåç§°æ˜¯ä¸ªå¯é€‰çš„å‚æ•°ï¼Œæ“ä½œåç§°å¯¹æ•´ä¸ªè¯·æ±‚å¹¶ä¸äº§ç”Ÿå½±å“ï¼Œåªæ˜¯èµ‹äºˆè¯·æ±‚ä½“ä¸€ä¸ªåå­—ï¼Œå¯ä»¥ä½œä¸ºè°ƒè¯•çš„ä¾æ®ã€‚</p></li><li><p><code>å˜é‡å®šä¹‰</code>ï¼šåœ¨ <code>GraphQL</code> ä¸­ï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ä½¿ç”¨<code>$</code>ç¬¦å·å¼€å¤´ï¼Œå†’å·åé¢ç´§è·Ÿç€å˜é‡çš„ä¼ å…¥ç±»å‹ã€‚å¦‚æœè¦ä½¿ç”¨å˜é‡ï¼Œç›´æ¥å¼•ç”¨å³å¯ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>movie</code> å°±å¯ä»¥æ”¹å†™æˆ <code>movie(name: $name)</code>ã€‚</p></li></ul><p>å¦‚æœä¸Šè¿°ä¸‰è€…éƒ½æ²¡æœ‰æä¾›ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ä½“é»˜è®¤ä¼šè¢«è§†ä¸ºä¸€ä¸ª query æ“ä½œã€‚</p><h3 id="è¯·æ±‚çš„ç»“æœ"><a href="#è¯·æ±‚çš„ç»“æœ" class="headerlink" title="è¯·æ±‚çš„ç»“æœ"></a>è¯·æ±‚çš„ç»“æœ</h3><p>å¦‚æœæˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„è¯·æ±‚ä½“ï¼Œæˆ‘ä»¬å°†ä¼šå¾—åˆ°å¦‚ä¸‹çš„æ•°æ®ï¼š</p><pre><code class="js">&#123;  &quot;data&quot;: &#123;    &quot;movie&quot;: &#123;      &quot;name&quot;: &quot;Manchester By the Sea&quot;,      &quot;desc&quot;: &quot;A depressed uncle is asked to take care of his teenage nephew after the boy&#39;s father dies. &quot;,      &quot;ratings&quot;: &quot;R&quot;    &#125;  &#125;&#125;</code></pre><p>ä»”ç»†å¯¹æ¯”ç»“æœå’Œè¯·æ±‚ä½“çš„ç»“æ„ï¼Œä½ ä¼šå‘ç°ï¼Œä¸è¯·æ±‚ä½“çš„ç»“æ„æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¯·æ±‚ä½“çš„ç»“æ„ä¹Ÿç¡®å®šäº†æœ€ç»ˆè¿”å›æ•°æ®çš„ç»“æ„</strong>ã€‚</p><h3 id="GraphQL-Server"><a href="#GraphQL-Server" class="headerlink" title="GraphQL Server"></a>GraphQL Server</h3><p>åœ¨å‰é¢çš„ <code>REST</code> ä¸¾ä¾‹ä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚å¤šä¸ªèµ„æºæœ‰å¤šä¸ª API ç«¯ç‚¹ã€‚åœ¨ GraphQL ä¸­ï¼Œåªæœ‰ä¸€ä¸ª API ç«¯ç‚¹ï¼ŒåŒæ ·ä¹Ÿæ¥å— <code>GET</code> å’Œ <code>POST</code> åŠ¨è¯ï¼Œå¦‚è¦æ“ä½œ <code>mutation</code> åˆ™ä½¿ç”¨ <code>POST</code> è¯·æ±‚ã€‚</p><p>å‰é¢è¿˜æåˆ° <code>GraphQL</code> æ˜¯ä¸€å¥—æ ‡å‡†ï¼Œæ€ä¹ˆç”¨å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€äº›åº“å»è§£æã€‚ä¾‹å¦‚ Facebook å®˜æ–¹çš„ <code>GraphQL.js</code>ã€‚ä»¥åŠ Meteor å›¢é˜Ÿå¼€å‘çš„ <code>Apollo</code>ï¼ŒåŒæ—¶å¼€å‘äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæµè¡Œçš„ Vue å’Œ React æ¡†æ¶ã€‚è°ƒè¯•æ–¹é¢ï¼Œå¯ä»¥ä½¿ç”¨ <code>Graphiql</code> è¿›è¡Œè°ƒè¯•ï¼Œå¾—ç›Šäº <code>GraphQL</code> çš„ç±»å‹ç³»ç»Ÿå’Œ <code>Schema</code>ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <code>Graphiql</code> è°ƒè¯•ä¸­ä½¿ç”¨è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ã€‚</p><h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><p>å‰é¢æˆ‘ä»¬æåˆ°ï¼Œ<code>GraphQL</code> æ‹¥æœ‰ä¸€ä¸ªç±»å‹ç³»ç»Ÿï¼Œé‚£ä¹ˆæ¯ä¸ªå­—æ®µçš„ç±»å‹æ˜¯æ€ä¹ˆçº¦å®šçš„å‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨æœ¬å°èŠ‚ä¸­ã€‚åœ¨ <code>GraphQL</code> ä¸­ï¼Œ<strong>ç±»å‹çš„å®šä¹‰ä»¥åŠæŸ¥è¯¢æœ¬èº«éƒ½æ˜¯é€šè¿‡ <code>Schema</code> å»å®šä¹‰çš„</strong>ã€‚<code>GraphQL</code> çš„ <code>Schema</code> è¯­è¨€å…¨ç§°å« <code>Schema Definition Language</code>ã€‚<code>Schema</code> æœ¬èº«å¹¶ä¸ä»£è¡¨ä½ æ•°æ®åº“ä¸­çœŸå®çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„å®šä¹‰å†³å®šäº†<strong>è¿™æ•´ä¸ªç«¯ç‚¹èƒ½å¹²äº›ä»€ä¹ˆäº‹æƒ…ï¼Œç¡®å®šäº†æˆ‘ä»¬èƒ½å‘ç«¯ç‚¹è¦ä»€ä¹ˆï¼Œæ“ä½œä»€ä¹ˆ</strong>ã€‚å†æ¬¡å›é¡¾ä¸€ä¸‹å‰é¢çš„è¯·æ±‚ä½“ï¼Œè¯·æ±‚ä½“å†³å®šäº†è¿”å›æ•°æ®çš„ç»“æ„ï¼Œè€Œ <code>Schema</code> çš„å®šä¹‰å†³å®šäº†ç«¯ç‚¹çš„èƒ½åŠ›ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªä¸€ä¸ªçš„ä¾‹å­äº†è§£ä¸€ä¸‹ <code>Schema</code>ã€‚</p><h3 id="ç±»å‹ç³»ç»Ÿã€æ ‡é‡ç±»å‹ã€éç©ºç±»å‹ã€å‚æ•°"><a href="#ç±»å‹ç³»ç»Ÿã€æ ‡é‡ç±»å‹ã€éç©ºç±»å‹ã€å‚æ•°" class="headerlink" title="ç±»å‹ç³»ç»Ÿã€æ ‡é‡ç±»å‹ã€éç©ºç±»å‹ã€å‚æ•°"></a>ç±»å‹ç³»ç»Ÿã€æ ‡é‡ç±»å‹ã€éç©ºç±»å‹ã€å‚æ•°</h3><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzibIm98cIybzWGqaEHhRI4mCY0icrkn9DnwnK2MKruYib1LCWnib0jjJD1A/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="schema"></p><p>å…ˆçœ‹å³è¾¹çš„ <code>Schema</code>ï¼š<code>type</code> æ˜¯ GraphQL <code>Schema</code> ä¸­æœ€åŸºæœ¬çš„ä¸€ä¸ªæ¦‚å¿µï¼Œè¡¨ç¤ºä¸€ä¸ª GraphQL å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ç®€å•åœ°å°†å…¶ç†è§£ä¸º JavaScript ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ JavaScript ä¸­ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒ…å«å„ç§ keyï¼Œåœ¨ GraphQL ä¸­ï¼Œ<code>type</code> é‡Œé¢åŒæ ·å¯ä»¥åŒ…å«å„ç§å­—æ®µï¼ˆfieldï¼‰,è€Œä¸”å­—æ®µç±»å‹ä¸ä»…ä»…å¯ä»¥æ˜¯æ ‡é‡ç±»å‹ï¼Œè¿˜å¯ä»¥æ˜¯ <code>Schema</code> ä¸­å®šä¹‰çš„å…¶ä»– <code>type</code>ã€‚ä¾‹å¦‚ä¸Šé¢çš„ <code>Schema</code> ä¸­ï¼Œ Query ä¸‹çš„ movie å­—æ®µçš„ç±»å‹å°±å¯ä»¥æ˜¯ Movieã€‚</p><p>åœ¨ GraphQL ä¸­ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æ ‡é‡ç±»å‹ï¼š<code>Int, Float, String, Boolean, ID</code> ï¼Œåˆ†åˆ«è¡¨ç¤º<code>æ•´å‹ã€æµ®ç‚¹å‹ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ä»¥åŠä¸€ä¸ªIDç±»å‹</code>ã€‚IDç±»å‹<strong>ä»£è¡¨ç€ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ ‡è¯†ï¼ŒID ç±»å‹æœ€ç»ˆä¼šè¢«è½¬åŒ–æˆStringç±»å‹ï¼Œä½†å®ƒå¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„</strong>ï¼Œä¾‹å¦‚ mongodb ä¸­çš„ _id å­—æ®µå°±å¯ä»¥è®¾ç½®ä¸ºIDç±»å‹ã€‚åŒæ—¶è¿™äº›æ ‡é‡ç±»å‹å¯ä»¥ç†è§£ä¸º JavaScript ä¸­çš„åŸå§‹ç±»å‹ï¼Œä¸Šé¢çš„æ ‡é‡ç±»å‹åŒæ ·å¯ä»¥å¯¹åº” JavaScript ä¸­çš„ <code>Number, Number, String, Boolean, Symbol</code> ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„ç±»å‹å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ° <code>GraphQL</code> ä¸­çš„ç±»å‹ç³»ç»Ÿèµ·åˆ°äº†å¾ˆé‡è¦çš„è§’è‰²ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒSchema å®šä¹‰äº† name ä¸º Stringç±»å‹ï¼Œé‚£ä¹ˆä½ å°±ä¸èƒ½ä¼  Intç±»å‹è¿›å»ï¼Œæ­¤æ—¶ä¼šæŠ›å‡ºç±»å‹ä¸ç¬¦çš„é”™è¯¯ã€‚åŒæ ·çš„ï¼Œå¦‚æœä¼ å‡ºçš„ <code>ratings</code> æ•°æ®ç±»å‹ä¸ä¸º <code>String</code>ï¼Œä¹ŸåŒæ ·ä¼šæŠ›å‡ºç±»å‹ä¸ç¬¦çš„é”™è¯¯ã€‚</p><h3 id="åˆ—è¡¨ï¼ˆListï¼‰ã€æšä¸¾ç±»å‹ï¼ˆEnumï¼‰"><a href="#åˆ—è¡¨ï¼ˆListï¼‰ã€æšä¸¾ç±»å‹ï¼ˆEnumï¼‰" class="headerlink" title="åˆ—è¡¨ï¼ˆListï¼‰ã€æšä¸¾ç±»å‹ï¼ˆEnumï¼‰"></a>åˆ—è¡¨ï¼ˆListï¼‰ã€æšä¸¾ç±»å‹ï¼ˆEnumï¼‰</h3><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzVM5h5I7ibtMbRh9HMGqVAeLfqHUSbArCBYaHUWdET4QfeONw0kO0aeg/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><p>å¦‚æœæˆ‘ä»¬çš„æŸä¸ªå­—æ®µè¿”å›ä¸æ­¢ä¸€ä¸ªæ ‡é‡ç±»å‹çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸€ç»„ï¼Œåˆ™éœ€è¦ä½¿ç”¨Listç±»å‹å£°æ˜ï¼Œåœ¨è¯¥æ ‡é‡ç±»å‹ä¸¤è¾¹ä½¿ç”¨ä¸­æ‹¬å·<code>[]</code>åŒ…å›´å³å¯ï¼Œä¸ JavaScript ä¸­æ•°ç»„çš„å†™æ³•ç›¸åŒï¼Œè€Œä¸”è¿”å›çš„æ•°æ®ä¹Ÿå°†ä¼šæ˜¯æ•°ç»„ç±»å‹ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯<code>[Movie]!</code>ä¸ <code>[Movie!]</code>ä¸¤ç§å†™æ³•çš„å«ä¹‰æ˜¯ä¸åŒçš„ï¼š<strong>å‰è€…è¡¨ç¤º <code>movies</code>å­—æ®µå§‹ç»ˆè¿”å›ä¸å¯ä¸ºç©ºä½†Movieå…ƒç´ å¯ä»¥ä¸ºç©º</strong>ã€‚<strong>åè€…è¡¨ç¤º<code>movies</code>ä¸­è¿”å›çš„ Movie å…ƒç´ ä¸èƒ½ä¸ºç©ºï¼Œä½† <code>movies</code>å­—æ®µçš„è¿”å›æ˜¯å¯ä»¥ä¸ºç©ºçš„</strong>ã€‚</p><p>ä½ å¯èƒ½åœ¨è¯·æ±‚ä½“ä¸­æ³¨æ„åˆ°ï¼Œ<code>genre</code> å‚æ•°çš„å€¼æ²¡æœ‰è¢«åŒå¼•å·æ‹¬èµ·æ¥ï¼Œä¹Ÿä¸æ˜¯ä»»ä½•å†…ç½®ç±»å‹ã€‚çœ‹åˆ° <code>Schema</code> å®šä¹‰ï¼ŒCOMEDYæ˜¯æšä¸¾ç±»å‹MovieTypesä¸­çš„æšä¸¾æˆå‘˜ã€‚æšä¸¾ç±»å‹ç”¨äºå£°æ˜ä¸€ç»„å–å€¼å¸¸é‡åˆ—è¡¨ï¼Œå¦‚æœå£°æ˜äº†æŸä¸ªå‚æ•°ä¸ºæŸä¸ªæšä¸¾ç±»å‹ï¼Œé‚£ä¹ˆè¯¥å‚æ•°åªèƒ½ä¼ å…¥è¯¥æšä¸¾ç±»å‹å†…é™å®šçš„å¸¸é‡åã€‚</p><h3 id="ä¼ å…¥å¤æ‚ç»“æ„çš„å‚æ•°ï¼ˆInputï¼‰"><a href="#ä¼ å…¥å¤æ‚ç»“æ„çš„å‚æ•°ï¼ˆInputï¼‰" class="headerlink" title="ä¼ å…¥å¤æ‚ç»“æ„çš„å‚æ•°ï¼ˆInputï¼‰"></a>ä¼ å…¥å¤æ‚ç»“æ„çš„å‚æ•°ï¼ˆInputï¼‰</h3><p>å‰é¢çš„ä¾‹å­ä¸­ï¼Œä¼ å…¥çš„å‚æ•°å‡ä¸ºæ ‡é‡ç±»å‹ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä¼ å…¥ä¸€ä¸ªæ‹¥æœ‰å¤æ‚ç»“æ„çš„æ•°æ®è¯¥æ€ä¹ˆå®šä¹‰å‘¢ã€‚ç­”æ¡ˆæ˜¯ä½¿ç”¨<strong>å…³é”®å­—input</strong>ã€‚å…¶ä½¿ç”¨æ–¹æ³•å’Œtypeå®Œå…¨ä¸€è‡´ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdz7tz9DrrcqantibfXNo5Z2NZ3ymRE51y16Teeawibf5kjuE81HiaqLDibeQ/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="input"></p><p>æ ¹æ®æœ¬ä¾‹ä¸­çš„ <code>Schema</code> å®šä¹‰ï¼Œæˆ‘ä»¬åœ¨æŸ¥è¯¢ searchæ—¶dataçš„å‚æ•°å¿…é¡»ä¸º</p><pre><code class="js">&#123; term: &quot;Deepwater Horizon&quot; &#125;</code></pre><h3 id="åˆ«åï¼ˆAliasï¼‰"><a href="#åˆ«åï¼ˆAliasï¼‰" class="headerlink" title="åˆ«åï¼ˆAliasï¼‰"></a>åˆ«åï¼ˆAliasï¼‰</h3><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdz87vwwe8S2CXvu20MPo6UzrDhY1gW3A87xRbicPW7f5DDibLvecSAyK1A/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="alias"></p><p>æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªé¡µé¢ï¼Œæˆ‘è¦åˆ—å‡ºä¸¤ä¸ªç”µå½±çš„ä¿¡æ¯åšå¯¹æ¯”ï¼Œä¸ºäº†å‘æŒ¥ <code>GraphQL</code> çš„ä¼˜åŠ¿ï¼Œæˆ‘è¦åŒæ—¶æŸ¥è¯¢è¿™ä¸¤éƒ¨ç”µå½±çš„ä¿¡æ¯ï¼Œåœ¨è¯·æ±‚ä½“ä¸­è¯·æ±‚ <code>movie</code> æ•°æ®ã€‚å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œè¯·æ±‚ä½“å†³å®šäº†è¿”å›æ•°æ®çš„ç»“æ„ã€‚åœ¨æ•°æ®è¿”å›å‰æŸ¥å‡ºä¸¤ä¸ª key ä¸º <code>movie</code> çš„æ•°æ®ï¼Œåˆå¹¶ä¹‹åç”±äº key é‡å¤è€Œåªèƒ½æ‹¿åˆ°ä¸€æ¡æ•°æ®ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ«ååŠŸèƒ½ã€‚</p><p>åˆ«åå³ä¸ºè¿”å›å­—æ®µä½¿ç”¨å¦ä¸€ä¸ªåå­—ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨è¯·æ±‚ä½“çš„å­—æ®µå‰é¢ä½¿ç”¨åˆ«å<code>:</code>çš„å½¢å¼å³å¯ï¼Œè¿”å›çš„æ•°æ®å°†ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºè¯¥åç§°ã€‚</p><h3 id="ç‰‡æ®µï¼ˆFragmentï¼‰ã€ç‰‡æ®µè§£æ„ï¼ˆFragment-Spreadï¼‰"><a href="#ç‰‡æ®µï¼ˆFragmentï¼‰ã€ç‰‡æ®µè§£æ„ï¼ˆFragment-Spreadï¼‰" class="headerlink" title="ç‰‡æ®µï¼ˆFragmentï¼‰ã€ç‰‡æ®µè§£æ„ï¼ˆFragment Spreadï¼‰"></a>ç‰‡æ®µï¼ˆFragmentï¼‰ã€ç‰‡æ®µè§£æ„ï¼ˆFragment Spreadï¼‰</h3><p><img src="https://mmbiz.qpic.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdz4duFiaoiaB7n6rSXibEqibDwFAaKibGUc2VUm4JkYVCSmqDibdNia4KaZweWA/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ç‰‡æ®µ"></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯”ä¸¤éƒ¨ç”µå½±çš„æ•°æ®ã€‚å¦‚æœæ¢ä½œæ˜¯ç¡¬ä»¶å¯¹æ¯”ç½‘ç«™ï¼Œéœ€è¦æŸ¥è¯¢çš„ç¡¬ä»¶æ•°é‡å¾€å¾€ä¸æ­¢ä¸¤ä¸ªã€‚æ­¤æ—¶ç¼–å†™å†—ä½™çš„é€‰æ‹©é›†æ˜¾å¾—éå¸¸çš„è´¹åŠ²ã€è‡ƒè‚¿ä»¥åŠéš¾ç»´æŠ¤ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰‡æ®µåŠŸèƒ½ã€‚**<code>GraphQL</code> å…è®¸å®šä¹‰ä¸€æ®µå…¬ç”¨çš„é€‰æ‹©é›†ï¼Œå«ç‰‡æ®µ**ã€‚å®šä¹‰ç‰‡æ®µä½¿ç”¨ <code>fragment name on Type</code> çš„è¯­æ³•ï¼Œå…¶ä¸­ nameä¸ºè‡ªå®šä¹‰çš„ç‰‡æ®µåç§°ï¼ŒTypeä¸ºç‰‡æ®µæ¥è‡ªçš„ç±»å‹ã€‚</p><p>æœ¬ä¾‹ä¸­çš„è¯·æ±‚ä½“çš„é€‰æ‹©é›†å…¬å…±éƒ¨åˆ†æå–æˆç‰‡æ®µä¹‹åä¸º</p><pre><code class="js">fragment movieInfo on Movie &#123;   name   desc&#125;</code></pre><p>åœ¨æ­£å¼ä½¿ç”¨ç‰‡æ®µä¹‹å‰ï¼Œè¿˜éœ€è¦å‘å„ä½ä»‹ç»<code>ç‰‡æ®µè§£æ„åŠŸèƒ½</code>ã€‚ç±»ä¼¼äº JavaScript çš„ç»“æ„ã€‚<strong>GraphQL çš„ç‰‡æ®µç»“æ„ç¬¦å·å°†ç‰‡æ®µå†…çš„å­—æ®µâ€œç»“æ„â€åˆ°é€‰æ‹©é›†ä¸­</strong>ã€‚</p><p><img src="https://mmbiz.qlogo.cn/mmbiz/MpGQUHiaib4ib5EjuicgHA4YxH7DOsVHGbdzvOpicOCfiajJPfWgs5LFr4Ujym34VqhZwicMITEOIGiamdNicr1DvbQhNcg/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1&retryload=2" alt="ç‰‡æ®µè§£æ„"></p><h3 id="æ¥å£ï¼ˆInterfaceï¼‰"><a href="#æ¥å£ï¼ˆInterfaceï¼‰" class="headerlink" title="æ¥å£ï¼ˆInterfaceï¼‰"></a>æ¥å£ï¼ˆInterfaceï¼‰</h3><p>ä¸å…¶ä»–å¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼Œ<code>GraphQL</code> ä¹Ÿæä¾›äº†å®šä¹‰æ¥å£çš„åŠŸèƒ½ã€‚æ¥å£æŒ‡çš„æ˜¯ <code>GraphQL</code> å®ä½“ç±»å‹æœ¬èº«æä¾›å­—æ®µçš„é›†åˆï¼Œå®šä¹‰ä¸€ç»„ä¸å¤–éƒ¨æ²Ÿé€šçš„æ–¹å¼ã€‚ä½¿ç”¨äº† <code>implements</code>çš„ç±»å‹å¿…é¡»åŒ…å«æ¥å£ä¸­å®šä¹‰çš„å­—æ®µã€‚</p><pre><code class="js">interface Basic &#123;    name: String!    year: Number!&#125;type Song implements Basic &#123;    name: String!    year: Number!    artist: [String]!&#125;type Video implements Basic &#123;    name: String!    year: Number!    performers: [String]!&#125;Query &#123;    search(term: String!): [Basic]!&#125;</code></pre><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>Basic</code>æ¥å£ï¼Œ<code>Song</code>ä»¥åŠ<code>Video</code>ç±»å‹éƒ½è¦å®ç°è¯¥æ¥å£çš„å­—æ®µã€‚ç„¶ååœ¨searchæŸ¥è¯¢ä¸­è¿”å›è¯¥æ¥å£ã€‚</p><p><code>searchMedia</code>æŸ¥è¯¢è¿”å›ä¸€ç»„<code>Basic</code>æ¥å£ã€‚ç”±äºè¯¥æ¥å£ä¸­çš„å­—æ®µæ˜¯æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»å‹æ‰€å…±æœ‰çš„ï¼Œåœ¨è¯·æ±‚ä½“ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è€Œå¯¹äºç‰¹å®šç±»å‹ä¸Šçš„å…¶ä»–éå…±æœ‰å­—æ®µï¼Œä¾‹å¦‚<code>Video</code>ä¸­çš„performersï¼Œç›´æ¥é€‰å–æ˜¯ä¼šæœ‰é—®é¢˜çš„ï¼Œå› ä¸º<code>searchMedia</code>åœ¨è¿”å›çš„æ•°æ®ä¸­ç±»å‹å¯èƒ½æ˜¯æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»å‹ï¼Œè€Œåœ¨ <code>Song</code>ç±»å‹ä¸­å°±æ²¡æœ‰performerså­—æ®µã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©å†…è”ç‰‡æ®µçš„å¸®åŠ©ï¼ˆä¸‹é¢ä»‹ç»ï¼‰</p><h3 id="è”åˆç±»å‹ï¼ˆUnionï¼‰"><a href="#è”åˆç±»å‹ï¼ˆUnionï¼‰" class="headerlink" title="è”åˆç±»å‹ï¼ˆUnionï¼‰"></a>è”åˆç±»å‹ï¼ˆUnionï¼‰</h3><p>è”åˆç±»å‹ä¸æ¥å£æ¦‚å¿µå·®ä¸å¤šç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äºè”åˆç±»å‹ä¸‹çš„ç±»å‹ä¹‹é—´æ²¡æœ‰å®šä¹‰å…¬å…±çš„å­—æ®µã€‚åœ¨ <code>Union</code> ç±»å‹ä¸­å¿…é¡»ä½¿ç”¨å†…è”ç‰‡æ®µçš„æ–¹å¼æŸ¥è¯¢ï¼ŒåŸå› ä¸ä¸Šé¢çš„æ¥å£ç±»å‹ä¸€è‡´ã€‚</p><pre><code class="js">union SearchResult = Song | VideoQuery &#123;  search(term: String!): [SearchResult]!&#125;</code></pre><h3 id="å†…è”ç‰‡æ®µï¼ˆInline-Fragmentï¼‰"><a href="#å†…è”ç‰‡æ®µï¼ˆInline-Fragmentï¼‰" class="headerlink" title="å†…è”ç‰‡æ®µï¼ˆInline Fragmentï¼‰"></a>å†…è”ç‰‡æ®µï¼ˆInline Fragmentï¼‰</h3><p>å¯¹æ¥å£æˆ–è”åˆç±»å‹è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œç”±äºè¿”å›ç±»å‹çš„ä¸åŒå¯¼è‡´é€‰å–çš„å­—æ®µå¯èƒ½ä¸åŒï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡å†…è”ç‰‡æ®µçš„æ–¹å¼å†³å®šåœ¨ç‰¹å®šç±»å‹ä¸‹ä½¿ç”¨ç‰¹å®šçš„é€‰æ‹©é›†ã€‚å†…è”é€‰æ‹©é›†çš„æ¦‚å¿µå’Œç”¨æ³•ä¸æ™®é€šç‰‡æ®µåŸºæœ¬ç›¸åŒï¼Œä¸åŒçš„æ˜¯<strong>å†…è”ç‰‡æ®µç›´æ¥å£°æ˜åœ¨é€‰æ‹©é›†å†…ï¼Œå¹¶ä¸”ä¸éœ€è¦fragmentå£°æ˜</strong>ã€‚</p><p>æŸ¥è¯¢æ¥å£çš„ä¾‹å­ï¼š</p><pre><code class="js">query &#123;  searchMedia(term: &quot;AJR&quot;) &#123;    name    year    ...on Song &#123;        artist    &#125;    ...on Video &#123;        performers    &#125;  &#125;&#125;</code></pre><p>é¦–é€‰æˆ‘ä»¬éœ€è¦è¯¥æ¥å£ä¸Šçš„ä¸¤ä¸ªå…¬å…±å­—æ®µï¼Œå¹¶ä¸”ç»“æœä¸ºSongç±»å‹æ—¶é€‰å–artistå­—æ®µï¼Œç»“æœä¸ºVideoç±»å‹æ—¶é€‰å–performerså­—æ®µ</p><h3 id="GraphQL-å†…ç½®æŒ‡ä»¤"><a href="#GraphQL-å†…ç½®æŒ‡ä»¤" class="headerlink" title="GraphQL å†…ç½®æŒ‡ä»¤"></a>GraphQL å†…ç½®æŒ‡ä»¤</h3><p>GraphQL ä¸­å†…ç½®äº†ä¸¤æ¬¾é€»è¾‘æŒ‡ä»¤ï¼ŒæŒ‡ä»¤è·Ÿåœ¨å­—æ®µååä½¿ç”¨ã€‚</p><h4 id="include"><a href="#include" class="headerlink" title="@include"></a>@include</h4><p>å½“æ¡ä»¶æˆç«‹æ—¶ï¼ŒæŸ¥è¯¢æ­¤å­—æ®µ</p><pre><code class="js">query &#123;    search &#123;        actors @include(if: $queryActor) &#123;            name        &#125;    &#125;&#125;</code></pre><h4 id="skip"><a href="#skip" class="headerlink" title="@skip"></a>@skip</h4><p>å½“æ¡ä»¶æˆç«‹æ—¶ï¼Œä¸æŸ¥è¯¢æ­¤å­—æ®µ</p><pre><code class="js">query &#123;  search &#123;    comments @skip(if: $noComments) &#123;      from    &#125;  &#125;&#125;</code></pre><h2 id="Resolvers"><a href="#Resolvers" class="headerlink" title="Resolvers"></a>Resolvers</h2><p>å‰é¢æˆ‘ä»¬å·²ç»äº†è§£äº†è¯·æ±‚ä½“ä»¥åŠ Schemaï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ•°æ®åˆ°åº•æ€ä¹ˆæ¥å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ¥è‡ª <code>Resolver</code> å‡½æ•°ã€‚</p><p><code>Resolver</code> çš„æ¦‚å¿µéå¸¸ç®€å•ã€‚<code>Resolver</code> å¯¹åº”ç€ Schema ä¸Šçš„å­—æ®µï¼Œå½“è¯·æ±‚ä½“æŸ¥è¯¢æŸä¸ªå­—æ®µæ—¶ï¼Œå¯¹åº”çš„ <code>Resolver</code> å‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œç”± <code>Resolver</code> å‡½æ•°è´Ÿè´£åˆ°æ•°æ®åº“ä¸­å–å¾—æ•°æ®å¹¶è¿”å›ï¼Œæœ€ç»ˆå°†è¯·æ±‚ä½“ä¸­æŒ‡å®šçš„å­—æ®µè¿”å›ã€‚</p><pre><code class="js">type Movie &#123;    name    genre&#125;type Query &#123;    movie: Movie!&#125;</code></pre><p>å½“è¯·æ±‚ä½“æŸ¥è¯¢movieæ—¶ï¼ŒåŒåçš„ <code>Resolver</code> å¿…é¡»è¿”å›Movieç±»å‹çš„æ•°æ®ã€‚å½“ç„¶ä½ è¿˜å¯ä»¥å•ç‹¬ä¸ºnameå­—æ®µä½¿ç”¨ç‹¬ç«‹çš„ <code>Resolver</code> è¿›è¡Œè§£æã€‚åé¢çš„ä»£ç ä¾‹å­ä¸­å°†ä¼šæ¸…æ¥šåœ°äº†è§£ <code>Resolver</code></p><h2 id="GraphQL-çš„ä¼˜ç¼ºç‚¹"><a href="#GraphQL-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="GraphQL çš„ä¼˜ç¼ºç‚¹"></a>GraphQL çš„ä¼˜ç¼ºç‚¹</h2><blockquote><p>ä¼˜ç‚¹</p></blockquote><ul><li>æ‰€è§å³æ‰€å¾—ï¼šæ‰€å†™è¯·æ±‚ä½“å³ä¸ºæœ€ç»ˆæ•°æ®ç»“æ„</li><li>å‡å°‘ç½‘ç»œè¯·æ±‚ï¼šå¤æ‚æ•°æ®çš„è·å–ä¹Ÿå¯ä»¥ä¸€æ¬¡è¯·æ±‚å®Œæˆ</li><li>Schema å³æ–‡æ¡£ï¼šå®šä¹‰çš„ Schema ä¹Ÿè§„å®šäº†è¯·æ±‚çš„è§„åˆ™</li><li>ç±»å‹æ£€æŸ¥ï¼šä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥èƒ½å¤Ÿæ¶ˆé™¤ä¸€å®šçš„è®¤ä¸ºå¤±è¯¯</li></ul><blockquote><p>ç¼ºç‚¹</p></blockquote><ul><li>å¢åŠ äº†æœåŠ¡ç«¯å®ç°çš„å¤æ‚åº¦ï¼šä¸€äº›ä¸šåŠ¡å¯èƒ½æ— æ³•è¿ç§»ä½¿ç”¨ GraphQLï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨<code>ä¸­é—´ä»¶çš„æ–¹å¼</code>å°†åŸä¸šåŠ¡çš„è¯·æ±‚è¿›è¡Œä»£ç†ï¼Œè¿™æ— ç–‘ä¹Ÿå°†å¢åŠ å¤æ‚åº¦å’Œèµ„æºçš„æ¶ˆè€—</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.im/post/6844903641996869645#heading-19&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;h</summary>
      
    
    
    
    <category term="GraphQL " scheme="https://shinichikudo-fe.github.io/categories/GraphQL/"/>
    
    
    <category term="GraphQL " scheme="https://shinichikudo-fe.github.io/tags/GraphQL/"/>
    
  </entry>
  
  <entry>
    <title>TypescriptåŸºç¡€åŠé—®é¢˜æ±‡æ€»</title>
    <link href="https://shinichikudo-fe.github.io/2020/11/02/Ts/Typescript%E5%9F%BA%E7%A1%80%E5%8F%8A%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>https://shinichikudo-fe.github.io/2020/11/02/Ts/Typescript%E5%9F%BA%E7%A1%80%E5%8F%8A%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</id>
    <published>2020-11-02T02:18:00.000Z</published>
    <updated>2020-11-02T11:33:24.069Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ"></a>æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ</h2><p>å¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦æ·»åŠ â€“outFile[OutputJSFileName]ç¼–è¯‘é€‰é¡¹</p><pre><code class="js">$tsc --outFile common.js file1.ts file2.js file3.js</code></pre><p>ä¸Šè¿°å‘½ä»¤å°†ä¸‰ä¸ªæ–‡ä»¶åˆå¹¶åˆ°common.jsæ–‡ä»¶ä¸­</p><h2 id="tsçš„åŸºç¡€ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿä¸jsæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#tsçš„åŸºç¡€ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿä¸jsæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="tsçš„åŸºç¡€ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿä¸jsæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>tsçš„åŸºç¡€ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿä¸jsæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h2><p>tså¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå¯ä»¥åˆ†ä¸º3ç§ï¼š</p><ul><li>1.jsæœ‰çš„ç±»å‹</li></ul><p>blooeanç±»å‹ï¼Œnumberç±»å‹ï¼Œstringç±»å‹ï¼Œnullç±»å‹ï¼Œundefined,æ•°ç»„ç±»å‹</p><ul><li>2.tsç‰¹æœ‰çš„ç±»å‹</li></ul><p>tupleç±»å‹ï¼ˆå…ƒç»„ç±»å‹ï¼‰ï¼Œemnuç±»å‹ï¼ˆæšä¸¾ç±»å‹ï¼‰ï¼Œanyç±»å‹ï¼ˆä»»æ„ç±»å‹ï¼‰</p><ul><li>3.ç‰¹åˆ«çš„ç±»å‹</li></ul><p>voidç±»å‹ï¼ˆæ²¡æœ‰ä»»ä½•ç±»å‹ï¼‰è¡¨ç¤ºå®šä¹‰æ–¹æ³•æ²¡æœ‰è¿”å›å€¼</p><p>neverç±»å‹ï¼šæ˜¯undefind,nullçš„å­ç±»å‹ï¼Œè¡¨ç¤ºä»ä¸ä¼šå‡ºç°çš„å€¼ï¼Œè¿™æ„å‘³ç€å£°æ˜neverå˜é‡åªèƒ½è¢«neverç±»å‹æ‰€èµ‹å€¼</p><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>1.å®šä¹‰æ•°ç»„çš„æ–¹å¼</p><pre><code class="ts">let arr1:number[] = [1,2,3,4,5]let arr2:Array[number] = [1,2,3,4,5]let arr3:[number,string] = [1,2,3,4,5]</code></pre><p>2.å®šä¹‰emnuæšä¸¾ç±»å‹æ–¹æ³•</p><pre><code class="ts">emnu flag&#123;success=1,error=2&#125;let s:flag = flag.successconsole.log(s)</code></pre><p>3.å®šä¹‰anyä»»æ„ç±»å‹æ–¹æ³•</p><pre><code class="ts">let num1:any:truenum1 = true</code></pre><p>4.undefinedç±»å‹</p><pre><code class="ts">let num2 =  number | undefinedconsole.log(num2)</code></pre><p>5.voldç±»å‹ï¼Œå‡½æ•°æ²¡æœ‰è¿”å›å€¼</p><pre><code class="ts">function run():void &#123;  console.log(&#39;run&#39;)&#125;</code></pre><p>6.neverç±»å‹å®šä¹‰æ–¹æ³•</p><pre><code class="ts">let c:never;c = (()=&gt;&#123;  throw new Error(&#39;error&#39;)&#125;)</code></pre><h2 id="tsä¸ºä»€ä¹ˆä¼šæµè¡Œï¼Ÿä¸ECMAæ–°è§„èŒƒçš„å…³ç³»ï¼Ÿ"><a href="#tsä¸ºä»€ä¹ˆä¼šæµè¡Œï¼Ÿä¸ECMAæ–°è§„èŒƒçš„å…³ç³»ï¼Ÿ" class="headerlink" title="tsä¸ºä»€ä¹ˆä¼šæµè¡Œï¼Ÿä¸ECMAæ–°è§„èŒƒçš„å…³ç³»ï¼Ÿ"></a>tsä¸ºä»€ä¹ˆä¼šæµè¡Œï¼Ÿä¸ECMAæ–°è§„èŒƒçš„å…³ç³»ï¼Ÿ</h2><ul><li>TypeScriptå¿«é€Ÿã€ç®€å•ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå®¹æ˜“å­¦ä¹ ã€‚</li><li>TypeScriptæ”¯æŒé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ç‰¹æ€§ï¼Œæ¯”å¦‚ç±»ã€æ¥å£ã€ç»§æ‰¿ã€æ³›å‹ç­‰ç­‰ã€‚</li><li>TypeScriptåœ¨ç¼–è¯‘æ—¶æä¾›äº†é”™è¯¯æ£€æŸ¥åŠŸèƒ½ã€‚å®ƒå°†ç¼–è¯‘ä»£ç ï¼Œå¦‚æœå‘ç°ä»»ä½•é”™è¯¯ï¼Œå®ƒå°†åœ¨è¿è¡Œè„šæœ¬ä¹‹å‰çªå‡ºæ˜¾ç¤ºè¿™äº›é”™è¯¯ã€‚</li><li>TypeScriptæ”¯æŒæ‰€æœ‰JavaScriptåº“ï¼Œå› ä¸ºå®ƒæ˜¯JavaScriptçš„è¶…é›†ã€‚</li><li>TypeScripté€šè¿‡ä½¿ç”¨ç»§æ‰¿æ¥æ”¯æŒå¯é‡ç”¨æ€§ã€‚</li><li>TypeScriptä½¿åº”ç”¨ç¨‹åºå¼€å‘å°½å¯èƒ½çš„å¿«é€Ÿå’Œç®€å•ï¼Œå¹¶ä¸”TypeScriptçš„å·¥å…·æ”¯æŒä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨å®Œæˆã€ç±»å‹æ£€æŸ¥å’Œæºæ–‡æ¡£ã€‚</li><li>TypeScriptæ”¯æŒæœ€æ–°çš„JavaScriptç‰¹æ€§ï¼ŒåŒ…æ‹¬ECMAScript 2015ã€‚</li><li>TypeScriptæä¾›äº†ES6çš„æ‰€æœ‰ä¼˜ç‚¹å’Œæ›´é«˜çš„ç”Ÿäº§åŠ›ã€‚</li><li>TypeScriptæ”¯æŒé™æ€ç±»å‹ã€å¼ºç±»å‹ã€æ¨¡å—ã€å¯é€‰å‚æ•°ç­‰ã€‚</li></ul><h2 id="tslintéƒ½èƒ½é…ç½®å“ªäº›åŠŸèƒ½ï¼Ÿå¯¹å¼€å‘æµç¨‹æœ‰ä½•å½±å“ï¼Ÿ"><a href="#tslintéƒ½èƒ½é…ç½®å“ªäº›åŠŸèƒ½ï¼Ÿå¯¹å¼€å‘æµç¨‹æœ‰ä½•å½±å“ï¼Ÿ" class="headerlink" title="tslintéƒ½èƒ½é…ç½®å“ªäº›åŠŸèƒ½ï¼Ÿå¯¹å¼€å‘æµç¨‹æœ‰ä½•å½±å“ï¼Ÿ"></a>tslintéƒ½èƒ½é…ç½®å“ªäº›åŠŸèƒ½ï¼Ÿå¯¹å¼€å‘æµç¨‹æœ‰ä½•å½±å“ï¼Ÿ</h2><h2 id="å¦‚ä½•ä½¿ç”¨tså®ç°ç±»å‹çº¦æŸï¼Œæšä¸¾ç­‰ç‰¹æ€§ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨tså®ç°ç±»å‹çº¦æŸï¼Œæšä¸¾ç­‰ç‰¹æ€§ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨tså®ç°ç±»å‹çº¦æŸï¼Œæšä¸¾ç­‰ç‰¹æ€§ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨tså®ç°ç±»å‹çº¦æŸï¼Œæšä¸¾ç­‰ç‰¹æ€§ï¼Ÿ</h2><h2 id="å¦‚ä½•ç†è§£æ¥å£ï¼Œæ³›å‹"><a href="#å¦‚ä½•ç†è§£æ¥å£ï¼Œæ³›å‹" class="headerlink" title="å¦‚ä½•ç†è§£æ¥å£ï¼Œæ³›å‹?"></a>å¦‚ä½•ç†è§£æ¥å£ï¼Œæ³›å‹?</h2><h2 id="å’ŒJSçš„åŒºåˆ«"><a href="#å’ŒJSçš„åŒºåˆ«" class="headerlink" title="å’ŒJSçš„åŒºåˆ«"></a>å’ŒJSçš„åŒºåˆ«</h2><p><img src="https://img-blog.csdnimg.cn/20201019091205642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzY5ODMyOA==,size_16,color_FFFFFF,t_70#pic_center" alt="åŒºåˆ«"></p><h2 id="TSçš„æ¥å£"><a href="#TSçš„æ¥å£" class="headerlink" title="TSçš„æ¥å£"></a>TSçš„æ¥å£</h2><p>æ¥å£æ˜¯åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å……å½“å¥‘çº¦çš„ç»“æ„ã€‚å®ƒå®šä¹‰äº†è¦éµå¾ªçš„ç±»çš„è¯­æ³•ï¼Œè¿™æ„å‘³ç€å®ç°æ¥å£çš„ç±»å¿…é¡»å®ç°å®ƒçš„æ‰€æœ‰æˆå‘˜ã€‚å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥è¢«å®ç°å®ƒçš„ç±»å¯¹è±¡å¼•ç”¨ã€‚æ— è®ºå¯¹è±¡æ˜¯å¦å…·æœ‰ç‰¹å®šçš„ç»“æ„ï¼ŒTypeScriptç¼–è¯‘å™¨éƒ½ä½¿ç”¨æ¥å£è¿›è¡Œç±»å‹æ£€æŸ¥</p><pre><code class="js">interface name&#123;  // å­—æ®µå£°æ˜  // æ–¹æ³•å£°æ˜&#125;</code></pre><p>æ¥å£åªæ˜¯å£°æ˜æ–¹æ³•å’Œå­—æ®µï¼Œå®ƒä¸èƒ½ç”¨æ¥å»ºé€ ä»»ä½•ä¸œè¥¿ã€‚ä¸éœ€è¦å°†æ¥å£è½¬æ¢ä¸º<code>JavaScript</code>æ¥æ‰§è¡Œï¼Œå®ƒä»¬å¯¹è¿è¡Œæ—¶<code>JavaScript</code>æ²¡æœ‰ä»»ä½•å½±å“ã€‚å› æ­¤ï¼Œå®ƒä»¬çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨å¼€å‘é˜¶æ®µæä¾›å¸®åŠ©ã€‚</p><h2 id="ä½ å¦‚ä½•ç†è§£Typescriptä¸­çš„ç±»ï¼Ÿåˆ—å‡ºç±»çš„ä¸€äº›ç‰¹æ€§ã€‚"><a href="#ä½ å¦‚ä½•ç†è§£Typescriptä¸­çš„ç±»ï¼Ÿåˆ—å‡ºç±»çš„ä¸€äº›ç‰¹æ€§ã€‚" class="headerlink" title="ä½ å¦‚ä½•ç†è§£Typescriptä¸­çš„ç±»ï¼Ÿåˆ—å‡ºç±»çš„ä¸€äº›ç‰¹æ€§ã€‚"></a>ä½ å¦‚ä½•ç†è§£Typescriptä¸­çš„ç±»ï¼Ÿåˆ—å‡ºç±»çš„ä¸€äº›ç‰¹æ€§ã€‚</h2><p><code>TypeScript</code>æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„<code>JavaScript</code>è¯­è¨€ï¼Œæ”¯æŒOOPç¼–ç¨‹ç‰¹æ€§ï¼Œæ¯”å¦‚ç±»ã€æ¥å£ç­‰ã€‚ä¸Javaä¸€æ ·ï¼Œç±»æ˜¯ç”¨äºåˆ›å»ºå¯é‡ç”¨ç»„ä»¶çš„åŸºæœ¬å®ä½“ã€‚å®ƒæ˜¯ä¸€ç»„å…·æœ‰å…¬å…±å±æ€§çš„å¯¹è±¡ã€‚ç±»æ˜¯åˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿æˆ–è“å›¾ã€‚å®ƒæ˜¯ä¸€ä¸ªé€»è¾‘å®ä½“ã€‚â€œclassâ€å…³é”®å­—ç”¨äºåœ¨<code>Typescript</code>ä¸­å£°æ˜ä¸€ä¸ªç±»ã€‚</p><pre><code class="js">class Student &#123;      studCode: number;      studName: string;      constructor(code: number, name: string) &#123;        this.studName = name;        this.studCode = code;      &#125;      getGrade() : string &#123;        return &quot;A+&quot; ;      &#125;    &#125;    </code></pre><p>ç±»çš„ç‰¹å¾æ˜¯ï¼š</p><p>ç»§æ‰¿ï¼Œå°è£…ï¼Œå¤šæ€æ€§ï¼ŒæŠ½è±¡</p><ul><li>ç±»(Class)ï¼šå®šä¹‰äº†ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹ï¼ŒåŒ…å«å®ƒçš„å±æ€§å’Œæ–¹æ³•</li><li>å¯¹è±¡ï¼ˆObjectï¼‰ï¼šç±»çš„å®ä¾‹ï¼Œé€šè¿‡ new ç”Ÿæˆ</li><li>é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€</li><li>å°è£…ï¼ˆEncapsulationï¼‰ï¼šå°†å¯¹æ•°æ®çš„æ“ä½œç»†èŠ‚éšè—èµ·æ¥ï¼Œåªæš´éœ²å¯¹å¤–çš„æ¥å£ã€‚å¤–ç•Œè°ƒç”¨ç«¯ä¸éœ€è¦ï¼ˆä¹Ÿä¸å¯èƒ½ï¼‰çŸ¥é“ç»†èŠ‚ï¼Œå°±èƒ½é€šè¿‡å¯¹å¤–æä¾›çš„æ¥å£æ¥è®¿é—®è¯¥å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†å¤–ç•Œæ— æ³•ä»»æ„æ›´æ”¹å¯¹è±¡å†…éƒ¨çš„æ•°æ®</li><li>ç»§æ‰¿ï¼ˆInheritanceï¼‰ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå­ç±»é™¤äº†æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰ç‰¹æ€§å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ›´å…·ä½“çš„ç‰¹æ€§</li><li>å¤šæ€ï¼ˆPolymorphismï¼‰ï¼šç”±ç»§æ‰¿è€Œäº§ç”Ÿäº†ç›¸å…³çš„ä¸åŒçš„ç±»ï¼Œå¯¹åŒä¸€ä¸ªæ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„å“åº”ã€‚æ¯”å¦‚ Cat å’Œ Dog éƒ½ç»§æ‰¿è‡ª Animalï¼Œä½†æ˜¯åˆ†åˆ«å®ç°äº†è‡ªå·±çš„ eat æ–¹æ³•ã€‚æ­¤æ—¶é’ˆå¯¹æŸä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬æ— éœ€äº†è§£å®ƒæ˜¯ Catè¿˜æ˜¯ Dogï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ eatæ–¹æ³•ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ¤æ–­å‡ºæ¥åº”è¯¥å¦‚ä½•æ‰§è¡Œ eat</li><li>å­˜å–å™¨ï¼ˆgetter &amp; setterï¼‰ï¼šç”¨ä»¥æ”¹å˜å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º</li><li>ä¿®é¥°ç¬¦ï¼ˆModifiersï¼‰ï¼šä¿®é¥°ç¬¦æ˜¯ä¸€äº›å…³é”®å­—ï¼Œç”¨äºé™å®šæˆå‘˜æˆ–ç±»å‹çš„æ€§è´¨ã€‚<br>æ¯”å¦‚ public ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å…¬æœ‰çš„ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®åˆ°ï¼Œé»˜è®¤æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯ public çš„</li><li>private ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®</li><li>protected ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å—ä¿æŠ¤çš„ï¼Œå®ƒå’Œ private ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯å®ƒåœ¨å­ç±»ä¸­ä¹Ÿæ˜¯å…è®¸è¢«è®¿é—®çš„</li><li>æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰ï¼šæŠ½è±¡ç±»æ˜¯ä¾›å…¶ä»–ç±»ç»§æ‰¿çš„åŸºç±»ï¼ŒæŠ½è±¡ç±»ä¸å…è®¸è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­è¢«å®ç°</li><li>æ¥å£ï¼ˆInterfacesï¼‰ï¼šä¸åŒç±»ä¹‹é—´å…¬æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ¥å£ã€‚æ¥å£å¯ä»¥è¢«ç±»å®ç°ï¼ˆimplementsï¼‰ã€‚ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£</li></ul><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>ç»§æ‰¿å¯ä»¥é€šè¿‡ä½¿ç”¨<code>extend</code>å…³é”®å­—æ¥å®ç°ã€‚</p><pre><code class="js">class Shape &#123;        Area:number        constructor(area:number) &#123;           this.Area = area       &#125;     &#125;     class Circle extends Shape &#123;        display():void &#123;           console.log(&quot;åœ†çš„é¢ç§¯: &quot;+this.Area)        &#125;     &#125;    var obj = new Circle(320);     obj.display()  </code></pre><h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><p>åœ¨æ¨¡å—ä¸­å£°æ˜çš„å˜é‡ã€å‡½æ•°ã€ç±»å’Œæ¥å£ä¸èƒ½åœ¨æ¨¡å—å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚</p><pre><code class="js">//å¯ä»¥ä½¿ç”¨exportå…³é”®å­—åˆ›å»ºæ¨¡å—ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–æ¨¡å—ä¸­ä½¿ç”¨importå…³é”®å­—ã€‚module module_name&#123;    class xyz&#123;      export sum(x, y)&#123;        return x+y;      &#125;    &#125;  &#125;  </code></pre><p><img src="https://img-blog.csdnimg.cn/20201019093902395.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzY5ODMyOA==,size_16,color_FFFFFF,t_70#pic_center" alt="æ¨¡å—"></p><p>â€œå†…éƒ¨æ¨¡å—â€ç°åœ¨ç§°åšâ€œ<code>å‘½åç©ºé—´</code>â€ã€‚<br>â€œå¤–éƒ¨æ¨¡å—â€ç°åœ¨åˆ™ç®€ç§°ä¸ºâ€œæ¨¡å—â€æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œ;</p><h3 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h3><pre><code class="js">/** * æ–°å»ºä¸€ä¸ªdb.ts å°†æ•°æ®åº“æ–¹æ³•å°è£…å¹¶ä¸”æš´éœ²å‡ºæ¥ * æš´éœ²ä¸€ä¸ªè·å–æ•°æ®çš„æ–¹æ³• */export function getData():any[]&#123;  return [      &#123;          name:&#39;123&#39;,          ahe:20      &#125;,      &#123;          name:&#39;123425&#39;,          age:30      &#125;  ]&#125;export function saveData():boolean&#123;    console.log(&#39;ä¿å­˜æ•°æ®æˆåŠŸï¼&#39;)    return true;&#125;/** * åœ¨index.tsæ–‡ä»¶ä¸­å¼•å…¥ * åœ¨è¿™é‡Œå¼•å…¥æˆ‘æš´éœ²çš„å‡½æ•° */import &#123;getData&#125; from &#39;./modules/db&#39;console.log(getData());saveData();</code></pre><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><pre><code class="js">/** * æš´éœ²ä¸€ä¸ªè·å–æ•°æ®çš„æ–¹æ³• */function getData():any[]&#123;  return [    &#123;        name:&#39;123&#39;,        ahe:20    &#125;,    &#123;        name:&#39;123425&#39;,        age:30    &#125;  ]&#125;function saveData():boolean&#123;    console.log(&#39;ä¿å­˜æ•°æ®æˆåŠŸï¼&#39;)    return true;&#125;export &#123;getData, saveData&#125;/** * åœ¨index.tsæ–‡ä»¶ä¸­å¼•å…¥ * åœ¨è¿™é‡Œå¼•å…¥æˆ‘æš´éœ²çš„å‡½æ•° */import &#123;getData&#125; from &#39;./modules/db&#39;console.log(getData());saveData();</code></pre><h3 id="å‘½åç©ºé—´ï¼š"><a href="#å‘½åç©ºé—´ï¼š" class="headerlink" title="å‘½åç©ºé—´ï¼š"></a>å‘½åç©ºé—´ï¼š</h3><p>å®ƒå°è£…äº†å…±äº«æŸäº›å…³ç³»çš„ç‰¹æ€§å’Œå¯¹è±¡ã€‚åç§°ç©ºé—´ä¹Ÿç§°ä¸ºå†…éƒ¨æ¨¡å—ã€‚åç§°ç©ºé—´è¿˜å¯ä»¥åŒ…æ‹¬æ¥å£ã€ç±»ã€å‡½æ•°å’Œå˜é‡ï¼Œä»¥æ”¯æŒä¸€ç»„ç›¸å…³åŠŸèƒ½ã€‚<br><strong>æ³¨æ„</strong>: åç§°ç©ºé—´å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶ä¸­å®šä¹‰ï¼Œå¹¶å…è®¸å°†æ¯ä¸ªæ–‡ä»¶éƒ½å®šä¹‰åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚å®ƒä½¿ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p><pre><code class="ts">namespace &lt;namespace_name&gt; &#123;      export interface I1 &#123; &#125;      export class c1&#123; &#125;    &#125;    </code></pre><h2 id="TypeScriptæ˜¯å¦‚ä½•åœ¨å‡½æ•°ä¸­æ”¯æŒå¯é€‰å‚æ•°çš„ï¼Ÿ"><a href="#TypeScriptæ˜¯å¦‚ä½•åœ¨å‡½æ•°ä¸­æ”¯æŒå¯é€‰å‚æ•°çš„ï¼Ÿ" class="headerlink" title="TypeScriptæ˜¯å¦‚ä½•åœ¨å‡½æ•°ä¸­æ”¯æŒå¯é€‰å‚æ•°çš„ï¼Ÿ"></a>TypeScriptæ˜¯å¦‚ä½•åœ¨å‡½æ•°ä¸­æ”¯æŒå¯é€‰å‚æ•°çš„ï¼Ÿ</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é—®å·ç¬¦å·(â€˜?â€™)æ¥ä½¿ç”¨å¯é€‰å‚æ•°ã€‚è¿™æ„å‘³ç€å¯ä»¥æˆ–ä¸å¯ä»¥æ¥æ”¶å€¼çš„å‚æ•°å¯ä»¥é™„åŠ ä¸€ä¸ªâ€?â€å¯é€‰çš„ã€‚</p><pre><code class="js">function Demo(arg1: number, arg2? :number) &#123;              &#125;</code></pre><p>å› æ­¤ï¼Œ<code>arg1</code>æ€»æ˜¯å¿…éœ€çš„ï¼Œè€Œ<code>arg2</code>æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°è¦æ”¾åé¢ã€‚<br>æ³¨æ„: å¯é€‰å‚æ•°å¿…é¡»éµå¾ªè¦æ±‚çš„å‚æ•°ã€‚å¦‚æœæˆ‘ä»¬æƒ³è®©<code>arg1</code>æˆä¸ºå¯é€‰çš„ï¼Œè€Œä¸æ˜¯arg2ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ”¹å˜é¡ºåºï¼Œ<code>arg1</code>å¿…é¡»æ”¾åœ¨<code>arg2</code>ä¹‹åã€‚</p><pre><code class="js">function Demo(arg2: number, arg1? :number) &#123;  &#125;  </code></pre><h2 id="ä»€ä¹ˆæ˜¯TypeScript-Declareå…³é”®å­—"><a href="#ä»€ä¹ˆæ˜¯TypeScript-Declareå…³é”®å­—" class="headerlink" title="ä»€ä¹ˆæ˜¯TypeScript Declareå…³é”®å­—?"></a>ä»€ä¹ˆæ˜¯TypeScript Declareå…³é”®å­—?</h2><p>æˆ‘ä»¬çŸ¥é“æ‰€æœ‰çš„<code>JavaScript</code>åº“/æ¡†æ¶éƒ½æ²¡æœ‰<code>TypeScript</code>å£°æ˜æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨<code>TypeScript</code>æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒä»¬æ—¶ä¸ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>declare</code>å…³é”®å­—ã€‚åœ¨æˆ‘ä»¬å¸Œæœ›å®šä¹‰å¯èƒ½å­˜åœ¨äºå…¶ä»–åœ°æ–¹çš„å˜é‡çš„ç¯å¢ƒå£°æ˜å’Œæ–¹æ³•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>declare</code>å…³é”®å­—ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸ºmyLibraryçš„åº“ï¼Œå®ƒæ²¡æœ‰<code>TypeScript</code>å£°æ˜æ–‡ä»¶ï¼Œåœ¨å…¨å±€å‘½åç©ºé—´ä¸­æœ‰ä¸€ä¸ªåä¸ºmyLibraryçš„å‘½åç©ºé—´ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨TypeScriptä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªåº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç :</p><pre><code class="ts">declare var myLibrary;</code></pre><h2 id="è§£é‡ŠTypeScriptä¸­çš„æ³›å‹ï¼Ÿ"><a href="#è§£é‡ŠTypeScriptä¸­çš„æ³›å‹ï¼Ÿ" class="headerlink" title="è§£é‡ŠTypeScriptä¸­çš„æ³›å‹ï¼Ÿ"></a>è§£é‡ŠTypeScriptä¸­çš„æ³›å‹ï¼Ÿ</h2><p><code>TypeScript</code>æ³›å‹æ˜¯ä¸€ä¸ªæä¾›åˆ›å»ºå¯é‡ç”¨ç»„ä»¶æ–¹æ³•çš„å·¥å…·ã€‚å®ƒèƒ½å¤Ÿåˆ›å»ºå¯ä»¥å¤„ç†å¤šç§æ•°æ®ç±»å‹è€Œä¸æ˜¯å•ä¸€æ•°æ®ç±»å‹çš„ç»„ä»¶ã€‚æ³›å‹åœ¨ä¸å½±å“æ€§èƒ½æˆ–ç”Ÿäº§ç‡çš„æƒ…å†µä¸‹æä¾›ç±»å‹å®‰å…¨æ€§ã€‚æ³›å‹å…è®¸æˆ‘ä»¬åˆ›å»ºæ³›å‹ç±»ã€æ³›å‹å‡½æ•°ã€æ³›å‹æ–¹æ³•å’Œæ³›å‹æ¥å£ã€‚</p><p>åœ¨æ³›å‹ä¸­ï¼Œç±»å‹å‚æ•°å†™<code>åœ¨å¼€(&lt;)å’Œé—­(&gt;)</code>æ‹¬å·ä¹‹é—´ï¼Œè¿™ä½¿å¾—å®ƒæ˜¯å¼ºç±»å‹é›†åˆã€‚æ³›å‹ä½¿ç”¨ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç±»å‹å˜é‡ï¼Œå®ƒè¡¨ç¤ºç±»å‹ã€‚æ³›å‹é›†åˆåªåŒ…å«ç±»ä¼¼ç±»å‹çš„å¯¹è±¡ã€‚</p><pre><code class="ts">function identity&lt;T&gt;(arg: T): T &#123;          return arg;      &#125;      let output1 = identity&lt;string&gt;(&quot;myString&quot;);      let output2 = identity&lt;number&gt;( 100 );    console.log(output1);    console.log(output2);     </code></pre><h2 id="TSçš„â€œæ¥å£â€å’Œâ€œtypeâ€è¯­å¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#TSçš„â€œæ¥å£â€å’Œâ€œtypeâ€è¯­å¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="TSçš„â€œæ¥å£â€å’Œâ€œtypeâ€è¯­å¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>TSçš„â€œæ¥å£â€å’Œâ€œtypeâ€è¯­å¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><pre><code class="ts">interface X &#123;      a: number      b: string  &#125;  type X = &#123;      a: number      b: string  &#125;;  </code></pre><p><img src="https://img-blog.csdnimg.cn/20201019100145600.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzY5ODMyOA==,size_16,color_FFFFFF,t_70#pic_center" alt="typeä¸interface"></p><h2 id="ä»€ä¹ˆæ˜¯TypeScriptä¸­çš„ç±»å‹æ–­è¨€ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯TypeScriptä¸­çš„ç±»å‹æ–­è¨€ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯TypeScriptä¸­çš„ç±»å‹æ–­è¨€ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯TypeScriptä¸­çš„ç±»å‹æ–­è¨€ï¼Ÿ</h2><p>ç±»å‹æ–­è¨€çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯å®ƒä¸åƒå…¶ä»–è¯­è¨€ä¸€æ ·æ‰§è¡ŒCï¼ƒå’ŒJavaé‚£æ ·çš„ç±»å‹æ£€æŸ¥æˆ–æ•°æ®é‡ç»„ã€‚ç±»å‹è½¬æ¢é™„å¸¦è¿è¡Œæ—¶æ”¯æŒï¼Œè€Œç±»å‹æ–­è¨€å¯¹è¿è¡Œæ—¶æ²¡æœ‰å½±å“ã€‚ä½†æ˜¯ï¼Œç±»å‹æ–­è¨€ä»…ç”±ç¼–è¯‘å™¨ä½¿ç”¨ï¼Œå¹¶å‘ç¼–è¯‘å™¨æä¾›æœ‰å…³æˆ‘ä»¬å¸Œæœ›å¦‚ä½•åˆ†æä»£ç çš„æç¤ºã€‚</p><pre><code class="ts">let empCode: any = 111;     let employeeCode = &lt;number&gt; code;     console.log(typeof(employeeCode)); // : number  </code></pre><p>ä¾‹å°† something æ–­è¨€æˆ string</p><pre><code class="ts">function getLength(something: string | number): number &#123;  if ((&lt;string&gt;something).length) &#123;      return (&lt;string&gt;something).length;  &#125; else &#123;      return something.toString().length;  &#125;&#125;</code></pre><h2 id="TypeScriptçš„asè¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#TypeScriptçš„asè¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="TypeScriptçš„asè¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>TypeScriptçš„asè¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>asæ˜¯TypeScriptä¸­ç±»å‹æ–­è¨€çš„é™„åŠ è¯­æ³•ï¼Œå¼•å…¥as-è¯­æ³•çš„åŸå› æ˜¯<strong>åŸå§‹è¯­æ³•()ä¸JSXå†²çª</strong>ã€‚</p><pre><code class="js">let empCode: any = 111;     let employeeCode = code as number;   </code></pre><p>å½“ä½¿ç”¨å¸¦æœ‰JSXçš„TypeScriptæ—¶ï¼Œåªå…è®¸asé£æ ¼çš„æ–­è¨€ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯JSXï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨TypeScriptä¸­ä½¿ç”¨JSXå—ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯JSXï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨TypeScriptä¸­ä½¿ç”¨JSXå—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯JSXï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨TypeScriptä¸­ä½¿ç”¨JSXå—ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯JSXï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨TypeScriptä¸­ä½¿ç”¨JSXå—ï¼Ÿ</h2><p>JSXåªä¸è¿‡æ˜¯å¸¦æœ‰ä¸åŒæ‰©å±•åçš„Javascriptã€‚Facebookæå‡ºäº†è¿™ä¸ªæ–°çš„æ‰©å±•ï¼Œä»¥ä¾¿ä¸JavaScriptä¸­ç±»ä¼¼xmlçš„HTMLå®ç°åŒºåˆ†å¼€æ¥ã€‚</p><p>JSXæ˜¯ä¸€ç§å¯åµŒå…¥çš„ç±»ä¼¼xmlçš„è¯­æ³•ã€‚å®ƒå°†è¢«è½¬æ¢æˆæœ‰æ•ˆçš„JavaScriptã€‚JSXéšç€Reactæ¡†æ¶è€Œæµè¡Œèµ·æ¥ã€‚TypeScriptæ”¯æŒåµŒå…¥ã€ç±»å‹æ£€æŸ¥å’Œç›´æ¥å°†JSXç¼–è¯‘æˆJavaScriptã€‚</p><p>è¦ä½¿ç”¨JSXï¼Œæˆ‘ä»¬å¿…é¡»åšä¸¤ä»¶äº‹ã€‚</p><p><code>ä½¿ç”¨.tsxæ‰©å±•åå‘½åæ–‡ä»¶</code><br><code>å¯ç”¨jsxé€‰é¡¹</code></p><h2 id="ä»€ä¹ˆæ˜¯Restå‚æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Restå‚æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Restå‚æ•°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Restå‚æ•°ï¼Ÿ</h2><p>restå‚æ•°ç”¨äºå‘å‡½æ•°ä¼ é€’é›¶ä¸ªæˆ–å¤šä¸ªå€¼ã€‚å®ƒæ˜¯é€šè¿‡åœ¨å‚æ•°å‰åŠ ä¸Šä¸‰ä¸ªç‚¹å­—ç¬¦(â€˜â€¦â€™)æ¥å£°æ˜çš„ã€‚å®ƒå…è®¸å‡½æ•°åœ¨ä¸ä½¿ç”¨argumentså¯¹è±¡çš„æƒ…å†µä¸‹æ‹¥æœ‰å¯å˜æ•°é‡çš„å‚æ•°ã€‚å½“æˆ‘ä»¬æœ‰ä¸ç¡®å®šæ•°é‡çš„å‚æ•°æ—¶ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>restå‚æ•°è¦éµå¾ªçš„è§„åˆ™:</p><ol><li>ä¸€ä¸ªå‡½æ•°ä¸­åªå…è®¸æœ‰ä¸€ä¸ªrestå‚æ•°ã€‚</li><li>å®ƒå¿…é¡»æ˜¯æ•°ç»„ç±»å‹ã€‚</li><li>å®ƒå¿…é¡»æ˜¯å‚æ•°åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚</li></ol><pre><code class="js">function sum(a: number, ...b: number[]): number &#123;     let result = a;     for (var i = 0; i &lt; b.length; i++) &#123;     result += b[i];     &#125;     console.log(result);    &#125;    let result1 = sum(3, 5);    let result2 = sum(3, 5, 7, 9);   </code></pre><h2 id="è§£é‡ŠTypeScriptçš„Enumæšä¸¾ç±»å‹ï¼Ÿ"><a href="#è§£é‡ŠTypeScriptçš„Enumæšä¸¾ç±»å‹ï¼Ÿ" class="headerlink" title="è§£é‡ŠTypeScriptçš„Enumæšä¸¾ç±»å‹ï¼Ÿ"></a>è§£é‡ŠTypeScriptçš„Enumæšä¸¾ç±»å‹ï¼Ÿ</h2><p>æšä¸¾æˆ–æšä¸¾æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ç»„å‘½åå¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ›´å®¹æ˜“åœ°è®°å½•æ„å›¾ï¼Œæˆ–è€…åˆ›å»ºä¸€ç»„ä¸åŒçš„æ¡ˆä¾‹ã€‚å®ƒæ˜¯ç›¸å…³å€¼çš„é›†åˆï¼Œå¯ä»¥æ˜¯æ•°å€¼æˆ–å­—ç¬¦ä¸²å€¼ã€‚</p><pre><code class="js">enum Gender &#123;    Male,    Female    Other  &#125;  console.log(Gender.Female); // : 1  // æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡enumå€¼çš„numberå€¼æ¥è®¿é—®å®ƒconsole.log(Gender[1]); // : Female</code></pre><h2 id="è§£é‡Šç›¸å¯¹æ¨¡å—å’Œéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥"><a href="#è§£é‡Šç›¸å¯¹æ¨¡å—å’Œéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥" class="headerlink" title="è§£é‡Šç›¸å¯¹æ¨¡å—å’Œéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥"></a>è§£é‡Šç›¸å¯¹æ¨¡å—å’Œéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥</h2><ul><li>éç›¸å¯¹</li><li>éç›¸å¯¹å¯¼å…¥å¯ä»¥ç›¸å¯¹äºbaseUrlè§£æï¼Œä¹Ÿå¯ä»¥é€šè¿‡è·¯å¾„æ˜ å°„è§£æã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åœ¨å¯¼å…¥ä»»ä½•å¤–éƒ¨ä¾èµ–é¡¹æ—¶ä½¿ç”¨éç›¸å¯¹è·¯å¾„ã€‚ ä¾‹å­:</li></ul><pre><code class="js"> import * as $ from â€œjqueryâ€;  import &#123; Component &#125; from â€œ@angular/coreâ€;</code></pre><ul><li>ç›¸å¯¹</li><li>ç›¸å¯¹å¯¼å…¥å¯ä»¥ç”¨äºæˆ‘ä»¬è‡ªå·±çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä¿è¯åœ¨è¿è¡Œæ—¶ç»´æŠ¤å®ƒä»¬çš„ç›¸å¯¹ä½ç½®ã€‚ç›¸å¯¹å¯¼å…¥ä»¥/ã€./æˆ–â€¦/å¼€å¤´ã€‚ ä¾‹å­:</li></ul><pre><code class="js"> import Entry from â€œ./components/Entryâ€;  import &#123;DefaultHeaders&#125; from â€œ../constants/httpâ€;</code></pre><h2 id="ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿ</h2><p>åŒ¿åå‡½æ•°æ˜¯å£°æ˜æ—¶æ²¡æœ‰ä»»ä½•å‘½åæ ‡è¯†ç¬¦çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€å£°æ˜çš„ã€‚ä¸æ ‡å‡†å‡½æ•°ä¸€æ ·ï¼ŒåŒ¿åå‡½æ•°å¯ä»¥æ¥å—è¾“å…¥å’Œè¿”å›è¾“å‡ºã€‚åŒ¿åå‡½æ•°åœ¨åˆå§‹åˆ›å»ºä¹‹åé€šå¸¸æ˜¯ä¸å¯è®¿é—®çš„ã€‚</p><pre><code class="js">let myAdd = function(x: number, y: number): number &#123;       return x + y;   &#125;;  console.log(myAdd())  </code></pre><h2 id="ä»€ä¹ˆæ˜¯å£°æ˜åˆå¹¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å£°æ˜åˆå¹¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å£°æ˜åˆå¹¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å£°æ˜åˆå¹¶ï¼Ÿ</h2><p><code>å£°æ˜åˆå¹¶</code>æ˜¯ç¼–è¯‘å™¨éšååˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹å£°æ˜çš„è¿‡ç¨‹ã€‚å°†å…·æœ‰ç›¸åŒåç§°çš„å£°æ˜å£°æ˜ä¸ºå•ä¸ªå®šä¹‰ã€‚è¿™ä¸ªåˆå¹¶çš„å®šä¹‰å…·æœ‰ä¸¤ä¸ªåŸå§‹å£°æ˜çš„ç‰¹æ€§ã€‚</p><p>æœ€ç®€å•ä¹Ÿæ˜¯æœ€å¸¸è§çš„å£°æ˜åˆå¹¶ç±»å‹æ˜¯æ¥å£åˆå¹¶ã€‚åœ¨æœ€åŸºæœ¬çš„å±‚æ¬¡ä¸Šï¼Œmergeå°†ä¸¤ä¸ªå£°æ˜çš„æˆå‘˜æœºæ¢°åœ°è¿æ¥åˆ°ä¸€ä¸ªå…·æœ‰ç›¸åŒåç§°çš„æ¥å£ä¸­</p><pre><code class="js">interface Cloner &#123;      clone(animal: Animal): Animal;  &#125;  interface Cloner &#123;      clone(animal: Sheep): Sheep;  &#125;  interface Cloner &#123;      clone(animal: Dog): Dog;      clone(animal: Cat): Cat;  &#125;  // è¿™ä¸‰ä¸ªæ¥å£å°†åˆå¹¶ä¸ºä¸€ä¸ªå•ç‹¬çš„å£°æ˜interface Cloner &#123;    clone(animal: Dog): Dog;    clone(animal: Cat): Cat;    clone(animal: Sheep): Sheep;    clone(animal: Animal): Animal;  &#125;  </code></pre><p>æ³¨: åœ¨TypeScriptä¸­ä¸æ˜¯æ‰€æœ‰çš„åˆå¹¶éƒ½å…è®¸ã€‚ç›®å‰ï¼Œç±»ä¸èƒ½ä¸å…¶ä»–ç±»æˆ–å˜é‡åˆå¹¶ã€‚</p><h2 id="TypeScriptä¸­çš„æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆ"><a href="#TypeScriptä¸­çš„æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆ" class="headerlink" title="TypeScriptä¸­çš„æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆ?"></a>TypeScriptä¸­çš„æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆ?</h2><p>å¦‚æœå­ç±»(å­ç±»)å…·æœ‰ä¸çˆ¶ç±»ä¸­å£°æ˜çš„ç›¸åŒçš„æ–¹æ³•ï¼Œåˆ™ç§°ä¸ºæ–¹æ³•è¦†ç›–ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æ´¾ç”Ÿç±»æˆ–å­ç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»æ–¹æ³•ã€‚</p><p>æ–¹æ³•é‡å†™çš„è§„åˆ™:</p><ol><li>è¯¥æ–¹æ³•å¿…é¡»å…·æœ‰ä¸çˆ¶ç±»ç›¸åŒçš„åç§°</li><li>è¯¥æ–¹æ³•å¿…é¡»å…·æœ‰ä¸çˆ¶ç±»ç›¸åŒçš„å‚æ•°ã€‚</li><li>å¿…é¡»æœ‰ä¸€ä¸ªIS-Aå…³ç³»(ç»§æ‰¿)ã€‚</li></ol><pre><code class="js">class NewPrinter extends Printer &#123;      doPrint(): any &#123;          super.doPrint();          console.log(&quot;Called Child class.&quot;);      &#125;      doInkJetPrint(): any &#123;          console.log(&quot;Called doInkJetPrint().&quot;);      &#125;  &#125;  let printer: new () =&gt; NewPrinter;  printer.doPrint();  printer.doInkJetPrint();  </code></pre><h2 id="Lambda-ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Lambda-ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Lambda/ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Lambda/ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ES6ç‰ˆæœ¬çš„<code>TypeScript</code>æä¾›äº†å®šä¹‰åŒ¿åå‡½æ•°çš„ç®€å†™è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯ç”¨äºå‡½æ•°è¡¨è¾¾å¼ã€‚<br>è¿™äº›ç®­å¤´å‡½æ•°ä¹Ÿç§°ä¸º<code>Lambda</code>å‡½æ•°ã€‚<code>lambda</code>å‡½æ•°æ˜¯æ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çœç•¥äº†<code>function</code>å…³é”®å­—ã€‚</p><pre><code class="js">let sum = (a: number, b: number): number =&gt; &#123;      return a + b;    &#125;    console.log(sum(20, 30)); //returns 50    </code></pre><p>åœ¨ä¸Šé¢ï¼Œ<code>?=&gt;?</code>æ˜¯ä¸€ä¸ªlambdaæ“ä½œç¬¦ï¼Œ(a + b)æ˜¯å‡½æ•°çš„ä¸»ä½“ï¼Œ(a: number, b: number)æ˜¯å†…è”å‚æ•°ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ&quot;&gt;&lt;a href=&quot;#æ˜¯å¦å¯ä»¥å°†å¤šä¸ªjsæ–‡ä»¶åˆå¹¶ä¸º1ä¸ªtsæ–‡ä»¶ï¼Ÿå¦‚æœæ˜¯æ€ä¹ˆåšï¼Ÿ&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Ts" scheme="https://shinichikudo-fe.github.io/categories/Ts/"/>
    
    
    <category term="Ts" scheme="https://shinichikudo-fe.github.io/tags/Ts/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹DOMæ ‘å’Œæ¸²æŸ“è¿‡ç¨‹</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/30/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BDOM%E6%A0%91%E5%92%8C%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/30/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BDOM%E6%A0%91%E5%92%8C%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B/</id>
    <published>2020-09-30T01:15:38.000Z</published>
    <updated>2020-09-30T02:18:26.765Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="DOMæ“ä½œ"><a href="#DOMæ“ä½œ" class="headerlink" title="DOMæ“ä½œ"></a>DOMæ“ä½œ</h2><p>å¹³æ—¶ä¸­å› ä¸ºæœ‰å„ä¸ªæ¡†æ¶çš„APIä½¿ç”¨ï¼Œä½¿æˆ‘ä»¬å¯¹DOMçš„æ“ä½œï¼Œæ…¢æ…¢å˜å¾—æ·¡å¿˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“çš„æ˜¯å„ä¸ªæ¡†æ¶ä¹Ÿæ˜¯æ“ä½œdomçš„ï¼Œåªæ˜¯å°†æ–¹æ³•æš´éœ²å‡ºæ¥ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚é€šè¿‡å­¦ä¹ DOMæ“ä½œï¼ŒåŠ æ·±å¯¹Javascriptçš„ç†è§£</p><p>DOMæ“ä½œå¹¶æ²¡æœ‰ä½ æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2016/11/29/8d195c29c5f16f86e390d4c6f26084da?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="domæ“ä½œ"></p><h3 id="åˆ›å»ºå…ƒç´ "><a href="#åˆ›å»ºå…ƒç´ " class="headerlink" title="åˆ›å»ºå…ƒç´ "></a>åˆ›å»ºå…ƒç´ </h3><p>è®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºHTMLå…ƒç´ ï¼Œä¸ºäº†åˆ›å»ºå…ƒç´ ï¼Œä½ éœ€è¦ç”¨<code>document.createElement(tagName) </code>æ–¹æ³•ï¼š</p><pre><code class="js">const h1 = document.createElement(&#39;h1&#39;)//</code></pre><h3 id="ä¿®æ”¹æ–‡æœ¬å†…å®¹"><a href="#ä¿®æ”¹æ–‡æœ¬å†…å®¹" class="headerlink" title="ä¿®æ”¹æ–‡æœ¬å†…å®¹"></a>ä¿®æ”¹æ–‡æœ¬å†…å®¹</h3><pre><code class="js">h1.textContent = &#39;hello world&#39;</code></pre><h3 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h3><pre><code class="js">h1.setAttributes(&#39;class&#39;,&#39;hello&#39;)</code></pre><p>ä¸ºäº†ç®¡ç†ç±»ï¼Œç”¨<code>element.className</code>å±æ€§</p><pre><code class="js">h1.className = &#39;world&#39;</code></pre><p>ç„¶è€Œï¼Œæœ€å¥½çš„åŠæ³•è¿˜æ˜¯ç”¨<code>classList</code></p><pre><code class="js">h1.classList.add(&#39;hello&#39;)h1.classList.remove(&#39;hello&#39;)</code></pre><p>è¦è®¾ç½®å…ƒç´ çš„ID,ä½ å¯ä»¥ç”¨attributeæˆ–è€…ç›´æ¥è®¾ç½®idå±æ€§</p><pre><code class="js">h1.setAttribute(&#39;id&#39;, &#39;hello-world&#39;)h1.id = &#39;hello-world&#39;</code></pre><blockquote><p>å¦‚æœä½ ä¸ç¡®å®šæ˜¯ç”¨attributesè¿˜æ˜¯propertiesï¼Œé‚£å°±ç”¨attributesï¼Œé™¤äº†è¡¨å•å…ƒç´ çš„çŠ¶æ€ï¼Œåƒvalueå’Œchecked</p></blockquote><p>é™¤äº†ä¸‹é¢è¿™äº›ï¼Œä½ ä¸èƒ½ç”¨<code>element.setAttribute(someBoolean, false)</code>æ¥è®¾ç½®boolå€¼ï¼š</p><pre><code class="js">input.checked = true// input.checked = false// input.setAttribute(â€˜checkedâ€™, â€˜â€™)// input.removeAttribute(&#39;checked&#39;)// </code></pre><h3 id="æ·»åŠ å…ƒç´ "><a href="#æ·»åŠ å…ƒç´ " class="headerlink" title="æ·»åŠ å…ƒç´ "></a>æ·»åŠ å…ƒç´ </h3><pre><code class="js">document.body.appendChild(h1)</code></pre><h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><pre><code class="js">document.body.removeChild(h1)</code></pre><h3 id="æŸ¥æ‰¾å…ƒç´ "><a href="#æŸ¥æ‰¾å…ƒç´ " class="headerlink" title="æŸ¥æ‰¾å…ƒç´ "></a>æŸ¥æ‰¾å…ƒç´ </h3><pre><code class="js">document.getElementById(id)element.childNodes[i]element.firstChild === element.childNodes[0]element.lastChild === element.childNodes[element.childNodes.length - 1]element.getElementsByTagName(tagName)element.getElementsByClassName(className)element.querySelector(query)element.querySelectorAll(query)</code></pre><p><strong>æ³¨æ„</strong>ï¼š<code>getElementsByTagName, getElementsByClassName å’Œ querySelectorAll</code>è¿”å›çš„ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ª<code>NodeList</code>ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ES5çš„æ•°ç»„è¿­ä»£å™¨è¿­ä»£ï¼Œè¿™é‡Œæœ‰ä¸€äº›å…³äº<a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList#Workarounds">NodeListçš„ä»‹ç»</a></p><h3 id="å…ƒç´ ä¹‹é—´æ’å…¥å…ƒç´ "><a href="#å…ƒç´ ä¹‹é—´æ’å…¥å…ƒç´ " class="headerlink" title="å…ƒç´ ä¹‹é—´æ’å…¥å…ƒç´ "></a>å…ƒç´ ä¹‹é—´æ’å…¥å…ƒç´ </h3><pre><code class="js"> document.body.insertBefore(h1, document.body.firstChild)</code></pre><h3 id="åˆ›å»ºå¾ˆå¤šå…ƒç´ "><a href="#åˆ›å»ºå¾ˆå¤šå…ƒç´ " class="headerlink" title="åˆ›å»ºå¾ˆå¤šå…ƒç´ "></a>åˆ›å»ºå¾ˆå¤šå…ƒç´ </h3><pre><code class="js">const data = [  [ 1, 2, 3 ],  [ 4, 5, 6 ],  [ 7, 8, 9 ]  ]const table = document.createElement(&#39;table&#39;)data.forEach(row =&gt; &#123;  const tr = document.createElement(&#39;tr&#39;)  row.forEach(cell =&gt; &#123;    const td = document.createElement(&#39;td&#39;)    td.textContent = cell    tr.appendChild(td)  &#125;)  table.appendChild(tr)&#125;)document.body.appendChild(table)</code></pre><h3 id="æ›´æ–°ä¸€ç³»åˆ—å…ƒç´ "><a href="#æ›´æ–°ä¸€ç³»åˆ—å…ƒç´ " class="headerlink" title="æ›´æ–°ä¸€ç³»åˆ—å…ƒç´ "></a>æ›´æ–°ä¸€ç³»åˆ—å…ƒç´ </h3><pre><code class="js">const table = document.createElement(&#39;table&#39;)document.body.appendChild(table)updateTable(table, [  [ 1, 2 ],  [ 3, 4, 5 ],  [ 6, 7, 8, 9 ]  ])setTimeout(() =&gt; &#123;  updateTable(table, [    [ 1, 2, 3, 4 ],    [ 5, 6, 7 ],    [ 8, 9 ]  ])  &#125;, 1000)function updateTable (table, data) &#123;  const rowLookup = table._lookup || (table._lookup = [])  setChildren(table, updateRows(rowLookup, data))&#125;function updateRows (rowLookup, rows) &#123;  return rows.map((row, y) =&gt; &#123;    const tr = rowLookup[y] || (rowLookup[y] = document.createElement(&#39;tr&#39;))    const cellLookup = tr._lookup || (tr._lookup = [])    setChildren(tr, updateCells(cellLookup, row))    return tr  &#125;)&#125;function updateCells (cellLookup, cells) &#123;  return cells.map((cell, x) =&gt; &#123;      const td = cellLookup[x] || (cellLookup[x] = document.createElement(&#39;td&#39;))      td.textContent = cell      return td    &#125;)&#125;function setChildren (parent, children) &#123;  let traverse = parent.firstChild  for (let i = 0; i &lt; children.length; i++) &#123;    const child = children[i]    if (child == null) &#123;      return    &#125;    if (child === traverse) &#123;      traverse = traverse.nextSibling    &#125; else if (traverse) &#123;      parent.insertBefore(child, traverse)    &#125; else &#123;      parent.appendChild(child)    &#125;  &#125;  while (traverse) &#123;    const next = traverse.nextSibling    parent.removeChild(traverse)    traverse = next  &#125;&#125;</code></pre><p>è¿™é‡Œå‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š</p><ul><li>1.è¿™é‡Œæœ‰ä¸€ä¸ªéšè—çš„å…ƒç´ <code>element._lookup = []</code>ï¼Œç”¨æ¥æŸ¥æ‰¾å­å…ƒç´ ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªæœ‰idçš„å…ƒç´ ï¼‰ï¼Œç”¨è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å¯ä»¥é‡å¤åˆ©ç”¨å·²ç»å­˜åœ¨çš„domï¼Œæ›´æ–°ä»–ä»¬</li><li>2.<code>setChildren(parent, children)</code>æ–¹æ³•é‡Œæœ‰åŒ…å«å­å…ƒç´ çš„åˆ—è¡¨</li></ul><p>ä½ è¿˜å¯ä»¥ç”¨<code>setChildren</code>æ–¹æ³•æ¥<code>mount/unmount</code>å­å…ƒç´ </p><pre><code class="js">setChildren(login, [  email,  !forgot &amp;&amp; pass])</code></pre><h2 id="DOMæ ‘çš„æ¸²æŸ“"><a href="#DOMæ ‘çš„æ¸²æŸ“" class="headerlink" title="DOMæ ‘çš„æ¸²æŸ“"></a>DOMæ ‘çš„æ¸²æŸ“</h2><h3 id="CSS-ä¸ä¼šé˜»å¡-DOM-çš„è§£æ"><a href="#CSS-ä¸ä¼šé˜»å¡-DOM-çš„è§£æ" class="headerlink" title="CSS ä¸ä¼šé˜»å¡ DOM çš„è§£æ"></a>CSS ä¸ä¼šé˜»å¡ DOM çš„è§£æ</h3><p>é¦–å…ˆåœ¨å¤´éƒ¨æ’å…¥<code>&lt;script defer src=&quot;/js/logDiv.js&quot;&gt;&lt;/script&gt;</code>ï¼ŒJSæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼š</p><pre><code class="js">const div = document.querySelector(&#39;div&#39;);console.log(div);</code></pre><p><code>defer</code>å±æ€§ç›¸ä¿¡å¤§å®¶ä¹Ÿå¾ˆç†Ÿæ‚‰äº†ï¼ŒMDNå¯¹æ­¤çš„æè¿°æ˜¯ç”¨æ¥é€šçŸ¥æµè§ˆå™¨è¯¥è„šæœ¬å°†åœ¨æ–‡æ¡£å®Œæˆè§£æåï¼Œè§¦å‘ <code>DOMContentLoaded</code> äº‹ä»¶å‰æ‰§è¡Œã€‚è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œèƒ½ä¿è¯DOMè§£æåé©¬ä¸Šæ‰“å°å‡ºdivã€‚</p><p>æµè§ˆå™¨æ˜¯è§£æDOMç”Ÿæˆ<code>DOM Tree</code>ï¼Œç»“åˆCSSç”Ÿæˆçš„<code>CSS Tree</code>ï¼Œæœ€ç»ˆç»„æˆ<code>render tree</code>ï¼Œå†æ¸²æŸ“é¡µé¢ã€‚ç”±æ­¤å¯è§ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­CSSå®Œå…¨æ— æ³•å½±å“<code>DOM Tree</code>ï¼Œå› è€Œæ— éœ€é˜»å¡DOMè§£æã€‚ç„¶è€Œï¼Œ<code>DOM Tree</code>å’Œ<code>CSS Tree</code>ä¼šç»„åˆæˆ<code>render tree</code>ï¼Œé‚£CSSä¼šä¸ä¼šé¡µé¢é˜»å¡æ¸²æŸ“å‘¢ï¼Ÿ</p><h3 id="CSS-é˜»å¡é¡µé¢æ¸²æŸ“"><a href="#CSS-é˜»å¡é¡µé¢æ¸²æŸ“" class="headerlink" title="CSS é˜»å¡é¡µé¢æ¸²æŸ“"></a>CSS é˜»å¡é¡µé¢æ¸²æŸ“</h3><p>å¦‚æœè„šæœ¬çš„å†…å®¹æ˜¯è·å–å…ƒç´ çš„æ ·å¼ï¼Œå®½é«˜ç­‰CSSæ§åˆ¶çš„å±æ€§ï¼Œæµè§ˆå™¨æ˜¯éœ€è¦è®¡ç®—çš„ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–äºCSSã€‚æµè§ˆå™¨ä¹Ÿæ— æ³•æ„ŸçŸ¥è„šæœ¬å†…å®¹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºé¿å…æ ·å¼è·å–ï¼Œå› è€Œåªå¥½ç­‰å‰é¢æ‰€æœ‰çš„æ ·å¼ä¸‹è½½å®Œåï¼Œå†æ‰§è¡ŒJSã€‚å› è€Œé€ æˆäº†ä¹‹å‰ä¾‹å­çš„æƒ…å†µã€‚</p><h3 id="JS-é˜»å¡-DOM-è§£æ"><a href="#JS-é˜»å¡-DOM-è§£æ" class="headerlink" title="JS é˜»å¡ DOM è§£æ"></a>JS é˜»å¡ DOM è§£æ</h3><p>æµè§ˆå™¨é‡åˆ°<code> &lt;script&gt;</code> æ ‡ç­¾æ—¶ï¼Œä¼šè§¦å‘é¡µé¢æ¸²æŸ“</p><p>æ¯æ¬¡ç¢°åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šæ¸²æŸ“ä¸€æ¬¡é¡µé¢ã€‚è¿™æ˜¯åŸºäºåŒæ ·çš„ç†ç”±ï¼Œæµè§ˆå™¨ä¸çŸ¥é“è„šæœ¬çš„å†…å®¹ï¼Œå› è€Œç¢°åˆ°è„šæœ¬æ—¶ï¼Œåªå¥½å…ˆæ¸²æŸ“é¡µé¢ï¼Œç¡®ä¿è„šæœ¬èƒ½è·å–åˆ°æœ€æ–°çš„DOMå…ƒç´ ä¿¡æ¯ï¼Œå°½ç®¡è„šæœ¬å¯èƒ½ä¸éœ€è¦è¿™äº›ä¿¡æ¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;DOMæ“ä½œ&quot;&gt;&lt;a href=&quot;#DOMæ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;DOMæ“ä½œ&quot;&gt;&lt;/a&gt;DOMæ“ä½œ&lt;/h2&gt;&lt;p&gt;å¹³æ—¶ä¸­å› ä¸ºæœ‰å„ä¸ªæ¡†æ¶çš„</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ JavaScriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹æŒ‰ä½æ“ä½œç¬¦, ç±»æ•°ç»„å¯¹è±¡å’Œç±»å‹åŒ–æ•°ç»„</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/29/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0JavaScript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%8C%89%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%AC%A6-%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%8C%96%E6%95%B0%E7%BB%84/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/29/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0JavaScript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%8C%89%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%AC%A6-%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%8C%96%E6%95%B0%E7%BB%84/</id>
    <published>2020-09-29T01:25:07.000Z</published>
    <updated>2020-09-29T06:33:06.082Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h2 id="å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬"><a href="#å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬" class="headerlink" title="å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬"></a>å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬</h2><h3 id="åè¿›åˆ¶è½¬äºŒè¿›åˆ¶"><a href="#åè¿›åˆ¶è½¬äºŒè¿›åˆ¶" class="headerlink" title="åè¿›åˆ¶è½¬äºŒè¿›åˆ¶"></a>åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</h3><p><strong>æ­£æ•´æ•°è½¬æˆäºŒè¿›åˆ¶</strong>ï¼Œé™¤äºŒå–ä½™ï¼Œç„¶åå€’åºæ’åˆ—ï¼Œé«˜ä½è¡¥é›¶</p><p><img src="https://exp-picture.cdn.bcebos.com/c255efc595ee41c19c2f7ce08d88912ca5ca9b5f.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo"></p><p><strong>è´Ÿæ•´æ•°è½¬äºŒè¿›åˆ¶</strong>ï¼Œå…ˆæ˜¯å°†å¯¹åº”çš„æ­£æ•´æ•°è½¬æ¢æˆäºŒè¿›åˆ¶åï¼Œå¯¹äºŒè¿›åˆ¶å–åï¼ˆ1å–0ï¼Œ0å–1ï¼‰ï¼Œç„¶åå¯¹ç»“æœå†åŠ ä¸€</p><p><strong>tip: å’Œ0ç›¸åŠ æ˜¯0ï¼Œ0å’Œ1ç›¸åŠ æ˜¯1ï¼Œ1å’Œ1ç›¸åŠ æ˜¯0ä½†è¦äº§ç”Ÿä¸€ä¸ªè¿›ä½1ï¼ŒåŠ åˆ°ä¸‹ä¸€åˆ—ã€‚å¦‚æœæœ€é«˜ä½ç›¸åŠ åäº§ç”Ÿè¿›ä½ï¼Œåˆ™æœ€åå¾—åˆ°çš„ç»“æœè¦åŠ 1ã€‚</strong></p><p><img src="https://exp-picture.cdn.bcebos.com/906dbbcadce8904832f4a744130e5f204371925f.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo1"></p><p><strong>å°æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶çš„æ–¹æ³•</strong>,å¯¹å°æ•°ç‚¹ä»¥åçš„æ•°ä¹˜ä»¥2ï¼Œæœ‰ä¸€ä¸ªç»“æœå§ï¼Œå–ç»“æœçš„æ•´æ•°éƒ¨åˆ†ï¼ˆä¸æ˜¯1å°±æ˜¯0å–½ï¼‰ï¼Œç„¶åå†ç”¨å°æ•°éƒ¨åˆ†å†ä¹˜ä»¥2ï¼Œå†å–ç»“æœçš„æ•´æ•°éƒ¨åˆ†â€¦â€¦ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å°æ•°éƒ¨åˆ†ä¸º0æˆ–è€…ä½æ•°å·²ç»å¤Ÿäº†å°±OKäº†</p><p><img src="https://exp-picture.cdn.bcebos.com/5e615d715fdb362080321d3aabc5260f88358d5f.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo2"></p><h3 id="äºŒè¿›åˆ¶è½¬åè¿›åˆ¶"><a href="#äºŒè¿›åˆ¶è½¬åè¿›åˆ¶" class="headerlink" title="äºŒè¿›åˆ¶è½¬åè¿›åˆ¶"></a>äºŒè¿›åˆ¶è½¬åè¿›åˆ¶</h3><p><strong>æ•´æ•°äºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶</strong>,é¦–å…ˆå°†äºŒè¿›åˆ¶æ•°è¡¥é½ä½æ•°ï¼Œé¦–ä½å¦‚æœæ˜¯0å°±ä»£è¡¨æ˜¯æ­£æ•´æ•°ï¼Œå¦‚æœé¦–ä½æ˜¯1åˆ™ä»£è¡¨æ˜¯è´Ÿæ•´æ•°ã€‚</p><p><img src="https://exp-picture.cdn.bcebos.com/3931cb413a8ca608e307444fdb8c9bcec7f8fe5f.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo3"></p><p><strong>äºŒè¿›åˆ¶çš„è´Ÿæ•°è½¬ä¸ºåè¿›åˆ¶</strong>,äºŒè¿›åˆ¶è½¬åè¿›åˆ¶è·Ÿåè¿›åˆ¶è½¬äºŒè¿›åˆ¶äº’ä¸ºé€†æ“ä½œï¼›</p><p><img src="https://exp-picture.cdn.bcebos.com/bf6e59704618dfda8cd40c3589214f5792567746.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo4"></p><p><strong>æœ‰å°æ•°çš„äºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶</strong>,å°†äºŒè¿›åˆ¶ä¸­çš„å››ä½æ•°åˆ†åˆ«äºä¸‹è¾¹ï¼ˆå¦‚å›¾9æ‰€ç¤ºï¼‰å¯¹åº”çš„å€¼ç›¸ä¹˜åç›¸åŠ å¾—åˆ°çš„å€¼å³ä¸ºæ¢ç®—åçš„åè¿›åˆ¶</p><p><img src="https://exp-picture.cdn.bcebos.com/6a408cdd3340b6f3c78fd3af12c0affce186ee5f.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1" alt="demo5"></p><h2 id="æŒ‰ä½æ“ä½œç¬¦"><a href="#æŒ‰ä½æ“ä½œç¬¦" class="headerlink" title="æŒ‰ä½æ“ä½œç¬¦"></a>æŒ‰ä½æ“ä½œç¬¦</h2><p><code>æŒ‰ä½æ“ä½œç¬¦ï¼ˆBitwise operatorsï¼‰</code> å°†å…¶æ“ä½œæ•°ï¼ˆoperandsï¼‰å½“ä½œ32ä½çš„æ¯”ç‰¹åºåˆ—ï¼ˆç”±0å’Œ1ç»„æˆï¼‰ï¼Œè€Œä¸æ˜¯åè¿›åˆ¶ã€åå…­è¿›åˆ¶æˆ–å…«è¿›åˆ¶æ•°å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œåè¿›åˆ¶æ•°9ï¼Œç”¨äºŒè¿›åˆ¶è¡¨ç¤ºåˆ™ä¸º1001ã€‚<em>æŒ‰ä½æ“ä½œç¬¦æ“ä½œæ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼ï¼Œä½†æ˜¯è¿”å›å€¼ä¾ç„¶æ˜¯æ ‡å‡†çš„JavaScriptæ•°å€¼</em>ã€‚</p><table><thead><tr><th align="left">è¿ç®—ç¬¦</th><th align="left">ç”¨æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">æŒ‰ä½ä¸ï¼ˆ ANDï¼‰</td><td align="left">a &amp; b</td><td align="left">å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½éƒ½æ˜¯1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</td></tr><tr><td align="left">æŒ‰ä½æˆ–ï¼ˆORï¼‰</td><td align="left">a I b</td><td align="left">å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½è‡³å°‘æœ‰ä¸€ä¸ª1æ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</td></tr><tr><td align="left">æŒ‰ä½å¼‚æˆ–ï¼ˆXORï¼‰</td><td align="left">a ^ b</td><td align="left">å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½æœ‰ä¸”åªæœ‰ä¸€ä¸ª1æ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</td></tr><tr><td align="left">æŒ‰ä½éï¼ˆNOTï¼‰</td><td align="left">~ a</td><td align="left">åè½¬æ“ä½œæ•°çš„æ¯”ç‰¹ä½ï¼Œå³0å˜æˆ1ï¼Œ1å˜æˆ0ã€‚</td></tr><tr><td align="left">å·¦ç§»ï¼ˆLeft shiftï¼‰</td><td align="left">a &lt;&lt; b</td><td align="left">å°† a çš„äºŒè¿›åˆ¶å½¢å¼å‘å·¦ç§» b (&lt; 32) æ¯”ç‰¹ä½ï¼Œå³è¾¹ç”¨0å¡«å……ã€‚</td></tr><tr><td align="left">æœ‰ç¬¦å·å³ç§»</td><td align="left">a &gt;&gt; b</td><td align="left">å°† a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§» b (&lt; 32) ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„ä½ã€‚</td></tr><tr><td align="left">æ— ç¬¦å·å³ç§»</td><td align="left">a &gt;&gt;&gt; b</td><td align="left">å°† a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§» b (&lt; 32) ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„ä½ï¼Œå¹¶ä½¿ç”¨ 0 åœ¨å·¦ä¾§å¡«å……ã€‚</td></tr></tbody></table><h2 id="æœ‰ç¬¦å·32ä½æ•´æ•°"><a href="#æœ‰ç¬¦å·32ä½æ•´æ•°" class="headerlink" title="æœ‰ç¬¦å·32ä½æ•´æ•°"></a>æœ‰ç¬¦å·32ä½æ•´æ•°</h2><p>æ‰€æœ‰çš„æŒ‰ä½æ“ä½œç¬¦çš„æ“ä½œæ•°éƒ½ä¼šè¢«è½¬æˆè¡¥ç ï¼ˆtwoâ€™s complementï¼‰å½¢å¼çš„æœ‰ç¬¦å·32ä½æ•´æ•°ã€‚<br><strong>è¡¥ç å½¢å¼æ˜¯æŒ‡ä¸€ä¸ªæ•°çš„è´Ÿå¯¹åº”å€¼ï¼ˆnegative counterpartï¼‰ï¼ˆå¦‚ 5å’Œ-5ï¼‰ä¸ºæ•°å€¼çš„æ‰€æœ‰æ¯”ç‰¹ä½åè½¬åï¼Œå†åŠ 1ã€‚</strong><br>åè½¬æ¯”ç‰¹ä½å³è¯¥æ•°å€¼è¿›è¡Œâ€™éâ€˜ä½è¿ç®—ï¼Œä¹Ÿå³è¯¥æ•°å€¼çš„åç ã€‚</p><ul><li><p>0 æ˜¯æ‰€æœ‰æ¯”ç‰¹æ•°å­—0ç»„æˆçš„æ•´æ•°ã€‚<br><code>0 (base 10) = 00000000000000000000000000000000 (base 2)</code></p></li><li><p>-1 æ˜¯æ‰€æœ‰æ¯”ç‰¹æ•°å­—1ç»„æˆçš„æ•´æ•°ã€‚<br><code>-1 (base 10) = 11111111111111111111111111111111 (base 2)</code></p></li><li><p>-2147483648ï¼ˆåå…­è¿›åˆ¶å½¢å¼ï¼š-0x80000000ï¼‰æ˜¯é™¤äº†æœ€å·¦è¾¹ä¸º1å¤–ï¼Œå…¶ä»–æ¯”ç‰¹ä½éƒ½ä¸º0çš„æ•´æ•°ã€‚<br><code>-2147483648 (base 10) = 10000000000000000000000000000000 (base 2)</code></p></li><li><p>2147483647ï¼ˆåå…­è¿›åˆ¶å½¢å¼ï¼š0x7fffffffï¼‰æ˜¯é™¤äº†æœ€å·¦è¾¹ä¸º0å¤–ï¼Œå…¶ä»–æ¯”ç‰¹ä½éƒ½ä¸º1çš„æ•´æ•°ã€‚<br><code>2147483647 (base 10) = 01111111111111111111111111111111 (base 2)</code></p></li></ul><p>æ•°å­—<code>-2147483648</code> å’Œ <code>2147483647</code> æ˜¯32ä½æœ‰ç¬¦å·æ•°å­—æ‰€èƒ½è¡¨ç¤ºçš„æœ€å°å’Œæœ€å¤§æ•´æ•°ã€‚</p><h3 id="æŒ‰ä½é€»è¾‘æ“ä½œç¬¦"><a href="#æŒ‰ä½é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="æŒ‰ä½é€»è¾‘æ“ä½œç¬¦"></a>æŒ‰ä½é€»è¾‘æ“ä½œç¬¦</h3><h4 id="amp-ï¼ˆæŒ‰ä½ä¸ï¼‰"><a href="#amp-ï¼ˆæŒ‰ä½ä¸ï¼‰" class="headerlink" title="&amp;ï¼ˆæŒ‰ä½ä¸ï¼‰"></a>&amp;ï¼ˆæŒ‰ä½ä¸ï¼‰</h4><p>å¯¹æ¯å¯¹æ¯”ç‰¹ä½æ‰§è¡Œ<code>ä¸ï¼ˆANDï¼‰</code>æ“ä½œã€‚åªæœ‰ a å’Œ b éƒ½æ˜¯ 1 æ—¶ï¼Œa AND b æ‰æ˜¯ 1ã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ 0 æ‰§è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œå…¶ç»“æœéƒ½ä¸º 0ã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ -1 æ‰§è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œå…¶ç»“æœéƒ½ä¸º xã€‚</p><h4 id="ï¼ˆæŒ‰ä½æˆ–ï¼‰"><a href="#ï¼ˆæŒ‰ä½æˆ–ï¼‰" class="headerlink" title="|ï¼ˆæŒ‰ä½æˆ–ï¼‰"></a>|ï¼ˆæŒ‰ä½æˆ–ï¼‰</h4><p>å¯¹æ¯ä¸€å¯¹æ¯”ç‰¹ä½æ‰§è¡Œ<code>æˆ–ï¼ˆORï¼‰</code>æ“ä½œã€‚å¦‚æœ a æˆ– b ä¸º 1ï¼Œåˆ™ a OR b ç»“æœä¸º 1ã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ 0 è¿›è¡ŒæŒ‰ä½æˆ–æ“ä½œï¼Œå…¶ç»“æœéƒ½æ˜¯ xã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ -1 è¿›è¡ŒæŒ‰ä½æˆ–æ“ä½œï¼Œå…¶ç»“æœéƒ½ä¸º -1ã€‚ã€‚</p><h4 id="ï¼ˆæŒ‰ä½éï¼‰"><a href="#ï¼ˆæŒ‰ä½éï¼‰" class="headerlink" title="~ï¼ˆæŒ‰ä½éï¼‰"></a>~ï¼ˆæŒ‰ä½éï¼‰</h4><p>å¯¹æ¯ä¸€ä¸ªæ¯”ç‰¹ä½æ‰§è¡Œ<code>éï¼ˆNOTï¼‰</code>æ“ä½œã€‚NOT a ç»“æœä¸º a çš„åè½¬ï¼ˆå³åç ï¼‰ã€‚å¯¹ä»»ä¸€æ•°å€¼ x è¿›è¡ŒæŒ‰ä½éæ“ä½œçš„ç»“æœä¸º -(x + 1)</p><h4 id="ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰"><a href="#ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰" class="headerlink" title="^ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰"></a>^ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰</h4><p>å¯¹æ¯ä¸€å¯¹æ¯”ç‰¹ä½æ‰§è¡Œ<code>å¼‚æˆ–ï¼ˆXORï¼‰</code>æ“ä½œã€‚å½“ a å’Œ b ä¸ç›¸åŒæ—¶ï¼Œa XOR b çš„ç»“æœä¸º 1ã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ 0 è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå…¶ç»“æœä¸º xã€‚å°†ä»»ä¸€æ•°å€¼ x ä¸ -1 è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå…¶ç»“æœä¸º ~xã€‚</p><h3 id="æŒ‰ä½ç§»åŠ¨æ“ä½œç¬¦"><a href="#æŒ‰ä½ç§»åŠ¨æ“ä½œç¬¦" class="headerlink" title="æŒ‰ä½ç§»åŠ¨æ“ä½œç¬¦"></a>æŒ‰ä½ç§»åŠ¨æ“ä½œç¬¦</h3><p>æŒ‰ä½ç§»åŠ¨æ“ä½œç¬¦æœ‰ä¸¤ä¸ªæ“ä½œæ•°ï¼š<strong>ç¬¬ä¸€ä¸ªæ˜¯è¦è¢«ç§»åŠ¨çš„æ•°å­—ï¼Œè€Œç¬¬äºŒä¸ªæ˜¯è¦ç§»åŠ¨çš„é•¿åº¦</strong>ã€‚ç§»åŠ¨çš„æ–¹å‘æ ¹æ®æ“ä½œç¬¦çš„ä¸åŒè€Œä¸åŒã€‚</p><h4 id="lt-lt-å·¦ç§»"><a href="#lt-lt-å·¦ç§»" class="headerlink" title="&lt;&lt; (å·¦ç§»)"></a>&lt;&lt; (å·¦ç§»)</h4><p>è¯¥æ“ä½œç¬¦ä¼šå°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å·¦ç§»åŠ¨æŒ‡å®šçš„ä½æ•°ã€‚å‘å·¦è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œå³ä¾§ç”¨ 0 è¡¥å……ã€‚</p><p>For example,<code>9 &lt;&lt; 2</code> yields 36:</p><pre><code class="js">9 (base 10): 00000000000000000000000000001001 (base 2)//--------------------------------9 &lt;&lt; 2 (base 10): 00000000000000000000000000100100 (base 2) = 36 (base 10)</code></pre><p>åœ¨æ•°å­— <code>x</code> ä¸Šå·¦ç§»<code> y</code> æ¯”ç‰¹å¾—åˆ° <code>x * 2y</code>.</p><h4 id="gt-gt-å³ç§»"><a href="#gt-gt-å³ç§»" class="headerlink" title="&gt;&gt; (å³ç§»)"></a>&gt;&gt; (å³ç§»)</h4><p>è¯¥æ“ä½œç¬¦ä¼š<strong>å°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å³ç§»åŠ¨æŒ‡å®šçš„ä½æ•°ã€‚å‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œæ‹·è´æœ€å·¦ä¾§çš„ä½ä»¥å¡«å……å·¦ä¾§ã€‚ç”±äºæ–°çš„æœ€å·¦ä¾§çš„ä½æ€»æ˜¯å’Œä»¥å‰ç›¸åŒï¼Œç¬¦å·ä½æ²¡æœ‰è¢«æ”¹å˜</strong>ã€‚</p><p>ä¾‹å¦‚ï¼Œ <code>9 &gt;&gt; 2</code> å¾—åˆ° 2:</p><pre><code class="js">9 (base 10): 00000000000000000000000000001001 (base 2)//--------------------------------9 &gt;&gt; 2 (base 10): 00000000000000000000000000000010 (base 2) = 2 (base 10)</code></pre><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ <code>-9 &gt;&gt; 2</code> å¾—åˆ° -3ï¼Œå› ä¸ºç¬¦å·è¢«ä¿ç•™äº†ã€‚</p><pre><code class="js"> -9 (base 10): 11111111111111111111111111110111 (base 2)//---------------------------------9 &gt;&gt; 2 (base 10): 11111111111111111111111111111101 (base 2) = -3 (base 10)</code></pre><h4 id="gt-gt-gt-æ— ç¬¦å·å³ç§»"><a href="#gt-gt-gt-æ— ç¬¦å·å³ç§»" class="headerlink" title="&gt;&gt;&gt; (æ— ç¬¦å·å³ç§»)"></a>&gt;&gt;&gt; (æ— ç¬¦å·å³ç§»)</h4><p>è¯¥æ“ä½œç¬¦ä¼šå°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å³ç§»åŠ¨æŒ‡å®šçš„ä½æ•°ã€‚å‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œå·¦ä¾§ç”¨0å¡«å……ã€‚å› ä¸ºç¬¦å·ä½å˜æˆäº† 0ï¼Œæ‰€ä»¥ç»“æœæ€»æ˜¯éè´Ÿçš„</p><p><strong>å¯¹äºéè´Ÿæ•°ï¼Œæœ‰ç¬¦å·å³ç§»å’Œæ— ç¬¦å·å³ç§»æ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœ</strong>ã€‚ä¾‹å¦‚ <code>9 &gt;&gt;&gt; 2</code> å’Œ <code>9 &gt;&gt; 2</code> ä¸€æ ·è¿”å› 2ï¼š</p><pre><code class="js">9 (base 10): 00000000000000000000000000001001 (base 2)// --------------------------------9 &gt;&gt;&gt; 2 (base 10): 00000000000000000000000000000010 (base 2) = 2 (base 10)</code></pre><p><strong>ä½†æ˜¯å¯¹äºè´Ÿæ•°å´ä¸å°½ç›¸åŒ</strong>ã€‚<code>-9 &gt;&gt;&gt; 2</code>äº§ç”Ÿ<code> 1073741821</code> è¿™å’Œ <code>-9 &gt;&gt; 2</code> ä¸åŒï¼š</p><pre><code class="js">-9 (base 10): 11111111111111111111111111110111 (base 2)//---------------------------------9 &gt;&gt;&gt; 2 (base 10): 00111111111111111111111111111101 (base 2) = 1073741821 (base 10)</code></pre><h2 id="ç±»æ•°ç»„å¯¹è±¡"><a href="#ç±»æ•°ç»„å¯¹è±¡" class="headerlink" title="ç±»æ•°ç»„å¯¹è±¡"></a>ç±»æ•°ç»„å¯¹è±¡</h2><p>JavaScriptç±»å‹åŒ–æ•°ç»„æ˜¯ä¸€ç§ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå¹¶æä¾›äº†ä¸€ç§ç”¨äºè®¿é—®åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„æœºåˆ¶ã€‚ </p><p>æ­£å¦‚ä½ å¯èƒ½å·²ç»çŸ¥é“ï¼ŒArray å­˜å‚¨çš„å¯¹è±¡èƒ½åŠ¨æ€å¢å¤šå’Œå‡å°‘ï¼Œå¹¶ä¸”å¯ä»¥å­˜å‚¨ä»»ä½•JavaScriptå€¼ã€‚JavaScriptå¼•æ“ä¼šåšä¸€äº›å†…éƒ¨ä¼˜åŒ–ï¼Œä»¥ä¾¿å¯¹æ•°ç»„çš„æ“ä½œå¯ä»¥å¾ˆå¿«ã€‚</p><p>ç„¶è€Œï¼Œéšç€Webåº”ç”¨ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼Œå°¤å…¶ä¸€äº›æ–°å¢åŠ çš„åŠŸèƒ½ä¾‹å¦‚ï¼š<code>éŸ³é¢‘è§†é¢‘ç¼–è¾‘ï¼Œè®¿é—®WebSocketsçš„åŸå§‹æ•°æ®</code>ç­‰ï¼Œå¾ˆæ˜æ˜¾æœ‰äº›æ—¶å€™å¦‚æœä½¿ç”¨JavaScriptä»£ç å¯ä»¥å¿«é€Ÿæ–¹ä¾¿åœ°é€šè¿‡<strong>ç±»å‹åŒ–æ•°ç»„æ¥æ“ä½œåŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®</strong>å°†ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚</p><p>ç±»å‹æ•°ç»„ä¸ç­‰äºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨<code>Array.isArray</code>å¯ä»¥åˆ¤æ–­å‡ºç±»å‹æ•°ç»„ä¸º<code>false</code></p><h3 id="ç¼“å†²å’Œè§†å›¾ï¼šç±»å‹æ•°ç»„æ¶æ„"><a href="#ç¼“å†²å’Œè§†å›¾ï¼šç±»å‹æ•°ç»„æ¶æ„" class="headerlink" title="ç¼“å†²å’Œè§†å›¾ï¼šç±»å‹æ•°ç»„æ¶æ„"></a>ç¼“å†²å’Œè§†å›¾ï¼šç±»å‹æ•°ç»„æ¶æ„</h3><p>ä¸ºäº†è¾¾åˆ°æœ€å¤§çš„çµæ´»æ€§å’Œæ•ˆç‡ï¼ŒJavaScript ç±»å‹æ•°ç»„ï¼ˆTyped Arraysï¼‰å°†å®ç°æ‹†åˆ†ä¸º<strong>ç¼“å†²</strong>å’Œ<strong>è§†å›¾</strong>ä¸¤éƒ¨åˆ†ã€‚</p><h4 id="ArrayBuffer"><a href="#ArrayBuffer" class="headerlink" title="ArrayBuffer"></a>ArrayBuffer</h4><p><code>ArrayBuffer</code> æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ä½ ä¸èƒ½ç›´æ¥æ“çºµä¸€ä¸ª<code>ArrayBuffer</code>ä¸­çš„å†…å®¹ï¼›ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„çš„è§†å›¾æˆ–ä¸€ä¸ªæè¿°ç¼“å†²æ•°æ®æ ¼å¼çš„<code>DataView</code>ï¼Œä½¿ç”¨å®ƒä»¬æ¥è¯»å†™ç¼“å†²åŒºä¸­çš„å†…å®¹.</p><h4 id="ç±»å‹æ•°ç»„è§†å›¾"><a href="#ç±»å‹æ•°ç»„è§†å›¾" class="headerlink" title="ç±»å‹æ•°ç»„è§†å›¾"></a>ç±»å‹æ•°ç»„è§†å›¾</h4><p>ç±»å‹åŒ–æ•°ç»„è§†å›¾å…·æœ‰è‡ªæè¿°æ€§çš„åå­—å’Œæ‰€æœ‰å¸¸ç”¨çš„æ•°å€¼ç±»å‹åƒ<code>Int8</code>ï¼Œ<code>Uint32</code>ï¼Œ<code>Float64</code> ç­‰ç­‰ã€‚æœ‰ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ•°ç»„<code>Uint8ClampedArray</code>ã€‚å®ƒä»…æ“ä½œ0åˆ°255ä¹‹é—´çš„æ•°å€¼ã€‚</p><h4 id="æ•°æ®è§†å›¾"><a href="#æ•°æ®è§†å›¾" class="headerlink" title="æ•°æ®è§†å›¾"></a>æ•°æ®è§†å›¾</h4><p><code>DataView</code> æ˜¯ä¸€ç§åº•å±‚æ¥å£ï¼Œå®ƒæä¾›æœ‰å¯ä»¥æ“ä½œç¼“å†²åŒºä¸­ä»»æ„æ•°æ®çš„è¯»å†™æ¥å£ã€‚è¿™å¯¹æ“ä½œä¸åŒç±»å‹æ•°æ®çš„åœºæ™¯å¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚ï¼šç±»å‹åŒ–æ•°ç»„è§†å›¾éƒ½æ˜¯è¿è¡Œåœ¨æœ¬åœ°å­—èŠ‚åºæ¨¡å¼(å‚è€ƒ Endianness)ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>DataView</code> æ¥æ§åˆ¶å­—èŠ‚åºã€‚é»˜è®¤æ˜¯å¤§ç«¯å­—èŠ‚åº(Big-endian)ï¼Œä½†å¯ä»¥è°ƒç”¨è¯»å†™æ¥å£æ”¹ä¸ºå°ç«¯å­—èŠ‚åº(Little-endian)ã€‚</p><h3 id="ä½¿ç”¨ç±»å‹æ•°ç»„çš„Web-API"><a href="#ä½¿ç”¨ç±»å‹æ•°ç»„çš„Web-API" class="headerlink" title="ä½¿ç”¨ç±»å‹æ•°ç»„çš„Web API"></a>ä½¿ç”¨ç±»å‹æ•°ç»„çš„Web API</h3><p><code>FileReader.prototype.readAsArrayBuffer()</code><br><code>FileReader.prototype.readAsArrayBuffer()</code> è¯»å–å¯¹åº”çš„<code>Blob</code> æˆ– <code>File</code>çš„å†…å®¹</p><p><code>XMLHttpRequest.prototype.send()</code><br><code>XMLHttpRequest</code> å®ä¾‹çš„ send() æ–¹æ³•ç°åœ¨ä½¿ç”¨æ”¯æŒç±»å‹åŒ–æ•°ç»„å’Œ <code>ArrayBuffer</code> å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p><p><code>ImageData.data</code><br>æ˜¯ä¸€ä¸ª <code>Uint8ClampedArray</code> å¯¹è±¡ï¼Œç”¨æ¥æè¿°åŒ…å«æŒ‰ç…§RGBAåºåˆ—çš„é¢œè‰²æ•°æ®çš„ä¸€ç»´æ•°ç»„ï¼Œå…¶å€¼çš„èŒƒå›´åœ¨0åˆ°255ï¼ˆåŒ…å«255ï¼‰ä¹‹é—´ã€‚</p><p><code>ImageData</code> æ¥å£æè¿° <code>&lt;canvas&gt;</code> å…ƒç´ çš„ä¸€ä¸ªéšå«åƒç´ æ•°æ®çš„åŒºåŸŸã€‚ä½¿ç”¨ <code>ImageData()</code> æ„é€ å‡½æ•°åˆ›å»ºæˆ–è€…ä½¿ç”¨å’Œ <code>canvas</code> åœ¨ä¸€èµ·çš„ <code>CanvasRenderingContext2D</code> å¯¹è±¡çš„åˆ›å»ºæ–¹æ³•ï¼š <code>createImageData() å’Œ getImageData()</code>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>putImageData()</code> è®¾ç½® <code>canvas</code> çš„ä¸€éƒ¨åˆ†ã€‚</p><h2 id="ArrayBuffer-1"><a href="#ArrayBuffer-1" class="headerlink" title="ArrayBuffer"></a>ArrayBuffer</h2><p><strong>ArrayBufferåˆç§°ç±»å‹åŒ–æ•°ç»„</strong>ã€‚</p><blockquote><p>javascriptæ•°ç»„ï¼ˆArrayï¼‰é•¿ä»€ä¹ˆæ ·å­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘è¯´è¯´å·®åˆ«åº”è¯¥å°±å¯ä»¥äº†è§£è¿™ç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆäº†ï¼</p></blockquote><ul><li>æ•°ç»„é‡Œé¢å¯ä»¥æ”¾æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ä»¥åŠå¯¹è±¡å’Œæ•°ç»„ç­‰ï¼Œ<code>ArrayBuffer</code>æ”¾0å’Œ1ç»„æˆçš„äºŒè¿›åˆ¶æ•°æ®</li><li>æ•°ç»„æ”¾åœ¨å †ä¸­ï¼Œ<code>ArrayBuffer</code>åˆ™æŠŠæ•°æ®æ”¾åœ¨æ ˆä¸­ï¼ˆæ‰€ä»¥å–æ•°æ®æ—¶åè€…å¿«ï¼‰</li><li><code>ArrayBuffer</code>åˆå§‹åŒ–åå›ºå®šå¤§å°ï¼Œæ•°ç»„åˆ™å¯ä»¥è‡ªç”±å¢å‡ã€‚(å‡†ç¡®çš„è¯´ï¼Œè§†å›¾æ‰åº”è¯¥è·Ÿæ•°ç»„æ¥æ¯”è¾ƒè¿™ä¸ªç‰¹ç‚¹)</li></ul><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><pre><code class="js">// new ArrayBuffer(Bytelength);var arraybuffer = new ArrayBuffer(8);//ç±»æ–¹æ³•ArrayBuffer.isView() åˆ¤æ–­æŸå¯¹è±¡æ˜¯å¦ä¸º è§†å›¾(è¿™æ˜¯ä»€ä¹ˆï¼Ÿå¾€ä¸‹çœ‹)var int8a = new Int8Array(arraybuffer);ArrayBuffer.isView(int8a)  //return true//ç±»å±æ€§ArrayBuffer.length é»˜è®¤å€¼1ï¼Œæš‚æœªå‘ç°ç”¨å¤„ArrayBuffer.length //return 1//è¿”å›çš„å¯¹è±¡å…·æœ‰byteLengthå±æ€§ å€¼ä¸ºå‚æ•°Bytelengtharraybuffer.byteLength //return 8</code></pre><p>å¦‚ä¸Šæ‰€è¯‰ï¼šå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä»…éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå³å­—èŠ‚æ•°ã€‚</p><p><code>å­—èŠ‚(Byte)</code>ï¼šå­˜å‚¨ç©ºé—´çš„åŸºæœ¬è®¡é‡å•ä½ã€‚ä¸€ä¸ªå­—èŠ‚ç­‰äº8ä½(bit)ï¼Œæ¯ä¸€ä½ç”¨0æˆ–1è¡¨ç¤ºã€‚</p><h3 id="è§†å›¾ï¼š"><a href="#è§†å›¾ï¼š" class="headerlink" title="è§†å›¾ï¼š"></a>è§†å›¾ï¼š</h3><p><code>ArrayBuffer</code>å¯¹è±¡å¹¶æ²¡æœ‰æä¾›ä»»ä½•è¯»å†™å†…å­˜çš„æ–¹æ³•ï¼Œè€Œæ˜¯å…è®¸åœ¨å…¶ä¸Šæ–¹å»ºç«‹â€œè§†å›¾â€ï¼Œä»è€Œæ’å…¥ä¸è¯»å–å†…å­˜ä¸­çš„æ•°æ®ã€‚å¦‚ä¸Šï¼šæˆ‘ä»¬åœ¨å†…å­˜ä¸­åˆ†é…äº†16ä¸ªæ ¼å­ä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ’åˆ†å‡ºAè§†å›¾ä¸Bè§†å›¾æ¥ç“œåˆ†è¿™16ä¸ªæ ¼å­çš„è¯ï¼Œä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="js">var arraybuffer = new ArrayBuffer(8);var aView = new Int8Array(arraybuffer,0,1);var bView = new Int8Array(arraybuffer,1,1);aView[0] = 1;  //äºŒè¿›åˆ¶00000001bView[0] = 2;  //äºŒè¿›åˆ¶00000010</code></pre><table><thead><tr><th align="left">è§†å›¾ç±»å‹</th><th align="left">æ•°æ®ç±»å‹</th><th align="left">å ç”¨ä½æ•°</th><th align="left">å ç”¨å­—èŠ‚</th><th align="left">æœ‰æ— ç¬¦å·</th></tr></thead><tbody><tr><td align="left">Int8Array</td><td align="left">æ•´æ•°</td><td align="left">8</td><td align="left">1</td><td align="left">æœ‰</td></tr><tr><td align="left">Uint8Array</td><td align="left">æ•´æ•°</td><td align="left">8</td><td align="left">1</td><td align="left">æ— </td></tr><tr><td align="left">Uint8ClampedArray</td><td align="left">æ•´æ•°</td><td align="left">8</td><td align="left">1</td><td align="left">æ— </td></tr><tr><td align="left">Int16Array</td><td align="left">æ•´æ•°</td><td align="left">16</td><td align="left">2</td><td align="left">æœ‰</td></tr><tr><td align="left">Uint16Array</td><td align="left">æ•´æ•°</td><td align="left">16</td><td align="left">2</td><td align="left">æ— </td></tr><tr><td align="left">Int32Array</td><td align="left">æ•´æ•°</td><td align="left">32</td><td align="left">4</td><td align="left">æœ‰</td></tr><tr><td align="left">Uint32Array</td><td align="left">æ•´æ•°</td><td align="left">32</td><td align="left">4</td><td align="left">æ— </td></tr><tr><td align="left">Float32Array</td><td align="left">æµ®ç‚¹æ•°</td><td align="left">32</td><td align="left">4</td><td align="left">\</td></tr><tr><td align="left">Float64Array</td><td align="left">æµ®ç‚¹æ•°</td><td align="left">64</td><td align="left">8</td><td align="left">\</td></tr></tbody></table><p> <strong>æœ‰æ— ç¬¦å·åˆ™è¡¨ç¤ºè¯¥ç±»æ•°æ®ç±»å‹æ˜¯å¦åŒ…å«è´Ÿæ•°</strong>ï¼Œå¦‚ï¼šInt8Arrayä»£è¡¨8ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶èŒƒå›´ä¸º -128<del>127ï¼Œè€ŒUint8Arrayä»£è¡¨8ä½æ— ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´æ˜¯ 0</del>255ã€‚</p><h3 id="DataViewè§†å›¾"><a href="#DataViewè§†å›¾" class="headerlink" title="DataViewè§†å›¾"></a>DataViewè§†å›¾</h3><p>ä¸ºäº†è§£å†³å„ç§ç¡¬ä»¶è®¾å¤‡ã€æ•°æ®ä¼ è¾“ç­‰å¯¹é»˜è®¤å­—èŠ‚åºçš„è®¾å®šä¸ä¸€è€Œå¯¼è‡´è§£ç æ—¶å€™ä¼šå‘ç”Ÿçš„æ··ä¹±é—®é¢˜ï¼Œjavascriptæä¾›äº†<code>DataView</code>ç±»å‹çš„è§†å›¾æ¥è®©å¼€å‘è€…åœ¨å¯¹å†…å­˜è¿›è¡Œè¯»å†™æ—¶æ‰‹åŠ¨è®¾å®šå­—èŠ‚åºçš„ç±»å‹ã€‚</p><p>ï¼ˆä¸€ï¼‰DataViewæ„é€ å‡½æ•°</p><pre><code class="js">//new DataView(arraybuffer,byteOffset [, byteLength])var arraybuffer = new ArrayBuffer(8);var dv1 = new DataView(arraybuffer);    //0-7var dv2 = new DataView(arraybuffer,2);    //2-7var dv3 = new DataView(arraybuffer,3,2);    //3-4</code></pre><p>ï¼ˆäºŒï¼‰DataViewå®ä¾‹åŒ–åçš„å¯¹è±¡æ‰€å…·æœ‰çš„åŠŸèƒ½</p><table><thead><tr><th align="left">Read</th><th align="left">Write</th></tr></thead><tbody><tr><td align="left">getInt8()</td><td align="left">setInt8()</td></tr><tr><td align="left">getUint8()</td><td align="left">setUint8()</td></tr><tr><td align="left">getInt16()</td><td align="left">setInt16()</td></tr><tr><td align="left">getUint16()</td><td align="left">setUint16()</td></tr><tr><td align="left">getInt32()</td><td align="left">setInt32()</td></tr><tr><td align="left">getUint32()</td><td align="left">setUint32()</td></tr><tr><td align="left">getFloat32()</td><td align="left">setFloat32()</td></tr><tr><td align="left">getFloat64()</td><td align="left">setFloat64()</td></tr></tbody></table><p>ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼æ¥<strong>åˆ¤æ–­è¿è¡Œå½“å‰javascriptçš„æœºå™¨ä½¿ç”¨å“ªä¸€ç§å­—èŠ‚åº</strong></p><pre><code class="js">var littleEndian = (function() &#123;  var buffer = new ArrayBuffer(2);  new DataView(buffer).setInt16(0, 256, true);  return new Int16Array(buffer)[0] === 256;&#125;)();console.log(littleEndian); // true ----&gt;littleEndian                            //false ----&gt;BigEndian</code></pre><h3 id="ArrayBufferä¸å­—ç¬¦ä¸²"><a href="#ArrayBufferä¸å­—ç¬¦ä¸²" class="headerlink" title="ArrayBufferä¸å­—ç¬¦ä¸²"></a>ArrayBufferä¸å­—ç¬¦ä¸²</h3><p>javascriptçš„å­—ç¬¦ä¸²ä½¿ç”¨<code>UTF-16</code>ç¼–ç çš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥åšï¼š</p><pre><code class="js">function Uint162Str(arraybuffer)&#123;  return String.fromCharCode.apply(null,new Uint16Array(arraybuffer));&#125;function Str2Uint16(str)&#123;  //å‡è®¾å­—ç¬¦ä¸²â€abcâ€œ length=3,ä½¿ç”¨16ä½ï¼Œåˆ™æ¯ä¸€ä¸ªå­—æ¯å æ®2å­—èŠ‚ï¼Œæ€»å­—èŠ‚ä¸ºlengthä¹˜ä»¥2  var arraybuffer =new ArrayBuffer(str.length*2);  var view = new Uint16Array(arraybuffer);  for(var i=0,l=str.length;i&lt;l;i++)&#123;      view[i] = str.charCodeAt(i);  &#125;  return view;&#125;    </code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h2 id=&quot;å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬&quot;&gt;&lt;a href=&quot;#å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬&quot; class=&quot;headerlink&quot; title=&quot;å…ˆäº†è§£ä¸‹åè¿›åˆ¶ä¸äºŒè¿›åˆ¶äº’è½¬&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ JavaScriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹å°è£…å¤šæ€ç»§æ‰¿</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/28/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0JavaScript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E5%B0%81%E8%A3%85%E5%A4%9A%E6%80%81%E7%BB%A7%E6%89%BF/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/28/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0JavaScript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E5%B0%81%E8%A3%85%E5%A4%9A%E6%80%81%E7%BB%A7%E6%89%BF/</id>
    <published>2020-09-28T05:36:18.000Z</published>
    <updated>2020-09-28T06:19:51.422Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://juejin.im/post/6844903480868470798">åŸæ–‡åœ°å€</a></p><p><img src="https://user-gold-cdn.xitu.io/2017/6/8/99f977fcc9ad71ee0c197cbdaecd52b8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="é¢å‘å¯¹è±¡ç¼–ç¨‹"></p><p>å…ˆä¸Šä¸€å¼ å›¾ï¼Œå¯ä»¥å¯¹é¢å‘å¯¹è±¡æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼Œç„¶è€Œä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡å‘¢ï¼Œç”¨javaä¸­çš„ä¸€å¥ç»å…¸è¯­å¥æ¥è¯´å°±æ˜¯ï¼šä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡ã€‚é¢å‘å¯¹è±¡çš„æ€æƒ³ä¸»è¦æ˜¯ä»¥å¯¹è±¡ä¸ºä¸»ï¼Œå°†ä¸€ä¸ªé—®é¢˜æŠ½è±¡å‡ºå…·ä½“çš„å¯¹è±¡ï¼Œå¹¶ä¸”å°†æŠ½è±¡å‡ºæ¥çš„å¯¹è±¡å’Œå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å°è£…æˆä¸€ä¸ªç±»ã€‚</p><blockquote><p>é¢å‘å¯¹è±¡æ˜¯æŠŠ<strong>æ„æˆé—®é¢˜äº‹åŠ¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡</strong>ï¼Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†å®Œæˆä¸€ä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯ä¸ºäº†æå™æŸä¸ªäº‹ç‰©åœ¨æ•´ä¸ªè§£å†³é—®é¢˜çš„æ­¥éª¤ä¸­çš„è¡Œä¸ºã€‚</p></blockquote><h2 id="é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«"><a href="#é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«" class="headerlink" title="é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«"></a>é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«</h2><p>é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹æ˜¯ä¸¤ç§ä¸åŒçš„ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå¬åˆ°ä¸¤è€…çš„æ¯”è¾ƒï¼Œåˆšå¼€å§‹ç¼–ç¨‹çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†åº”è¯¥éƒ½æ˜¯ä½¿ç”¨çš„é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹ï¼Œä½†æ˜¯éšç€æˆ‘ä»¬çš„æˆé•¿ï¼Œè¿˜æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³æ¯”è¾ƒå¥½ä¸€ç‚¹~å…¶å®é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹å¹¶ä¸æ˜¯å®Œå…¨ç›¸å¯¹çš„ï¼Œä¹Ÿå¹¶ä¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚æˆ‘è®¤ä¸ºé¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„ä¸»è¦åŒºåˆ«æ˜¯é¢å‘è¿‡ç¨‹ä¸»è¦æ˜¯ä»¥åŠ¨è¯ä¸ºä¸»ï¼Œè§£å†³é—®é¢˜çš„æ–¹å¼æ˜¯æŒ‰ç…§é¡ºåºä¸€æ­¥ä¸€æ­¥è°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚è€Œé¢å‘å¯¹è±¡ä¸»è¦æ˜¯ä»¥åè¯ä¸ºä¸»ï¼Œå°†é—®é¢˜æŠ½è±¡å‡ºå…·ä½“çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨è§£å†³é—®é¢˜çš„æ—¶å€™æ˜¯å°†ä¸åŒçš„å¯¹è±¡ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚æ‰€ä»¥è¯´é¢å‘å¯¹è±¡çš„å¥½å¤„å°±æ˜¯å¯æ‰©å±•æ€§æ›´å¼ºä¸€äº›ï¼Œè§£å†³äº†ä»£ç é‡ç”¨æ€§çš„é—®é¢˜ã€‚</p><ul><li>é¢å‘è¿‡ç¨‹å°±æ˜¯åˆ†æå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶å<strong>ç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°</strong>ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸€ä¸ªä¸€ä¸ªä¾æ¬¡è°ƒç”¨å°±å¯ä»¥äº†ã€‚</li><li>é¢å‘å¯¹è±¡æ˜¯æŠŠ<strong>æ„æˆé—®é¢˜äº‹åŠ¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡ï¼Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†å®Œæˆä¸€ä¸ªæ­¥éª¤</strong>ï¼Œè€Œæ˜¯ä¸ºäº†æå™æŸä¸ªäº‹ç‰©åœ¨æ•´ä¸ªè§£å†³é—®é¢˜çš„æ­¥éª¤ä¸­çš„è¡Œä¸ºã€‚</li></ul><p>æœ‰ä¸€ä¸ªçŸ¥ä¹çš„é«˜ç¥¨å›ç­”å¾ˆæœ‰æ„æ€ï¼Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹~</p><blockquote><p>é¢å‘å¯¹è±¡ï¼š ç‹—.åƒ(å±)<br>é¢å‘è¿‡ç¨‹ï¼š åƒ.(ç‹—,å±)</p></blockquote><p>å…·ä½“çš„å®ç°æˆ‘ä»¬çœ‹ä¸€ä¸‹æœ€ç»å…¸çš„â€œ<code>æŠŠå¤§è±¡æ”¾å†°ç®±</code>â€è¿™ä¸ªé—®é¢˜</p><h3 id="é¢å‘è¿‡ç¨‹çš„è§£å†³æ–¹æ³•"><a href="#é¢å‘è¿‡ç¨‹çš„è§£å†³æ–¹æ³•" class="headerlink" title="é¢å‘è¿‡ç¨‹çš„è§£å†³æ–¹æ³•"></a>é¢å‘è¿‡ç¨‹çš„è§£å†³æ–¹æ³•</h3><p>åœ¨é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ–¹å¼ä¸­å®ç°â€œæŠŠå¤§è±¡æ”¾å†°ç®±â€è¿™ä¸ªé—®é¢˜ç­”æ¡ˆæ˜¯è€³ç†Ÿèƒ½è¯¦çš„ï¼Œä¸€å…±åˆ†ä¸‰æ­¥ï¼š</p><ul><li>å¼€é—¨ï¼ˆå†°ç®±ï¼‰ï¼›</li><li>è£…è¿›ï¼ˆå†°ç®±ï¼Œå¤§è±¡ï¼‰ï¼›</li><li>å…³é—¨ï¼ˆå†°ç®±ï¼‰ã€‚é¢å‘å¯¹è±¡çš„è§£å†³æ–¹æ³•</li></ul><h3 id="é¢å‘å¯¹è±¡çš„è§£å†³æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡çš„è§£å†³æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡çš„è§£å†³æ–¹æ³•"></a>é¢å‘å¯¹è±¡çš„è§£å†³æ–¹æ³•</h3><ul><li>å†°ç®±.å¼€é—¨ï¼ˆï¼‰</li><li>å†°ç®±.è£…è¿›ï¼ˆå¤§è±¡ï¼‰</li><li>å†°ç®±.å…³é—¨ï¼ˆï¼‰</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„ä¾§é‡ç‚¹æ˜¯ä¸åŒçš„ï¼Œ<strong>é¢å‘è¿‡ç¨‹æ˜¯ä»¥åŠ¨è¯ä¸ºä¸»</strong>ï¼Œå®Œæˆä¸€ä¸ªäº‹ä»¶å°±æ˜¯å°†ä¸åŒçš„åŠ¨ä½œå‡½æ•°æŒ‰é¡ºåºè°ƒç”¨ã€‚<strong>é¢å‘å¯¹è±¡æ˜¯ä»¥ä¸»è°“ä¸ºä¸»</strong>ã€‚å°†ä¸»è°“çœ‹æˆä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ï¼Œç„¶åå¯¹è±¡æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå†°ç®±æœ‰è‡ªå·±çš„idå±æ€§ï¼Œæœ‰å¼€é—¨çš„æ–¹æ³•ã€‚ç„¶åå°±å¯ä»¥ç›´æ¥è°ƒç”¨å†°ç®±çš„å¼€é—¨æ–¹æ³•ç»™å…¶ä¼ å…¥ä¸€ä¸ªå‚æ•°å¤§è±¡å°±å¯ä»¥äº†ã€‚ç®€å•çš„ä¾‹å­é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„å¥½å¤„è¿˜ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚</p><h3 id="äº”å­æ£‹ä¾‹å­"><a href="#äº”å­æ£‹ä¾‹å­" class="headerlink" title="äº”å­æ£‹ä¾‹å­"></a>äº”å­æ£‹ä¾‹å­</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæˆ‘è®¤ä¸ºæ¯”è¾ƒèƒ½å¤Ÿè¯´æ˜ä¸¤è€…åŒºåˆ«çš„ä¸€ä¸ªæ —å­~ï¼šä¾‹å¦‚äº”å­æ£‹ï¼Œé¢å‘è¿‡ç¨‹çš„è®¾è®¡æ€è·¯å°±æ˜¯é¦–å…ˆåˆ†æé—®é¢˜çš„æ­¥éª¤ï¼š</p><ol><li>å¼€å§‹æ¸¸æˆ</li><li>é»‘å­å…ˆèµ°</li><li>ç»˜åˆ¶ç”»é¢</li><li>åˆ¤æ–­è¾“èµ¢</li><li>è½®åˆ°ç™½å­</li><li>ç»˜åˆ¶ç”»é¢</li><li>åˆ¤æ–­è¾“èµ¢</li><li>è¿”å›æ­¥éª¤2</li></ol><p>æŠŠä¸Šé¢æ¯ä¸ªæ­¥éª¤ç”¨åˆ†åˆ«çš„å‡½æ•°æ¥å®ç°ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚<br>è€Œé¢å‘å¯¹è±¡çš„è®¾è®¡åˆ™æ˜¯ä»å¦å¤–çš„æ€è·¯æ¥è§£å†³é—®é¢˜ã€‚æ•´ä¸ªäº”å­æ£‹å¯ä»¥åˆ†ä¸º </p><ul><li>é»‘ç™½åŒæ–¹ï¼Œè¿™ä¸¤æ–¹çš„è¡Œä¸ºæ˜¯ä¸€æ¨¡ä¸€æ ·çš„</li><li>æ£‹ç›˜ç³»ç»Ÿï¼Œè´Ÿè´£ç»˜åˆ¶ç”»é¢</li></ul><p>ç¬¬ä¸€ç±»å¯¹è±¡ï¼ˆç©å®¶å¯¹è±¡ï¼‰è´Ÿè´£æ¥å—ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å‘ŠçŸ¥ç¬¬äºŒç±»å¯¹è±¡ï¼ˆæ£‹ç›˜å¯¹è±¡ï¼‰æ£‹å­å¸ƒå±€çš„å˜åŒ–ï¼Œæ£‹ç›˜å¯¹è±¡æ¥æ”¶åˆ°äº†æ£‹å­çš„iå˜åŒ–å°±è¦è´Ÿè´£åœ¨å±å¹•ä¸Šé¢æ˜¾ç¤ºå‡ºè¿™ç§å˜åŒ–ï¼ŒåŒæ—¶åˆ©ç”¨ç¬¬ä¸‰ç±»å¯¹è±¡ï¼ˆè§„åˆ™ç³»ç»Ÿï¼‰æ¥å¯¹æ£‹å±€è¿›è¡Œåˆ¤å®šã€‚<br>å¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºï¼Œé¢å‘å¯¹è±¡æ˜¯ä»¥åŠŸèƒ½æ¥åˆ’åˆ†é—®é¢˜ï¼Œè€Œä¸æ˜¯æ­¥éª¤ã€‚åŒæ ·æ˜¯ç»˜åˆ¶æ£‹å±€ï¼Œè¿™æ ·çš„è¡Œä¸ºåœ¨é¢å‘è¿‡ç¨‹çš„è®¾è®¡ä¸­åˆ†æ•£åœ¨äº†æ€»å¤šæ­¥éª¤ä¸­ï¼Œå¾ˆå¯èƒ½å‡ºç°ä¸åŒçš„ç»˜åˆ¶ç‰ˆæœ¬ï¼Œå› ä¸ºé€šå¸¸è®¾è®¡äººå‘˜ä¼šè€ƒè™‘åˆ°å®é™…æƒ…å†µè¿›è¡Œå„ç§å„æ ·çš„ç®€åŒ–ã€‚è€Œé¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œç»˜å›¾åªå¯èƒ½åœ¨æ£‹ç›˜å¯¹è±¡ä¸­å‡ºç°ï¼Œä»è€Œä¿è¯äº†ç»˜å›¾çš„ç»Ÿä¸€ã€‚<br>åŠŸèƒ½ä¸Šçš„ç»Ÿä¸€ä¿è¯äº†é¢å‘å¯¹è±¡è®¾è®¡çš„å¯æ‰©å±•æ€§ã€‚æ¯”å¦‚æˆ‘è¦åŠ å…¥æ‚”æ£‹çš„åŠŸèƒ½ï¼Œå¦‚æœè¦æ”¹åŠ¨é¢å‘è¿‡ç¨‹çš„è®¾è®¡ï¼Œé‚£ä¹ˆä»è¾“å…¥åˆ°åˆ¤æ–­åˆ°æ˜¾ç¤ºè¿™ä¸€è¿ä¸²çš„æ­¥éª¤éƒ½è¦æ”¹åŠ¨ï¼Œç”šè‡³æ­¥éª¤ä¹‹é—´çš„å¾ªåºéƒ½è¦è¿›è¡Œå¤§è§„æ¨¡è°ƒæ•´ã€‚å¦‚æœæ˜¯é¢å‘å¯¹è±¡çš„è¯ï¼Œåªç”¨æ”¹åŠ¨æ£‹ç›˜å¯¹è±¡å°±è¡Œäº†ï¼Œæ£‹ç›˜ç³»ç»Ÿä¿å­˜äº†é»‘ç™½åŒæ–¹çš„æ£‹è°±ï¼Œç®€å•å›æº¯å°±å¯ä»¥äº†ï¼Œè€Œæ˜¾ç¤ºå’Œè§„åˆ™åˆ¤æ–­åˆ™ä¸ç”¨é¡¾åŠï¼ŒåŒæ—¶æ•´ä¸ªå¯¹å¯¹è±¡åŠŸèƒ½çš„è°ƒç”¨é¡ºåºéƒ½æ²¡æœ‰å˜åŒ–ï¼Œæ”¹åŠ¨åªæ˜¯å±€éƒ¨çš„ã€‚<br>å†æ¯”å¦‚æˆ‘è¦æŠŠè¿™ä¸ªäº”å­æ£‹æ¸¸æˆæ”¹ä¸ºå›´æ£‹æ¸¸æˆï¼Œå¦‚æœä½ æ˜¯é¢å‘è¿‡ç¨‹è®¾è®¡ï¼Œé‚£ä¹ˆäº”å­æ£‹çš„è§„åˆ™å°±åˆ†å¸ƒåœ¨äº†ä½ çš„ç¨‹åºçš„æ¯ä¸€ä¸ªè§’è½ï¼Œè¦æ”¹åŠ¨è¿˜ä¸å¦‚é‡å†™ã€‚ä½†æ˜¯å¦‚æœä½ å½“åˆå°±æ˜¯é¢å‘å¯¹è±¡çš„è®¾è®¡ï¼Œé‚£ä¹ˆä½ åªç”¨æ”¹åŠ¨è§„åˆ™å¯¹è±¡å°±å¯ä»¥äº†ï¼Œäº”å­æ£‹å’Œå›´æ£‹çš„åŒºåˆ«ä¸å°±æ˜¯è§„åˆ™å—ï¼Ÿï¼ˆå½“ç„¶æ£‹ç›˜å¤§å°å¥½åƒä¹Ÿä¸ä¸€æ ·ï¼Œä½†æ˜¯ä½ ä¼šè§‰å¾—è¿™æ˜¯ä¸€ä¸ªéš¾é¢˜å—ï¼Ÿç›´æ¥åœ¨æ£‹ç›˜å¯¹è±¡ä¸­è¿›è¡Œä¸€ç•ªå°æ”¹åŠ¨å°±å¯ä»¥äº†ã€‚ï¼‰è€Œä¸‹æ£‹çš„å¤§è‡´æ­¥éª¤ä»é¢å‘å¯¹è±¡çš„è§’åº¦æ¥çœ‹æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚<br>å½“ç„¶ï¼Œè¦è¾¾åˆ°æ”¹åŠ¨åªæ˜¯å±€éƒ¨çš„éœ€è¦è®¾è®¡çš„äººæœ‰è¶³å¤Ÿçš„ç»éªŒï¼Œä½¿ç”¨å¯¹è±¡ä¸èƒ½ä¿è¯ä½ çš„ç¨‹åºå°±æ˜¯é¢å‘å¯¹è±¡ï¼Œåˆå­¦è€…æˆ–è€…å¾ˆè¹©è„šçš„ç¨‹åºå‘˜å¾ˆå¯èƒ½ä»¥é¢å‘å¯¹è±¡ä¹‹è™šè€Œè¡Œé¢å‘è¿‡ç¨‹ä¹‹å®ï¼Œè¿™æ ·è®¾è®¡å‡ºæ¥çš„æ‰€è°“é¢å‘å¯¹è±¡çš„ç¨‹åºå¾ˆéš¾æœ‰è‰¯å¥½çš„å¯ç§»æ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§ç‰¹æ€§ï¼Œ<code>å°è£…ã€ç»§æ‰¿å’Œå¤šæ€</code>ã€‚å¯¹äºES5æ¥è¯´ï¼Œæ²¡æœ‰<code>class</code>çš„æ¦‚å¿µï¼Œå¹¶ä¸”ç”±äºjsçš„å‡½æ•°çº§ä½œç”¨åŸŸï¼ˆåœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡åœ¨å‡½æ•°å¤–è®¿é—®ä¸åˆ°ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿ <code>class</code>çš„æ¦‚å¿µï¼Œåœ¨es5ä¸­ï¼Œç±»å…¶å®å°±æ˜¯ä¿å­˜äº†ä¸€ä¸ªå‡½æ•°çš„å˜é‡ï¼Œè¿™ä¸ªå‡½æ•°æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚å°†å±æ€§å’Œæ–¹æ³•ç»„æˆä¸€ä¸ªç±»çš„è¿‡ç¨‹å°±æ˜¯å°è£…ã€‚</p><blockquote><p>å°è£…ï¼š<strong>æŠŠå®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ï¼Œéšè—å±æ€§å’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£ã€‚</strong></p></blockquote><h3 id="é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ "><a href="#é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ " class="headerlink" title="é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ "></a>é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ </h3><p>javascriptæä¾›äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰æ¨¡å¼ï¼Œç”¨æ¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡ã€‚æ„é€ å‡½æ•°å…¶å®å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œåªä¸è¿‡æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹</p><ul><li>é¦–å­—æ¯å¤§å†™ï¼ˆå»ºè®®æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ï¼Œå³ä½¿ç”¨å¤§é©¼å³°å‘½åï¼Œéæ„é€ å‡½æ•°é¦–å­—æ¯å°å†™ï¼‰</li><li>å†…éƒ¨ä½¿ç”¨this</li><li>ä½¿ç”¨ newç”Ÿæˆå®ä¾‹</li></ul><p>é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ å±æ€§å’Œæ–¹æ³•å®é™…ä¸Šä¹Ÿå°±æ˜¯é€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•ã€‚å› ä¸ºthisæ€»æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡çš„ï¼Œæ‰€ä»¥é€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•åªåœ¨å½“å‰å¯¹è±¡ä¸Šæ·»åŠ ï¼Œæ˜¯è¯¥å¯¹è±¡è‡ªèº«æ‹¥æœ‰çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡çš„æ—¶å€™ï¼ŒthisæŒ‡å‘çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šå¾—åˆ°ç›¸åº”çš„åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯ä¼šåœ¨å†…å­˜ä¸­å¤åˆ¶ä¸€ä»½ï¼Œè¿™æ ·å°±é€ æˆäº†å†…å­˜çš„æµªè´¹ã€‚</p><pre><code class="js">function Cat(name,color)&#123;  this.name = name;  this.color = color;  this.eat = function () &#123;      alert(&#39;åƒè€é¼ &#39;)  &#125;&#125;//å¤åˆ¶ä»£ç ç”Ÿæˆå®ä¾‹ï¼švar cat1 = new Cat(&#39;tom&#39;,&#39;red&#39;)å¤åˆ¶ä»£ç é€šè¿‡thiså®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™éƒ½ä¼šé‡æ–°å¤åˆ¶ä¸€ä»½</code></pre><h3 id="é€šè¿‡åŸå‹prototype"><a href="#é€šè¿‡åŸå‹prototype" class="headerlink" title="é€šè¿‡åŸå‹prototype"></a>é€šè¿‡åŸå‹prototype</h3><p>åœ¨ç±»ä¸Šé€šè¿‡ thisçš„æ–¹å¼æ·»åŠ å±æ€§å’Œå¯¹è±¡ä¼šå¯¼è‡´å†…å­˜æµªè´¹çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±è€ƒè™‘ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®©å®ä¾‹åŒ–çš„ç±»æ‰€ä½¿ç”¨çš„æ–¹æ³•ç›´æ¥ä½¿ç”¨æŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªæ–¹æ³•ã€‚äºæ˜¯ï¼Œå°±æƒ³åˆ°äº†åŸå‹çš„æ–¹å¼</p><p>Javascriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºé‚£äº›ä¸å˜çš„å±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶æ·»åŠ åœ¨ç±»çš„prototype å¯¹è±¡ä¸Šã€‚</p><pre><code class="js">function Cat(name,color)&#123;ã€€this.name = name;ã€€this.color = color;&#125;Cat.prototype.type = &quot;çŒ«ç§‘åŠ¨ç‰©&quot;;Cat.prototype.eat = function()&#123;alert(&quot;åƒè€é¼ &quot;)&#125;;å¤åˆ¶ä»£ç ç„¶åç”Ÿæˆå®ä¾‹var cat1 = new Cat(&quot;å¤§æ¯›&quot;,&quot;é»„è‰²&quot;);var cat2 = new Cat(&quot;äºŒæ¯›&quot;,&quot;é»‘è‰²&quot;);alert(cat1.type); // çŒ«ç§‘åŠ¨ç‰©cat1.eat(); // åƒè€é¼ å¤åˆ¶ä»£ç è¿™æ—¶æ‰€æœ‰å®ä¾‹çš„typeå±æ€§å’Œeat()æ–¹æ³•ï¼Œå…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘prototypeå¯¹è±¡ï¼Œå› æ­¤å°±æé«˜äº†è¿è¡Œæ•ˆç‡ã€‚</code></pre><h3 id="åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡-è¯­æ³•æ·»åŠ "><a href="#åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡-è¯­æ³•æ·»åŠ " class="headerlink" title="åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡.è¯­æ³•æ·»åŠ "></a>åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡.è¯­æ³•æ·»åŠ </h3><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡. è¯­æ³•è¿›è¡Œæ·»åŠ ï¼Œå› ä¸ºåœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œåˆ°åœ¨ç±»å¤–éƒ¨é€šè¿‡. è¯­æ³•æ·»åŠ çš„å±æ€§ï¼Œæ‰€ä»¥å®ä¾‹åŒ–ä¹‹åçš„å¯¹è±¡æ˜¯ä¸èƒ½è®¿é—®åˆ°. è¯­æ³•æ‰€æ·»åŠ çš„å¯¹è±¡å’Œå±æ€§çš„ï¼Œåªèƒ½é€šè¿‡è¯¥ç±»è®¿é—®ã€‚</p><h3 id="ä¸‰è€…çš„åŒºåˆ«"><a href="#ä¸‰è€…çš„åŒºåˆ«" class="headerlink" title="ä¸‰è€…çš„åŒºåˆ«"></a>ä¸‰è€…çš„åŒºåˆ«</h3><p>é€šè¿‡æ„é€ å‡½æ•°ã€åŸå‹å’Œ. è¯­æ³•ä¸‰è€…éƒ½å¯ä»¥åœ¨ç±»ä¸Šæ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚ä½†æ˜¯ä¸‰è€…æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«çš„ã€‚æ„é€ å‡½æ•°ï¼šé€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•æ€»æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡çš„ï¼Œæ‰€ä»¥åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œé€šè¿‡thisæ·»åŠ çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šåœ¨å†…å­˜ä¸­å¤åˆ¶ä¸€ä»½ï¼Œè¿™æ ·å°±ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚ä½†æ˜¯è¿™æ ·åˆ›å»ºçš„å¥½å¤„æ˜¯å³ä½¿æ”¹å˜äº†æŸä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¸ä¼šå½±å“å…¶ä»–çš„å¯¹è±¡ï¼ˆå› ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯å¤åˆ¶çš„ä¸€ä»½ï¼‰ã€‚åŸå‹ï¼šé€šè¿‡åŸå‹ç»§æ‰¿çš„æ–¹æ³•å¹¶ä¸æ˜¯è‡ªèº«çš„ï¼Œæˆ‘ä»¬è¦åœ¨åŸå‹é“¾ä¸Šä¸€å±‚ä¸€å±‚çš„æŸ¥æ‰¾ï¼Œè¿™æ ·åˆ›å»ºçš„å¥½å¤„æ˜¯åªåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€æ¬¡ï¼Œå®ä¾‹åŒ–çš„å¯¹è±¡éƒ½ä¼šæŒ‡å‘è¿™ä¸ªprototype å¯¹è±¡ï¼Œä½†æ˜¯è¿™æ ·åšä¹Ÿæœ‰å¼Šç«¯ï¼Œå› ä¸ºå®ä¾‹åŒ–çš„å¯¹è±¡çš„åŸå‹éƒ½æ˜¯æŒ‡å‘åŒä¸€å†…å­˜åœ°å€ï¼Œæ”¹åŠ¨å…¶ä¸­çš„ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–çš„å¯¹è±¡. è¯­æ³•ï¼šåœ¨ç±»çš„å¤–éƒ¨é€šè¿‡. è¯­æ³•åˆ›å»ºçš„å±æ€§å’Œæ–¹æ³•åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œä½†æ˜¯è¿™æ ·åˆ›å»ºçš„å®ä¾‹åŒ–çš„å¯¹è±¡æ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œåªèƒ½é€šè¿‡ç±»çš„è‡ªèº«è®¿é—®</p><h3 id="javascriptä¹Ÿæœ‰private-public-protected"><a href="#javascriptä¹Ÿæœ‰private-public-protected" class="headerlink" title="javascriptä¹Ÿæœ‰private public protected"></a>javascriptä¹Ÿæœ‰private public protected</h3><p>å¯¹äºjavaç¨‹åºå‘˜æ¥è¯´<code>private public protected</code>è¿™ä¸‰ä¸ªå…³é”®å­—åº”è¯¥æ˜¯å¾ˆç†Ÿæ‚‰çš„å“ˆï¼Œä½†æ˜¯åœ¨jsä¸­ï¼Œå¹¶æ²¡æœ‰ç±»ä¼¼äº<code>private public protected</code>è¿™æ ·çš„å…³é”®å­—ï¼Œä½†æ˜¯æˆ‘ä»¬åˆå¸Œæœ›æˆ‘ä»¬å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•æœ‰ä¸€å®šçš„è®¿é—®é™åˆ¶ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿ<code>private public protected</code>è¿™äº›è®¿é—®æƒé™ã€‚ä¸ç†Ÿæ‚‰javaçš„å°ä¼™ä¼´å¯èƒ½ä¸å¤ªæ¸…æ¥š<code>private public protected</code>æ¦‚å¿µï¼ˆå…¶ä»–è¯­è¨€æˆ‘ä¹Ÿä¸æ¸…æ¥šæœ‰æ²¡æœ‰å“ˆï¼Œä½†æ˜¯åº”è¯¥éƒ½æ˜¯ç±»ä¼¼çš„<del>ï¼‰ï¼Œå…ˆæ¥ç§‘æ™®ä¸€ä¸‹å°çŸ¥è¯†ç‚¹</del></p><ul><li>publicï¼špublicè¡¨æ˜è¯¥æ•°æ®æˆå‘˜ã€æˆå‘˜å‡½æ•°æ˜¯å¯¹æ‰€æœ‰ç”¨æˆ·å¼€æ”¾çš„ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥ç›´æ¥è¿›è¡Œè°ƒç”¨</li><li>privateï¼šprivateè¡¨ç¤ºç§æœ‰ï¼Œç§æœ‰çš„æ„æ€å°±æ˜¯é™¤äº†classè‡ªå·±ä¹‹å¤–ï¼Œä»»ä½•äººéƒ½ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç§æœ‰è´¢äº§ç¥åœ£ä¸å¯ä¾µçŠ¯å˜›ï¼Œå³ä¾¿æ˜¯å­å¥³ï¼Œæœ‹å‹ï¼Œéƒ½ä¸å¯ä»¥ä½¿ç”¨ã€‚</li><li>protectedï¼šprotectedå¯¹äºå­å¥³ã€æœ‹å‹æ¥è¯´ï¼Œå°±æ˜¯publicçš„ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œè€Œå¯¹äºå…¶ä»–çš„å¤–éƒ¨classï¼Œprotectedå°±å˜æˆprivateã€‚</li></ul><h4 id="jsä¸­çš„private"><a href="#jsä¸­çš„private" class="headerlink" title="jsä¸­çš„private"></a>jsä¸­çš„private</h4><p>å› ä¸ºjavascriptå‡½æ•°çº§ä½œç”¨åŸŸçš„ç‰¹æ€§ï¼ˆåœ¨å‡½æ•°ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¤–ç•Œè®¿é—®ä¸åˆ°ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯ç§æœ‰çš„ã€‚</p><h4 id="jsä¸­çš„public"><a href="#jsä¸­çš„public" class="headerlink" title="jsä¸­çš„public"></a>jsä¸­çš„public</h4><p>é€šè¿‡newå…³é”®è¯å®ä¾‹åŒ–æ—¶ï¼Œthiså®šä¹‰çš„å±æ€§å’Œå˜é‡éƒ½ä¼šè¢«å¤åˆ¶ä¸€éï¼Œæ‰€ä»¥é€šè¿‡thiså®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å°±æ˜¯å…¬æœ‰çš„ã€‚é€šè¿‡prototypeåˆ›å»ºçš„å±æ€§åœ¨ç±»çš„å®ä¾‹åŒ–ä¹‹åç±»çš„å®ä¾‹åŒ–å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°çš„ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯å…¬æœ‰çš„ã€‚</p><h4 id="jsä¸­çš„protected"><a href="#jsä¸­çš„protected" class="headerlink" title="jsä¸­çš„protected"></a>jsä¸­çš„protected</h4><p>åœ¨å‡½æ•°çš„å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡thiså®šä¹‰çš„æ–¹æ³•è®¿é—®åˆ°ä¸€äº›ç±»çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨å®ä¾‹åŒ–çš„æ—¶å€™å°±å¯ä»¥åˆå§‹åŒ–å¯¹è±¡çš„ä¸€äº›å±æ€§äº†ã€‚</p><h4 id="newçš„å®è´¨"><a href="#newçš„å®è´¨" class="headerlink" title="newçš„å®è´¨"></a>newçš„å®è´¨</h4><p>è™½ç„¶å¾ˆå¤šäººéƒ½å·²ç»äº†è§£äº†newçš„å®è´¨ï¼Œé‚£ä¹ˆæˆ‘è¿˜æ˜¯è¦å†è¯´ä¸€ä¸‹new çš„å®è´¨ var o = new Object()</p><ol><li>æ–°å»ºä¸€ä¸ªå¯¹è±¡o</li><li><code>o. __proto__ = Object.prototype</code> å°†æ–°åˆ›å»ºçš„å¯¹è±¡çš„<code>__proto__</code>å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„<code>prototype</code></li><li>å°†thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡</li><li>è¿”å›æ–°å¯¹è±¡ï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦çœ‹æ„é€ å‡½æ•°æœ‰æ²¡æœ‰è¿”å›å€¼ï¼Œå¦‚æœæ„é€ å‡½æ•°çš„è¿”å›å€¼ä¸ºåŸºæœ¬æ•°æ®ç±»å‹<code>string,boolean,number,null,undefined</code>,é‚£ä¹ˆå°±è¿”å›æ–°å¯¹è±¡ï¼Œå¦‚æœæ„é€ å‡½æ•°çš„è¿”å›å€¼ä¸ºå¯¹è±¡ç±»å‹ï¼Œé‚£ä¹ˆå°±è¿”å›è¿™ä¸ªå¯¹è±¡ç±»å‹</li></ol><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><pre><code class="js">var Book = function (id, name, price) &#123;  //private(åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ï¼Œå‡½æ•°å¤–éƒ¨è®¿é—®ä¸åˆ°ï¼Œå®ä¾‹åŒ–ä¹‹åå®ä¾‹åŒ–çš„å¯¹è±¡è®¿é—®ä¸åˆ°)  var num = 1;  var id = id;  function checkId() &#123;      console.log(&#39;private&#39;)  &#125;  //protected(å¯ä»¥è®¿é—®åˆ°å‡½æ•°å†…éƒ¨çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼Œåœ¨å®ä¾‹åŒ–ä¹‹åå°±å¯ä»¥å¯¹å®ä¾‹åŒ–çš„ç±»è¿›è¡Œåˆå§‹åŒ–æ‹¿åˆ°å‡½æ•°çš„ç§æœ‰å±æ€§)  this.getName = function () &#123;      console.log(id)  &#125;  this.getPrice = function () &#123;      console.log(price)  &#125;  //public(å®ä¾‹åŒ–çš„ä¹‹åï¼Œå®ä¾‹åŒ–çš„å¯¹è±¡å°±å¯ä»¥è®¿é—®åˆ°äº†~)  this.name = name;  this.copy = function () &#123;      console.log(&#39;this is public&#39;)  &#125;&#125;//åœ¨Bookçš„åŸå‹ä¸Šæ·»åŠ çš„æ–¹æ³•å®ä¾‹åŒ–ä¹‹åå¯ä»¥è¢«å®ä¾‹åŒ–å¯¹è±¡ç»§æ‰¿Book.prototype.proFunction = function () &#123;  console.log(&#39;this is proFunction&#39;)&#125;//åœ¨å‡½æ•°å¤–éƒ¨é€šè¿‡.è¯­æ³•åˆ›å»ºçš„å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½é€šè¿‡è¯¥ç±»è®¿é—®ï¼Œå®ä¾‹åŒ–å¯¹è±¡è®¿é—®ä¸åˆ°Book.setTime = function () &#123;  console.log(&#39;this is new time&#39;)&#125;var book1 = new Book(&#39;111&#39;,&#39;æ‚²æƒ¨ä¸–ç•Œ&#39;,&#39;$99&#39;)book1.getName();        // 111 getNameæ˜¯protectedï¼Œå¯ä»¥è®¿é—®åˆ°ç±»çš„ç§æœ‰å±æ€§ï¼Œæ‰€ä»¥å®ä¾‹åŒ–ä¹‹åä¹Ÿå¯ä»¥è®¿é—®åˆ°å‡½æ•°çš„ç§æœ‰å±æ€§book1.checkId();        //æŠ¥é”™book1.checkId is not a functionconsole.log(book1.id)   // undefined idæ˜¯åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡å®šä¹‰çš„ï¼Œæ˜¯ç§æœ‰å±æ€§ï¼Œæ‰€ä»¥å®ä¾‹åŒ–å¯¹è±¡è®¿é—®ä¸åˆ°console.log(book1.name) //name æ˜¯é€šè¿‡thisåˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šåœ¨book1ä¸­å¤åˆ¶ä¸€énameå±æ€§ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®åˆ°book1.copy()            //this is publicbook1.proFunction();    //this is proFunctionBook.setTime();         //this is new timebook1.setTime();        //æŠ¥é”™book1.setTime is not a function</code></pre><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><blockquote><p>ç»§æ‰¿ï¼šå­ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”å¯¹è¿™äº›åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚ç»§æ‰¿çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä»ä¸€èˆ¬åˆ°ç‰¹æ®Šçš„è¿‡ç¨‹ã€‚</p></blockquote><p>å…¶å®ç»§æ‰¿éƒ½æ˜¯åŸºäºä»¥ä¸Šå°è£…æ–¹æ³•çš„ä¸‰ä¸ªç‰¹æ€§æ¥å®ç°çš„ã€‚</p><h3 id="ç±»å¼ç»§æ‰¿"><a href="#ç±»å¼ç»§æ‰¿" class="headerlink" title="ç±»å¼ç»§æ‰¿"></a>ç±»å¼ç»§æ‰¿</h3><p>æ‰€è°“çš„ç±»å¼ç»§æ‰¿å°±æ˜¯ä½¿ç”¨çš„åŸå‹çš„æ–¹å¼ï¼Œå°†æ–¹æ³•æ·»åŠ åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šï¼Œç„¶åå­ç±»çš„åŸå‹æ˜¯çˆ¶ç±»çš„ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ã€‚</p><pre><code class="js">//å£°æ˜çˆ¶ç±»  var SuperClass = function () &#123;      var id = 1;      this.name = [&#39;javascript&#39;];      this.superValue = function () &#123;          console.log(&#39;superValue is true&#39;);          console.log(id)      &#125;  &#125;;  //ä¸ºçˆ¶ç±»æ·»åŠ å…±æœ‰æ–¹æ³•  SuperClass.prototype.getSuperValue = function () &#123;      return this.superValue();  &#125;;  //å£°æ˜å­ç±»  var SubClass = function () &#123;      this.subValue = function () &#123;          console.log(&#39;this is subValue &#39;)      &#125;  &#125;;  //ç»§æ‰¿çˆ¶ç±»  SubClass.prototype = new SuperClass() ;  //ä¸ºå­ç±»æ·»åŠ å…±æœ‰æ–¹æ³•  SubClass.prototype.getSubValue= function () &#123;      return this.subValue()  &#125;;  var sub = new SubClass();  var sub2 =  new  SubClass();  sub.getSuperValue();   //superValue is true  sub.getSubValue();     //this is subValue  console.log(sub.id);    //undefined  console.log(sub.name);  //javascript  sub.name.push(&#39;java&#39;);  //[&quot;javascript&quot;]  console.log(sub2.name)  //[&quot;javascript&quot;, &quot;java&quot;]</code></pre><p>å…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸€å¥ä»£ç æ˜¯<code>SubClass.prototype = new SuperClass()</code> ;ç±»çš„åŸå‹å¯¹è±¡<code>prototype</code>å¯¹è±¡çš„ä½œç”¨å°±æ˜¯ä¸ºç±»çš„åŸå‹æ·»åŠ å…±æœ‰æ–¹æ³•çš„ï¼Œä½†æ˜¯ç±»ä¸èƒ½ç›´æ¥è®¿é—®è¿™äº›æ–¹æ³•ï¼Œåªæœ‰å°†ç±»å®ä¾‹åŒ–ä¹‹åï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡å¤åˆ¶äº†çˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶å°†åŸå‹<code>__proto__ </code>æŒ‡å‘äº†çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚è¿™æ ·å­ç±»å°±å¯ä»¥è®¿é—®çˆ¶ç±»çš„<code>public</code> å’Œ<code>protected </code>çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶ï¼Œçˆ¶ç±»ä¸­çš„<code>private</code> çš„å±æ€§å’Œæ–¹æ³•ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ã€‚</p><p>å¦‚ä¸Šè¿°ä»£ç çš„æœ€åä¸€æ®µï¼Œä½¿ç”¨ç±»ç»§æ‰¿çš„æ–¹æ³•ï¼Œå¦‚æœçˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­æœ‰å¼•ç”¨ç±»å‹ï¼Œå°±ä¼šåœ¨å­ç±»ä¸­è¢«æ‰€æœ‰å®ä¾‹å…±ç”¨ï¼Œå› æ­¤<strong>ä¸€ä¸ªå­ç±»çš„å®ä¾‹å¦‚æœæ›´æ”¹äº†è¿™ä¸ªå¼•ç”¨ç±»å‹ï¼Œå°±ä¼šå½±å“åˆ°å…¶ä»–å­ç±»çš„å®ä¾‹</strong>ã€‚</p><p>æä¸€ä¸ªå°é—®é¢˜~<strong>ä¸ºä»€ä¹ˆä¸€ä¸ªå­ç±»çš„å®ä¾‹å¦‚æœæ›´æ”¹äº†è¿™ä¸ªå¼•ç”¨ç±»å‹ï¼Œå°±ä¼šå½±å“åˆ°å…¶ä»–å­ç±»çš„å®ä¾‹å‘¢ï¼Œåœ¨javascriptä¸­ï¼Œä»€ä¹ˆæ˜¯å¼•ç”¨ç±»å‹å‘¢ï¼Œå¼•ç”¨ç±»å‹å’Œå…¶ä»–çš„ç±»å‹åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</strong></p><h3 id="æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="æ„é€ å‡½æ•°ç»§æ‰¿"></a>æ„é€ å‡½æ•°ç»§æ‰¿</h3><p>æ­£å¼å› ä¸ºæœ‰äº†ä¸Šè¿°çš„ç¼ºç‚¹ï¼Œæ‰æœ‰äº†æ„é€ å‡½æ•°ç»§æ‰¿ï¼Œæ„é€ å‡½æ•°ç»§æ‰¿çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯<code>SuperClass.call(this,id)</code>,ç›´æ¥æ”¹å˜thisçš„æŒ‡å‘ï¼Œä½¿é€šè¿‡thisåˆ›å»ºçš„å±æ€§å’Œæ–¹æ³•åœ¨å­ç±»ä¸­å¤åˆ¶ä¸€ä»½ï¼Œå› ä¸ºæ˜¯å•ç‹¬å¤åˆ¶çš„ï¼Œæ‰€ä»¥å„ä¸ªå®ä¾‹åŒ–çš„å­ç±»äº’ä¸å½±å“ã€‚ä½†æ˜¯ä¼šé€ æˆå†…å­˜æµªè´¹çš„é—®é¢˜</p><pre><code class="js">//æ„é€ å‡½æ•°ç»§æ‰¿//å£°æ˜çˆ¶ç±»function SuperClass(id) &#123;    var name = &#39;javascript&#39;    this.books=[&#39;javascript&#39;,&#39;html&#39;,&#39;css&#39;];    this.id = id&#125;//å£°æ˜çˆ¶ç±»åŸå‹æ–¹æ³•SuperClass.prototype.showBooks = function () &#123;    console.log(this.books)&#125;//å£°æ˜å­ç±»function SubClass(id) &#123;    SuperClass.call(this,id)&#125;//åˆ›å»ºç¬¬ä¸€ä¸ªå­ç±»å®ä¾‹var subclass1 = new SubClass(10);var subclass2 = new SubClass(11);console.log(subclass1.books);console.log(subclass2.id);console.log(subclass1.name);   //undefinedsubclass2.showBooks();</code></pre><h3 id="ç»„åˆå¼ç»§æ‰¿"><a href="#ç»„åˆå¼ç»§æ‰¿" class="headerlink" title="ç»„åˆå¼ç»§æ‰¿"></a>ç»„åˆå¼ç»§æ‰¿</h3><p>ç±»ç»§æ‰¿    </p><ul><li>æ ¸å¿ƒæ€æƒ³:å­ç±»çš„åŸå‹æ˜¯çˆ¶ç±»å®ä¾‹åŒ–çš„å¯¹è±¡</li><li>ä¼˜ç‚¹:å­ç±»å®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•éƒ½æŒ‡å‘çˆ¶ç±»çš„åŸå‹</li><li>ç¼ºç‚¹:å­ç±»ä¹‹é—´å¯èƒ½ä¼šäº’ç›¸å½±å“</li></ul><p>æ„é€ å‡½æ•°ç»§æ‰¿</p><ul><li>æ ¸å¿ƒæ€æƒ³:<code>SuperClass.call(this,id)</code></li><li>ä¼˜ç‚¹:æ¯ä¸ªå®ä¾‹åŒ–çš„å­ç±»äº’ä¸å½±å“</li><li>ç¼ºç‚¹:å†…å­˜æµªè´¹</li></ul><p>æ‰€ä»¥ç»„åˆå¼ç»§æ‰¿å°±æ˜¯æ±²å–ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œå³é¿å…äº†å†…å­˜æµªè´¹ï¼Œåˆä½¿å¾—æ¯ä¸ªå®ä¾‹åŒ–çš„å­ç±»äº’ä¸å½±å“ã€‚</p><pre><code class="js">//ç»„åˆå¼ç»§æ‰¿//å£°æ˜çˆ¶ç±»var SuperClass = function (name) &#123;    this.name = name;    this.books=[&#39;javascript&#39;,&#39;html&#39;,&#39;css&#39;]&#125;;//å£°æ˜çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•SuperClass.prototype.showBooks = function () &#123;    console.log(this.books)&#125;;//å£°æ˜å­ç±»var SubClass = function (name) &#123;    SuperClass.call(this, name)&#125;;//å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼ˆé“¾å¼ç»§æ‰¿ï¼‰SubClass.prototype = new SuperClass();//å®ä¾‹åŒ–å­ç±»var subclass1 = new SubClass(&#39;java&#39;);var subclass2 = new SubClass(&#39;php&#39;);subclass2.showBooks();subclass1.books.push(&#39;ios&#39;);    //[&quot;javascript&quot;, &quot;html&quot;, &quot;css&quot;]console.log(subclass1.books);  //[&quot;javascript&quot;, &quot;html&quot;, &quot;css&quot;, &quot;ios&quot;]console.log(subclass2.books);   //[&quot;javascript&quot;, &quot;html&quot;, &quot;css&quot;]</code></pre><h3 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h3><p>ç»„åˆå¼ç»§æ‰¿çš„æ–¹æ³•å›ºç„¶å¥½ï¼Œä½†æ˜¯ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¼šè¢«åˆ›å»ºä¸¤æ¬¡ï¼ˆcall()çš„æ—¶å€™ä¸€éï¼Œnewçš„æ—¶å€™åˆä¸€éï¼‰</strong>ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆå‡ºç°äº†å¯„ç”Ÿç»„åˆç»§æ‰¿ã€‚</p><p>åˆšåˆšé—®é¢˜çš„å…³é”®æ˜¯<strong>çˆ¶ç±»çš„æ„é€ å‡½æ•°åœ¨ç±»ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿çš„ç»„åˆå½¢å¼ä¸­è¢«åˆ›å»ºäº†ä¸¤éï¼Œä½†æ˜¯åœ¨ç±»ç»§æ‰¿ä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦åˆ›å»ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬åªæ˜¯è¦å­ç±»ç»§æ‰¿çˆ¶ç±»çš„åŸå‹</strong>å³å¯ã€‚æ‰€ä»¥è¯´æˆ‘ä»¬å…ˆç»™çˆ¶ç±»çš„åŸå‹åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åä¿®æ”¹å­ç±»<code>constructor</code>å±æ€§ï¼Œæœ€ååœ¨è®¾ç½®å­ç±»çš„åŸå‹å°±å¯ä»¥äº†~</p><pre><code class="js">//åŸå‹å¼ç»§æ‰¿//åŸå‹å¼ç»§æ‰¿å…¶å®å°±æ˜¯ç±»å¼ç»§æ‰¿çš„å°è£…,å®ç°çš„åŠŸèƒ½æ˜¯è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œæ”¹å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†ä¼ å…¥çš„oå¯¹è±¡function inheritObject(o) &#123;    //å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å‡½æ•°å¯¹è±¡    function F() &#123;&#125;    //è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡    F.prototype = o;    //è¿”å›ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡    return new F();&#125;//å¯„ç”Ÿå¼ç»§æ‰¿//å¯„ç”Ÿå¼ç»§æ‰¿å°±æ˜¯å¯¹åŸå‹ç»§æ‰¿çš„ç¬¬äºŒæ¬¡å°è£…ï¼Œä½¿å¾—å­ç±»çš„åŸå‹ç­‰äºçˆ¶ç±»çš„åŸå‹ã€‚å¹¶ä¸”åœ¨ç¬¬äºŒæ¬¡å°è£…çš„è¿‡ç¨‹ä¸­å¯¹ç»§æ‰¿çš„å¯¹è±¡è¿›è¡Œäº†æ‰©å±•function inheritPrototype(subClass, superClass)&#123;    //å¤åˆ¶ä¸€ä»½çˆ¶ç±»çš„åŸå‹ä¿å­˜åœ¨å˜é‡ä¸­ï¼Œä½¿å¾—pçš„åŸå‹ç­‰äºçˆ¶ç±»çš„åŸå‹    var p = inheritObject(superClass.prototype);    //ä¿®æ­£å› ä¸ºé‡å†™å­ç±»åŸå‹å¯¼è‡´å­ç±»constructorå±æ€§è¢«ä¿®æ”¹    p.constructor = subClass;    //è®¾ç½®å­ç±»çš„åŸå‹    subClass.prototype = p;&#125;//å®šä¹‰çˆ¶ç±»var SuperClass = function (name) &#123;    this.name = name;    this.books = [&#39;javascript&#39;,&#39;html&#39;,&#39;css&#39;]&#125;;//å®šä¹‰çˆ¶ç±»åŸå‹æ–¹æ³•SuperClass.prototype.getBooks = function () &#123;    console.log(this.books)&#125;;//å®šä¹‰å­ç±»var SubClass = function (name) &#123;    SuperClass.call(this,name)&#125;inheritPrototype(SubClass,SuperClass);var subclass1 = new SubClass(&#39;php&#39;)</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.im/post/6844903480868470798&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://use</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹setTimeout, setInterval å’Œ requestAnimationFrame</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/27/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BsetTimeout-setInterval-%E5%92%8C-requestAnimationFrame/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/27/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8BsetTimeout-setInterval-%E5%92%8C-requestAnimationFrame/</id>
    <published>2020-09-27T08:58:52.000Z</published>
    <updated>2020-09-27T09:32:27.065Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/>[åŸæ–‡åœ°å€](https://segmentfault.com/a/1190000014661035)<h2 id="ä¸€-å¸¸è§å®šæ—¶å™¨"><a href="#ä¸€-å¸¸è§å®šæ—¶å™¨" class="headerlink" title="ä¸€.å¸¸è§å®šæ—¶å™¨"></a>ä¸€.å¸¸è§å®šæ—¶å™¨</h2><pre><code class="html">æˆ‘ä»¬å¸¸è§çš„å®šæ—¶å™¨æœ‰ä»¥ä¸‹ä¸¤ç§1. window.setTimeout ç”¨äºåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°åæ‰§è¡ŒæŸæ®µæ—¢å®šçš„ä»£ç 2. window.setInterval ç”¨äºæ¯éš”ä¸€æ®µæ¯«ç§’æ•°é‡å¤æ‰§è¡Œæ—¢å®šçš„ä»£ç è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥é€šè¿‡æ‰‹å·¥è®¾ç½®æ—¶é—´æ¥è®¾å®šæ˜¯å¤šå°‘æ¯«ç§’åæ‰§è¡Œè¿™æ®µä»£ç ï¼Œæˆ–è€…æ˜¯æ¯éš”å¤šå°‘æ¯«ç§’æ‰§è¡Œè¿™æ®µä»£ç ã€‚  </code></pre><blockquote><p>è™½ç„¶æˆ‘ä»¬æœŸå¾…æµè§ˆå™¨æŒ‰ç…§æˆ‘ä»¬è®¾å®šçš„æ—¶é—´ç²¾ç¡®çš„æ‰§è¡Œä»£ç ï¼Œä½†æ˜¯jså´ä¸èƒ½ä¿è¯ä»£ç èƒ½æ°å¥½åœ¨é‚£ä¸ªæ—¶é—´ç‚¹è¢«è¿è¡Œï¼ŒåŸå› æœ‰ä¸¤ä¸ªã€‚</p></blockquote><ul><li><p>å¤§å¤šæ•°æµè§ˆå™¨å¹¶æ²¡æœ‰ç²¾ç¡®åˆ°æ¯«ç§’çº§åˆ«çš„è§¦å‘äº‹ä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬è®¾å®šæŸä¸ªå‡½æ•°åœ¨3æ¯«ç§’åæ‰§è¡Œï¼Œåœ¨è€ç‰ˆæœ¬çš„IEä¸­ï¼Œè¿™ä¸ªå‡½æ•°è‡³å°‘ä¼šåœ¨15æ¯«ç§’ä»¥åæ‰§è¡Œã€‚è€Œåœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œè¿™ä¸ªæ•°å€¼ä¼šçŸ­ä¸€ç‚¹ï¼Œä½†æ—¶é—´å·®ä¸€èˆ¬ä¹Ÿä¼šè¶…è¿‡1æ¯«ç§’ã€‚</p></li><li><p>ç¬¬äºŒä¸ªåŸå› ä¸jsçš„è¿è¡Œæœºåˆ¶æœ‰å…³ï¼Œå…·ä½“è§<a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html">JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a>.ç®€å•æ¥è¯´ï¼Œå°±æ˜¯jsæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„è§£é‡Šå™¨ï¼Œä¸€æ®µæ—¶é—´åªèƒ½æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ‰€ä»¥è¿è¡Œæ—¶åˆ†ä¸ºä¸»çº¿ç¨‹å’Œä»»åŠ¡é˜Ÿåˆ—ä¸¤éƒ¨åˆ†ã€‚è€Œæˆ‘ä»¬åœ¨å®šæ—¶å™¨ä¸­è®¾ç½®çš„æ—¶é—´ï¼Œä»…ä»£è¡¨1000æ¯«ç§’åæŠŠè¿™ä¸ªä»»åŠ¡æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œè€Œæ­¤æ—¶å¿…é¡»è¦ç­‰åˆ°ä¸»çº¿ç¨‹çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å®šæ—¶å™¨çš„ä»»åŠ¡ï¼ˆåœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­ä¹Ÿæœ‰è°ƒåº¦ï¼Œä¸ä¸€å®šç¬¬ä¸€ä¸ªæ‰§è¡Œå½“å‰ä»»åŠ¡ï¼‰ï¼Œå› æ­¤æ—¶é—´æ˜¯æ— æ³•ä¿è¯çš„ã€‚</p></li></ul><h2 id="äºŒã€requestAnimationFrame"><a href="#äºŒã€requestAnimationFrame" class="headerlink" title="äºŒã€requestAnimationFrame"></a>äºŒã€requestAnimationFrame</h2><p>é‚£æœ‰æ²¡æœ‰æ—¶é—´å‡†ç¡®çš„å®šæ—¶å™¨å‘¢ï¼Ÿæœ‰ä¸€ç§é€‰æ‹©æ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame">requestAnimationFrame</a>. ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="js"> function animateMe()&#123;    requestAnimationFrame(function()&#123;      console.log(new Date());      animateMe();    &#125;)&#125;animateMe();</code></pre><p>è¿™ä¸ªapiçš„åŸç†<strong>æ˜¯åœ¨ç”±ç³»ç»Ÿæ¥å†³å®šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº</strong>ï¼Œåœ¨æ¯ä¸€æ¬¡ç³»ç»Ÿç»˜åˆ¶ä¹‹å‰ï¼Œä¼šä¸»åŠ¨è°ƒç”¨requestAnimationFrameä¸­çš„å›è°ƒå‡½æ•°ï¼Œè€Œé¢‘ç‡ä¹Ÿç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ã€‚æ¯”å¦‚ä¸€èˆ¬ç”µè„‘çš„åˆ·æ–°é¢‘ç‡é€šå¸¸ä¸º<code>60Hz</code>ï¼Œå³ä¸€ç§’é’Ÿé‡ç»˜<code>60</code>æ¬¡ï¼Œé‚£ä¹ˆå›è°ƒå‡½æ•°å°±ç­‰äº<code>1000/60=16.7</code>æ¯«ç§’è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œå¦‚æœåˆ·æ–°é¢‘ç‡å˜ä¸º<code>75Hz</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶é—´å°±å˜ä¸º<code>1000/75=13.3</code>æ¯«ç§’è¢«æ‰§è¡Œä¸€æ¬¡ã€‚è¿™æ ·èƒ½ä¿è¯å›è°ƒå‡½æ•°åœ¨æ¯ä¸€æ¬¡ç»˜åˆ¶çš„é—´éš”æ—¶é—´å†…åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå› æ­¤å®ƒçš„æ—¶é—´æ˜¯å¯é çš„ã€‚</p><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><h3 id="é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ï¼šrequestAnimationFrameå®ç°ç±»ä¼¼setInterval-setTimeoutçš„è®¡æ—¶å™¨"><a href="#é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ï¼šrequestAnimationFrameå®ç°ç±»ä¼¼setInterval-setTimeoutçš„è®¡æ—¶å™¨" class="headerlink" title="é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ï¼šrequestAnimationFrameå®ç°ç±»ä¼¼setInterval,setTimeoutçš„è®¡æ—¶å™¨"></a>é˜¿é‡Œå‰ç«¯é¢è¯•é¢˜ï¼šrequestAnimationFrameå®ç°ç±»ä¼¼setInterval,setTimeoutçš„è®¡æ—¶å™¨</h3><pre><code class="js">const RAF = &#123;  intervalTimer: null,  timeoutTimer: null,  setTimeout (cb, interval) &#123; // å®ç°setTimeoutåŠŸèƒ½    let now = Date.now    let stime = now()    let etime = stime    let loop = () =&gt; &#123;    this.timeoutTimer = requestAnimationFrame(loop)    etime = now()    if (etime - stime &gt;= interval) &#123;      cb()      cancelAnimationFrame(this.timeoutTimer)    &#125;  &#125;    this.timeoutTimer = requestAnimationFrame(loop)    return this.timeoutTimer  &#125;,    clearTimeout () &#123;    cancelAnimationFrame(this.timeoutTimer)  &#125;,  setInterval (cb, interval) &#123; // å®ç°setIntervalåŠŸèƒ½    let now = Date.now    let stime = now()    let etime = stime    let loop = () =&gt; &#123;      this.intervalTimer = requestAnimationFrame(loop)      etime = now()      if (etime - stime &gt;= interval) &#123;        stime = now()        etime = stime        cb()      &#125;    &#125;    this.intervalTimer = requestAnimationFrame(loop)    return this.intervalTimer  &#125;,    clearInterval () &#123;    cancelAnimationFrame(this.intervalTimer)  &#125;&#125;</code></pre><p>è°ƒç”¨ï¼š</p><pre><code class="js">let count = 0function a() &#123;console.log(count)count++&#125;RAF.setInterval(a, 1000)</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;
[åŸæ–‡åœ°å€](https://segmentfault.com/a/1190000014661035)

&lt;h2 id=&quot;ä¸€-å¸¸è§å®šæ—¶å™¨&quot;&gt;&lt;a href=&quot;#ä¸€-å¸¸è§å®šæ—¶å™¨&quot; class</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹æ¶ˆæ¯é˜Ÿåˆ—ä¸äº‹ä»¶å¾ªç¯</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</id>
    <published>2020-09-25T08:11:23.000Z</published>
    <updated>2020-09-27T08:37:14.110Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html">åŸæ–‡åœ°å€</a></p><h2 id="åŒºåˆ†è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#åŒºåˆ†è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="åŒºåˆ†è¿›ç¨‹ä¸çº¿ç¨‹"></a>åŒºåˆ†è¿›ç¨‹ä¸çº¿ç¨‹</h2><p>çº¿ç¨‹å’Œè¿›ç¨‹åŒºåˆ†ä¸æ¸…ï¼Œæ˜¯å¾ˆå¤šæ–°æ‰‹éƒ½ä¼šçŠ¯çš„é”™è¯¯ï¼Œæ²¡æœ‰å…³ç³»ã€‚è¿™å¾ˆæ­£å¸¸ã€‚å…ˆçœ‹çœ‹ä¸‹é¢è¿™ä¸ªå½¢è±¡çš„æ¯”å–»ï¼š</p><pre><code class="html">- å·¥å‚çš„èµ„æº -&gt; ç³»ç»Ÿåˆ†é…çš„å†…å­˜ï¼ˆç‹¬ç«‹çš„ä¸€å—å†…å­˜ï¼‰- å·¥å‚ä¹‹é—´çš„ç›¸äº’ç‹¬ç«‹ -&gt; è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹- å¤šä¸ªå·¥äººåä½œå®Œæˆä»»åŠ¡ -&gt; å¤šä¸ªçº¿ç¨‹åœ¨è¿›ç¨‹ä¸­åä½œå®Œæˆä»»åŠ¡- å·¥å‚å†…æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå·¥äºº -&gt; ä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆ- å·¥äººä¹‹é—´å…±äº«ç©ºé—´ -&gt; åŒä¸€è¿›ç¨‹ä¸‹çš„å„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®é›†ã€å †ç­‰ï¼‰</code></pre><p>ç„¶åå†å·©å›ºä¸‹ï¼š</p><p>å¦‚æœæ˜¯windowsç”µè„‘ä¸­ï¼Œå¯ä»¥æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªåå°è¿›ç¨‹åˆ—è¡¨ã€‚å¯¹ï¼Œé‚£é‡Œå°±æ˜¯æŸ¥çœ‹è¿›ç¨‹çš„åœ°æ–¹ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜èµ„æºä¿¡æ¯ä»¥åŠcpuå æœ‰ç‡ã€‚</p><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/process_list.png" alt="cpu"></p><p>æ‰€ä»¥ï¼Œåº”è¯¥æ›´å®¹æ˜“ç†è§£äº†ï¼š<strong>è¿›ç¨‹æ˜¯cpuèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼ˆç³»ç»Ÿä¼šç»™å®ƒåˆ†é…å†…å­˜ï¼‰</strong></p><blockquote><p>æœ€åï¼Œå†ç”¨è¾ƒä¸ºå®˜æ–¹çš„æœ¯è¯­æè¿°ä¸€éï¼š</p></blockquote><ul><li>è¿›ç¨‹æ˜¯cpuèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼ˆæ˜¯èƒ½æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼‰</li><li>çº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„æœ€å°å•ä½ï¼ˆçº¿ç¨‹æ˜¯å»ºç«‹åœ¨è¿›ç¨‹çš„åŸºç¡€ä¸Šçš„ä¸€æ¬¡ç¨‹åºè¿è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼‰</li></ul><p><strong>tips</strong></p><ul><li>ä¸åŒè¿›ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥é€šä¿¡ï¼Œä¸è¿‡ä»£ä»·è¾ƒå¤§</li><li>ç°åœ¨ï¼Œä¸€èˆ¬é€šç”¨çš„å«æ³•ï¼š<strong>å•çº¿ç¨‹ä¸å¤šçº¿ç¨‹ï¼Œéƒ½æ˜¯æŒ‡åœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„å•å’Œå¤š</strong>ã€‚ï¼ˆæ‰€ä»¥æ ¸å¿ƒè¿˜æ˜¯å¾—å±äºä¸€ä¸ªè¿›ç¨‹æ‰è¡Œï¼‰</li></ul><h2 id="æµè§ˆå™¨æ˜¯å±äºå¤šè¿›ç¨‹çš„"><a href="#æµè§ˆå™¨æ˜¯å±äºå¤šè¿›ç¨‹çš„" class="headerlink" title="æµè§ˆå™¨æ˜¯å±äºå¤šè¿›ç¨‹çš„"></a>æµè§ˆå™¨æ˜¯å±äºå¤šè¿›ç¨‹çš„</h2><blockquote><p>ç†è§£äº†è¿›ç¨‹ä¸çº¿ç¨‹äº†åŒºåˆ«åï¼Œæ¥ä¸‹æ¥å¯¹æµè§ˆå™¨è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„è®¤è¯†ï¼šï¼ˆå…ˆçœ‹ä¸‹ç®€åŒ–ç†è§£ï¼‰</p></blockquote><ul><li>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</li><li>æµè§ˆå™¨ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿è¡Œï¼Œæ˜¯å› ä¸ºç³»ç»Ÿç»™å®ƒçš„è¿›ç¨‹åˆ†é…äº†èµ„æºï¼ˆcpuã€å†…å­˜ï¼‰</li><li>ç®€å•ç‚¹ç†è§£ï¼Œæ¯æ‰“å¼€ä¸€ä¸ªTabé¡µï¼Œå°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨è¿›ç¨‹ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šåœ¨è¿™é‡Œæµè§ˆå™¨åº”è¯¥ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŒ–æœºåˆ¶ï¼Œæœ‰æ—¶å€™æ‰“å¼€å¤šä¸ªtabé¡µåï¼Œå¯ä»¥åœ¨Chromeä»»åŠ¡ç®¡ç†å™¨ä¸­çœ‹åˆ°ï¼Œæœ‰äº›è¿›ç¨‹è¢«åˆå¹¶äº†<br>ï¼ˆæ‰€ä»¥æ¯ä¸€ä¸ªTabæ ‡ç­¾å¯¹åº”ä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šæ˜¯ç»å¯¹çš„ï¼‰</p><h3 id="æµè§ˆå™¨åŒ…å«å“ªäº›è¿›ç¨‹"><a href="#æµè§ˆå™¨åŒ…å«å“ªäº›è¿›ç¨‹" class="headerlink" title="æµè§ˆå™¨åŒ…å«å“ªäº›è¿›ç¨‹"></a>æµè§ˆå™¨åŒ…å«å“ªäº›è¿›ç¨‹</h3><blockquote><p>çŸ¥é“äº†æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹åï¼Œå†æ¥çœ‹çœ‹å®ƒ<em>åˆ°åº•åŒ…å«å“ªäº›è¿›ç¨‹</em>ï¼šï¼ˆä¸ºäº†ç®€åŒ–ç†è§£ï¼Œä»…åˆ—ä¸¾ä¸»è¦è¿›ç¨‹ï¼‰</p></blockquote><ul><li><strong>Browserè¿›ç¨‹</strong>ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œ<blockquote><p>åªæœ‰ä¸€ä¸ªã€‚ä½œç”¨æœ‰</p></blockquote></li></ul><p>1.è´Ÿè´£æµè§ˆå™¨ç•Œé¢æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ã€‚å¦‚å‰è¿›ï¼Œåé€€ç­‰<br>2.è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹<br>3.å°†Rendererè¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„Bitmapï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š<br>4.ç½‘ç»œèµ„æºçš„ç®¡ç†ï¼Œä¸‹è½½ç­‰</p><ul><li><strong>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹</strong>ï¼šæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º</li><li><strong>GPUè¿›ç¨‹</strong>ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äº3Dç»˜åˆ¶ç­‰</li><li><strong>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰</strong>ï¼ˆRendererè¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ï¼šé»˜è®¤æ¯ä¸ªTabé¡µé¢ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ã€‚ä¸»è¦ä½œç”¨ä¸º</li><li><strong>é¡µé¢æ¸²æŸ“</strong>ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li></ul><p>å¼ºåŒ–è®°å¿†ï¼š<strong>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä¸€ä¸ªç½‘é¡µç›¸å½“äºæ–°èµ·äº†ä¸€ä¸ªè¿›ç¨‹ï¼ˆè¿›ç¨‹å†…æœ‰è‡ªå·±çš„å¤šçº¿ç¨‹ï¼‰</strong></p><p>å½“ç„¶ï¼Œæµè§ˆå™¨æœ‰æ—¶<strong>ä¼šå°†å¤šä¸ªè¿›ç¨‹åˆå¹¶</strong>ï¼ˆè­¬å¦‚æ‰“å¼€å¤šä¸ªç©ºç™½æ ‡ç­¾é¡µåï¼Œä¼šå‘ç°å¤šä¸ªç©ºç™½æ ‡ç­¾é¡µè¢«åˆå¹¶æˆäº†ä¸€ä¸ªè¿›ç¨‹</p><p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡Chromeçš„<code>æ›´å¤šå·¥å…· -&gt; ä»»åŠ¡ç®¡ç†å™¨</code>è‡ªè¡ŒéªŒè¯</p><h3 id="æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿"><a href="#æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿" class="headerlink" title="æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿"></a>æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿</h3><blockquote><p>ç›¸æ¯”äºå•è¿›ç¨‹æµè§ˆå™¨ï¼Œå¤šè¿›ç¨‹æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p></blockquote><ul><li>é¿å…å•ä¸ªpage crashå½±å“æ•´ä¸ªæµè§ˆå™¨</li><li>é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶crashå½±å“æ•´ä¸ªæµè§ˆå™¨</li><li>å¤šè¿›ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿</li><li>æ–¹ä¾¿ä½¿ç”¨æ²™ç›’æ¨¡å‹éš”ç¦»æ’ä»¶ç­‰è¿›ç¨‹ï¼Œæé«˜æµè§ˆå™¨ç¨³å®šæ€§<br>ç®€å•ç‚¹ç†è§£ï¼š<strong>å¦‚æœæµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Œé‚£ä¹ˆæŸä¸ªTabé¡µå´©æºƒäº†ï¼Œå°±å½±å“äº†æ•´ä¸ªæµè§ˆå™¨ï¼Œä½“éªŒæœ‰å¤šå·®ï¼›åŒç†å¦‚æœæ˜¯å•è¿›ç¨‹ï¼Œæ’ä»¶å´©æºƒäº†ä¹Ÿä¼šå½±å“æ•´ä¸ªæµè§ˆå™¨ï¼›è€Œä¸”å¤šè¿›ç¨‹è¿˜æœ‰å…¶å®ƒçš„è¯¸å¤šä¼˜åŠ¿</strong></li></ul><p>å½“ç„¶ï¼Œå†…å­˜ç­‰èµ„æºæ¶ˆè€—ä¹Ÿä¼šæ›´å¤§ï¼Œæœ‰ç‚¹ç©ºé—´æ¢æ—¶é—´çš„æ„æ€ã€‚</p><h3 id="æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"><a href="#æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰" class="headerlink" title="æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"></a>æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰</h3><p>é‡ç‚¹æ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æåˆ°äº†è¿™ä¹ˆå¤šçš„è¿›ç¨‹ï¼Œé‚£ä¹ˆï¼Œ<strong>å¯¹äºæ™®é€šçš„å‰ç«¯æ“ä½œæ¥è¯´ï¼Œæœ€ç»ˆè¦çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ¸²æŸ“è¿›ç¨‹</strong></p><p>å¯ä»¥è¿™æ ·ç†è§£ï¼Œ<code>é¡µé¢çš„æ¸²æŸ“ï¼ŒJSçš„æ‰§è¡Œï¼Œäº‹ä»¶çš„å¾ªç¯</code>ï¼Œéƒ½åœ¨è¿™ä¸ªè¿›ç¨‹å†…è¿›è¡Œã€‚æ¥ä¸‹æ¥é‡ç‚¹åˆ†æè¿™ä¸ªè¿›ç¨‹</p><p>è¯·ç‰¢è®°ï¼Œ<strong>æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„</strong>ï¼ˆè¿™ç‚¹å¦‚æœä¸ç†è§£ï¼Œè¯·å›å¤´çœ‹è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ†ï¼‰</p><p>çœ‹çœ‹å®ƒéƒ½åŒ…å«äº†å“ªäº›çº¿ç¨‹ï¼ˆåˆ—ä¸¾ä¸€äº›ä¸»è¦å¸¸é©»çº¿ç¨‹ï¼‰ï¼š</p><h4 id="GUIæ¸²æŸ“çº¿ç¨‹"><a href="#GUIæ¸²æŸ“çº¿ç¨‹" class="headerlink" title="GUIæ¸²æŸ“çº¿ç¨‹"></a>GUIæ¸²æŸ“çº¿ç¨‹</h4><p>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æ<code>HTML</code>ï¼Œ<code>CSS</code>ï¼Œæ„å»º<code>DOM</code>æ ‘å’Œ<code>RenderObject</code>æ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ã€‚<br>å½“ç•Œé¢éœ€è¦<code>é‡ç»˜ï¼ˆRepaintï¼‰</code>æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘<code>å›æµ(reflow)</code>æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ<br>æ³¨æ„ï¼Œ<strong>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„</strong>ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p><h4 id="JSå¼•æ“çº¿ç¨‹"><a href="#JSå¼•æ“çº¿ç¨‹" class="headerlink" title="JSå¼•æ“çº¿ç¨‹"></a>JSå¼•æ“çº¿ç¨‹</h4><p>ä¹Ÿç§°ä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºã€‚ï¼ˆä¾‹å¦‚V8å¼•æ“ï¼‰<br>JSå¼•æ“çº¿ç¨‹è´Ÿè´£è§£æJavascriptè„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚<br>JSå¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ªTabé¡µï¼ˆrendererè¿›ç¨‹ï¼‰ä¸­æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡ŒJSç¨‹åº<br>åŒæ ·æ³¨æ„ï¼Œ<strong>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„</strong>ï¼Œæ‰€ä»¥å¦‚æœJSæ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡ã€‚</p><h4 id="äº‹ä»¶è§¦å‘çº¿ç¨‹"><a href="#äº‹ä»¶è§¦å‘çº¿ç¨‹" class="headerlink" title="äº‹ä»¶è§¦å‘çº¿ç¨‹"></a>äº‹ä»¶è§¦å‘çº¿ç¨‹</h4><p><em>å½’å±äºæµè§ˆå™¨è€Œä¸æ˜¯JSå¼•æ“ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶å¾ªç¯</em>ï¼ˆå¯ä»¥ç†è§£ï¼ŒJSå¼•æ“è‡ªå·±éƒ½å¿™ä¸è¿‡æ¥ï¼Œéœ€è¦æµè§ˆå™¨å¦å¼€çº¿ç¨‹ååŠ©ï¼‰<br>å½“JSå¼•æ“æ‰§è¡Œä»£ç å—å¦‚setTimeOutæ—¶ï¼ˆä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹,å¦‚é¼ æ ‡ç‚¹å‡»ã€AJAXå¼‚æ­¥è¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­<br>å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“çš„å¤„ç†</p><p><strong>æ³¨æ„</strong>ï¼Œç”±äºJSçš„å•çº¿ç¨‹å…³ç³»ï¼Œæ‰€ä»¥è¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶éƒ½å¾—æ’é˜Ÿç­‰å¾…JSå¼•æ“å¤„ç†ï¼ˆå½“JSå¼•æ“ç©ºé—²æ—¶æ‰ä¼šå»æ‰§è¡Œï¼‰</p><h4 id="å®šæ—¶è§¦å‘å™¨çº¿ç¨‹"><a href="#å®šæ—¶è§¦å‘å™¨çº¿ç¨‹" class="headerlink" title="å®šæ—¶è§¦å‘å™¨çº¿ç¨‹"></a>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹</h4><p>ä¼ è¯´ä¸­çš„<code>setInterval</code>ä¸<code>setTimeout</code>æ‰€åœ¨çº¿ç¨‹<br>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”±JavaScriptå¼•æ“è®¡æ•°çš„,ï¼ˆå› ä¸ºJavaScriptå¼•æ“æ˜¯å•çº¿ç¨‹çš„, å¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼‰<br>å› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œï¼‰</p><p><strong>æ³¨æ„</strong>ï¼ŒW3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚<code>setTimeout</code>ä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4msã€‚</p><h4 id="å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹"><a href="#å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹" class="headerlink" title="å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹"></a>å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹</h4><p>åœ¨<code>XMLHttpRequest</code>åœ¨è¿æ¥åæ˜¯é€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚<br>å°†æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å†ç”±JavaScriptå¼•æ“æ‰§è¡Œã€‚</p><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/browser_inner_thread.png" alt="æµè§ˆå™¨å†…æ ¸"></p><p><strong>ä¸ºä»€ä¹ˆJSå¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</strong> è¿™ä¸ªé—®é¢˜å…¶å®åº”è¯¥æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œè­¬å¦‚ï¼Œå¯èƒ½ä»…ä»…æ˜¯å› ä¸ºç”±äºå¤šçº¿ç¨‹çš„å¤æ‚æ€§ï¼Œè­¬å¦‚å¤šçº¿ç¨‹æ“ä½œä¸€èˆ¬è¦åŠ é”ï¼Œå› æ­¤æœ€åˆè®¾è®¡æ—¶é€‰æ‹©äº†å•çº¿ç¨‹ã€‚ã€‚ã€‚</p><h3 id="Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹"><a href="#Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹" class="headerlink" title="Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹"></a>Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹</h3><p>çœ‹åˆ°è¿™é‡Œï¼Œé¦–å…ˆï¼Œåº”è¯¥å¯¹æµè§ˆå™¨å†…çš„è¿›ç¨‹å’Œçº¿ç¨‹éƒ½æœ‰ä¸€å®šç†è§£äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œå†è°ˆè°ˆæµè§ˆå™¨çš„Browserè¿›ç¨‹ï¼ˆæ§åˆ¶è¿›ç¨‹ï¼‰æ˜¯å¦‚ä½•å’Œå†…æ ¸é€šä¿¡çš„ï¼Œ<br>è¿™ç‚¹ä¹Ÿç†è§£åï¼Œå°±å¯ä»¥å°†è¿™éƒ¨åˆ†çš„çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œä»å¤´åˆ°å°¾æœ‰ä¸€ä¸ªå®Œæ•´çš„æ¦‚å¿µã€‚</p><p>å¦‚æœè‡ªå·±æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œç„¶åæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼šä»»åŠ¡ç®¡ç†å™¨ä¸­å‡ºç°äº†ä¸¤ä¸ªè¿›ç¨‹ï¼ˆä¸€ä¸ªæ˜¯ä¸»æ§è¿›ç¨‹ï¼Œä¸€ä¸ªåˆ™æ˜¯æ‰“å¼€Tabé¡µçš„æ¸²æŸ“è¿›ç¨‹ï¼‰ï¼Œ<br>ç„¶ååœ¨è¿™å‰æä¸‹ï¼Œçœ‹ä¸‹æ•´ä¸ªçš„è¿‡ç¨‹ï¼š(ç®€åŒ–äº†å¾ˆå¤š)</p><ul><li><p>Browserè¿›ç¨‹æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆéœ€è¦è·å–é¡µé¢å†…å®¹ï¼ˆè­¬å¦‚é€šè¿‡ç½‘ç»œä¸‹è½½èµ„æºï¼‰ï¼Œéšåå°†è¯¥ä»»åŠ¡é€šè¿‡<code>RendererHostæ¥å£</code>ä¼ é€’ç»™<code>Renderè¿›ç¨‹</code></p></li><li><p>Rendererè¿›ç¨‹çš„Rendereræ¥å£æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•è§£é‡Šåï¼Œäº¤ç»™æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åå¼€å§‹æ¸²æŸ“</p></li></ul><ol><li>æ¸²æŸ“çº¿ç¨‹æ¥æ”¶è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µå¹¶æ¸²æŸ“ç½‘é¡µï¼Œè¿™å…¶ä¸­å¯èƒ½éœ€è¦Browserè¿›ç¨‹è·å–èµ„æºå’Œéœ€è¦<code>GPUè¿›ç¨‹</code>æ¥å¸®åŠ©æ¸²æŸ“</li><li>å½“ç„¶å¯èƒ½ä¼šæœ‰JSçº¿ç¨‹æ“ä½œDOMï¼ˆè¿™æ ·å¯èƒ½ä¼šé€ æˆå›æµå¹¶é‡ç»˜ï¼‰</li><li>æœ€åRenderè¿›ç¨‹å°†ç»“æœä¼ é€’ç»™<code>Browserè¿›ç¨‹</code></li></ol><ul><li>Browserè¿›ç¨‹æ¥æ”¶åˆ°ç»“æœå¹¶å°†ç»“æœç»˜åˆ¶å‡ºæ¥</li></ul><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/browser_rending_interact.png" alt="æµç¨‹"></p><h2 id="æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"><a href="#æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"></a>æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»</h2><h3 id="GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥"><a href="#GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥" class="headerlink" title="GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥"></a>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥</h3><p>ç”±äºJavaScriptæ˜¯å¯æ“çºµDOMçš„ï¼Œå¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³JSçº¿ç¨‹å’ŒUIçº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº†ã€‚</p><p>å› æ­¤ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½®GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“ä¸ºäº’æ–¥çš„å…³ç³»ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œ<br>GUIæ›´æ–°åˆ™ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p><h3 id="JSé˜»å¡é¡µé¢åŠ è½½"><a href="#JSé˜»å¡é¡µé¢åŠ è½½" class="headerlink" title="JSé˜»å¡é¡µé¢åŠ è½½"></a>JSé˜»å¡é¡µé¢åŠ è½½</h3><p>ä»ä¸Šè¿°çš„äº’æ–¥å…³ç³»ï¼Œå¯ä»¥æ¨å¯¼å‡ºï¼ŒJSå¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šé˜»å¡é¡µé¢ã€‚</p><p>è­¬å¦‚ï¼Œå‡è®¾JSå¼•æ“æ­£åœ¨è¿›è¡Œå·¨é‡çš„è®¡ç®—ï¼Œæ­¤æ—¶å°±ç®—GUIæœ‰æ›´æ–°ï¼Œä¹Ÿä¼šè¢«ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œã€‚<br>ç„¶åï¼Œç”±äºå·¨é‡è®¡ç®—ï¼Œæ‰€ä»¥JSå¼•æ“å¾ˆå¯èƒ½å¾ˆä¹…å¾ˆä¹…åæ‰èƒ½ç©ºé—²ï¼Œè‡ªç„¶ä¼šæ„Ÿè§‰åˆ°å·¨å¡æ— æ¯”ã€‚</p><p>æ‰€ä»¥ï¼Œè¦å°½é‡é¿å…JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡çš„æ„Ÿè§‰ã€‚</p><h3 id="WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ"><a href="#WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ"></a>WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ</h3><p>å‰æ–‡ä¸­æœ‰æåˆ°JSå¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œä¸”JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šé˜»å¡é¡µé¢ï¼Œé‚£ä¹ˆJSå°±çœŸçš„å¯¹cpuå¯†é›†å‹è®¡ç®—æ— èƒ½ä¸ºåŠ›ä¹ˆï¼Ÿ</p><p>æ‰€ä»¥ï¼Œåæ¥HTML5ä¸­æ”¯æŒäº†<code>Web Worker</code>ã€‚</p><p><strong>MDNçš„å®˜æ–¹è§£é‡Šæ˜¯</strong>ï¼š</p><pre><code class="html">Web Workerä¸ºWebå†…å®¹åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•ã€‚çº¿ç¨‹å¯ä»¥æ‰§è¡Œä»»åŠ¡è€Œä¸å¹²æ‰°ç”¨æˆ·ç•Œé¢ä¸€ä¸ªworkeræ˜¯ä½¿ç”¨ä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡(e.g. Worker()) è¿è¡Œä¸€ä¸ªå‘½åçš„JavaScriptæ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶åŒ…å«å°†åœ¨å·¥ä½œçº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ; workers è¿è¡Œåœ¨å¦ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ä¸­,ä¸åŒäºå½“å‰çš„windowå› æ­¤ï¼Œä½¿ç”¨ windowå¿«æ·æ–¹å¼è·å–å½“å‰å…¨å±€çš„èŒƒå›´ (è€Œä¸æ˜¯self) åœ¨ä¸€ä¸ª Worker å†…å°†è¿”å›é”™è¯¯</code></pre><p>è¿™æ ·ç†è§£ä¸‹ï¼š</p><ul><li>åˆ›å»º<code>Worker</code>æ—¶ï¼ŒJSå¼•æ“å‘æµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼ˆå­çº¿ç¨‹æ˜¯æµè§ˆå™¨å¼€çš„ï¼Œå®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œè€Œä¸”ä¸èƒ½æ“ä½œDOMï¼‰</li><li>JSå¼•æ“çº¿ç¨‹ä¸<code>worker</code>çº¿ç¨‹é—´é€šè¿‡ç‰¹å®šçš„æ–¹å¼é€šä¿¡ï¼ˆ<code>postMessage API</code>ï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡æ¥ä¸çº¿ç¨‹äº¤äº’ç‰¹å®šçš„æ•°æ®ï¼‰</li></ul><p>æ‰€ä»¥ï¼Œå¦‚æœæœ‰éå¸¸è€—æ—¶çš„å·¥ä½œï¼Œè¯·å•ç‹¬å¼€ä¸€ä¸ª<code>Worker</code>çº¿ç¨‹ï¼Œè¿™æ ·é‡Œé¢ä¸ç®¡å¦‚ä½•ç¿»å¤©è¦†åœ°éƒ½ä¸ä¼šå½±å“JSå¼•æ“ä¸»çº¿ç¨‹ï¼Œ<br>åªå¾…è®¡ç®—å‡ºç»“æœåï¼Œå°†ç»“æœé€šä¿¡ç»™ä¸»çº¿ç¨‹å³å¯ï¼Œperfect!</p><p>è€Œä¸”æ³¨æ„ä¸‹ï¼Œ<strong>JSå¼•æ“æ˜¯å•çº¿ç¨‹çš„</strong>ï¼Œè¿™ä¸€ç‚¹çš„æœ¬è´¨ä»ç„¶æœªæ”¹å˜ï¼ŒWorkerå¯ä»¥ç†è§£æ˜¯æµè§ˆå™¨ç»™JSå¼•æ“å¼€çš„å¤–æŒ‚ï¼Œä¸“é—¨ç”¨æ¥è§£å†³é‚£äº›å¤§é‡è®¡ç®—é—®é¢˜ã€‚</p><h3 id="WebWorkerä¸SharedWorker"><a href="#WebWorkerä¸SharedWorker" class="headerlink" title="WebWorkerä¸SharedWorker"></a>WebWorkerä¸SharedWorker</h3><p>æ—¢ç„¶éƒ½åˆ°äº†è¿™é‡Œï¼Œå°±å†æä¸€ä¸‹<code>SharedWorker</code>ï¼ˆé¿å…åç»­å°†è¿™ä¸¤ä¸ªæ¦‚å¿µææ··ï¼‰</p><p><code>WebWorker</code>åªå±äºæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„Renderè¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸è¿›ç¨‹ï¼‰å…±äº«</p><p>æ‰€ä»¥Chromeåœ¨Renderè¿›ç¨‹ä¸­ï¼ˆæ¯ä¸€ä¸ªTabé¡µå°±æ˜¯ä¸€ä¸ªrenderè¿›ç¨‹ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡ŒWorkerä¸­çš„JavaScriptç¨‹åºã€‚</p><p><code>SharedWorker</code>æ˜¯æµè§ˆå™¨æ‰€æœ‰é¡µé¢å…±äº«çš„ï¼Œä¸èƒ½é‡‡ç”¨ä¸WorkeråŒæ ·çš„æ–¹å¼å®ç°ï¼Œå› ä¸ºå®ƒä¸éš¶å±äºæŸä¸ªRenderè¿›ç¨‹ï¼Œå¯ä»¥ä¸ºå¤šä¸ªRenderè¿›ç¨‹å…±äº«ä½¿ç”¨</p><p>æ‰€ä»¥Chromeæµè§ˆå™¨ä¸º<code>SharedWorker</code>å•ç‹¬åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡ŒJavaScriptç¨‹åºï¼Œåœ¨æµè§ˆå™¨ä¸­æ¯ä¸ªç›¸åŒçš„JavaScriptåªå­˜åœ¨ä¸€ä¸ª<code>SharedWorker</code>è¿›ç¨‹ï¼Œä¸ç®¡å®ƒè¢«åˆ›å»ºå¤šå°‘æ¬¡ã€‚<br>çœ‹åˆ°è¿™é‡Œï¼Œåº”è¯¥å°±å¾ˆå®¹æ˜“æ˜ç™½äº†ï¼Œ<strong>æœ¬è´¨ä¸Šå°±æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</strong>ã€‚<code>SharedWorker</code>ç”±ç‹¬ç«‹çš„è¿›ç¨‹ç®¡ç†ï¼Œ<code>WebWorker</code>åªæ˜¯å±äºrenderè¿›ç¨‹ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹</p><h2 id="ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹"><a href="#ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹" class="headerlink" title="ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></a>ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h2><p>ä¸ºäº†ç®€åŒ–ç†è§£ï¼Œå‰æœŸå·¥ä½œç›´æ¥çœç•¥æˆï¼š</p><pre><code class="html">- æµè§ˆå™¨è¾“å…¥urlï¼Œæµè§ˆå™¨ä¸»è¿›ç¨‹æ¥ç®¡ï¼Œå¼€ä¸€ä¸ªä¸‹è½½çº¿ç¨‹ï¼Œç„¶åè¿›è¡Œ httpè¯·æ±‚ï¼ˆç•¥å»DNSæŸ¥è¯¢ï¼ŒIPå¯»å€ç­‰ç­‰æ“ä½œï¼‰ï¼Œç„¶åç­‰å¾…å“åº”ï¼Œè·å–å†…å®¹ï¼Œéšåå°†å†…å®¹é€šè¿‡RendererHostæ¥å£è½¬äº¤ç»™Rendererè¿›ç¨‹- æµè§ˆå™¨æ¸²æŸ“æµç¨‹å¼€å§‹æµè§ˆå™¨å™¨å†…æ ¸æ‹¿åˆ°å†…å®¹åï¼Œæ¸²æŸ“å¤§æ¦‚å¯ä»¥åˆ’åˆ†æˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š1.è§£æhtmlå»ºç«‹domæ ‘2.è§£æcssæ„å»ºrenderæ ‘ï¼ˆå°†CSSä»£ç è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œç„¶åç»“åˆDOMåˆå¹¶æˆrenderæ ‘ï¼‰3.å¸ƒå±€renderæ ‘ï¼ˆLayout/reflowï¼‰ï¼Œè´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®—4.ç»˜åˆ¶renderæ ‘ï¼ˆpaintï¼‰ï¼Œç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯5.æµè§ˆå™¨ä¼šå°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPUï¼ŒGPUä¼šå°†å„å±‚åˆæˆï¼ˆcompositeï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</code></pre><p>æ‰€æœ‰è¯¦ç»†æ­¥éª¤éƒ½å·²ç»ç•¥å»ï¼Œæ¸²æŸ“å®Œæ¯•åå°±æ˜¯loadäº‹ä»¶äº†ï¼Œä¹‹åå°±æ˜¯è‡ªå·±çš„JSé€»è¾‘å¤„ç†äº†</p><p>æ—¢ç„¶ç•¥å»äº†ä¸€äº›è¯¦ç»†çš„æ­¥éª¤ï¼Œé‚£ä¹ˆå°±æä¸€äº›å¯èƒ½éœ€è¦æ³¨æ„çš„ç»†èŠ‚æŠŠã€‚</p><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/browser_rending.png" alt="æ¸²æŸ“è¿‡ç¨‹"></p><h3 id="loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå"><a href="#loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå" class="headerlink" title="loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå"></a>loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå</h3><p>ä¸Šé¢æåˆ°ï¼Œæ¸²æŸ“å®Œæ¯•åä¼šè§¦å‘loadäº‹ä»¶ï¼Œé‚£ä¹ˆä½ èƒ½åˆ†æ¸…æ¥šloadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆåä¹ˆï¼Ÿ</p><p>å¾ˆç®€å•ï¼ŒçŸ¥é“å®ƒä»¬çš„å®šä¹‰å°±å¯ä»¥äº†ï¼š</p><blockquote><p>å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ã€‚(è­¬å¦‚å¦‚æœæœ‰asyncåŠ è½½çš„è„šæœ¬å°±ä¸ä¸€å®šå®Œæˆ)</p></blockquote><blockquote><p>å½“ onload äº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚(æ¸²æŸ“å®Œæ¯•äº†)</p></blockquote><p>æ‰€ä»¥ï¼Œé¡ºåºæ˜¯ï¼š<code>DOMContentLoaded -&gt; load</code></p><h3 id="cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ"><a href="#cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ" class="headerlink" title="cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ"></a>cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ</h3><p>è¿™é‡Œè¯´çš„æ˜¯å¤´éƒ¨å¼•å…¥cssçš„æƒ…å†µ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼š<strong>cssæ˜¯ç”±å•ç‹¬çš„ä¸‹è½½çº¿ç¨‹å¼‚æ­¥ä¸‹è½½çš„</strong>ã€‚</p><p>ç„¶åå†è¯´ä¸‹å‡ ä¸ªç°è±¡ï¼š</p><blockquote><p>cssåŠ è½½ä¸ä¼šé˜»å¡DOMæ ‘è§£æï¼ˆå¼‚æ­¥åŠ è½½æ—¶DOMç…§å¸¸æ„å»ºï¼‰<br>ä½†ä¼šé˜»å¡renderæ ‘æ¸²æŸ“(æ¸²æŸ“æ—¶éœ€ç­‰cssåŠ è½½å®Œæ¯•ï¼Œå› ä¸ºrenderæ ‘éœ€è¦cssä¿¡æ¯)<br>è¿™å¯èƒ½ä¹Ÿæ˜¯æµè§ˆå™¨çš„ä¸€ç§ä¼˜åŒ–æœºåˆ¶ã€‚</p></blockquote><p>å› ä¸ºä½ åŠ è½½cssçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šä¿®æ”¹ä¸‹é¢DOMèŠ‚ç‚¹çš„æ ·å¼ï¼Œ<br>å¦‚æœcssåŠ è½½ä¸é˜»å¡renderæ ‘æ¸²æŸ“çš„è¯ï¼Œé‚£ä¹ˆå½“cssåŠ è½½å®Œä¹‹åï¼Œ<br>renderæ ‘å¯èƒ½åˆå¾—é‡æ–°é‡ç»˜æˆ–è€…å›æµäº†ï¼Œè¿™å°±é€ æˆäº†ä¸€äº›æ²¡æœ‰å¿…è¦çš„æŸè€—ã€‚<br>æ‰€ä»¥å¹²è„†å°±å…ˆæŠŠDOMæ ‘çš„ç»“æ„å…ˆè§£æå®Œï¼ŒæŠŠå¯ä»¥åšçš„å·¥ä½œåšå®Œï¼Œç„¶åç­‰ä½ cssåŠ è½½å®Œä¹‹åï¼Œ</p><p>åœ¨æ ¹æ®æœ€ç»ˆçš„æ ·å¼æ¥æ¸²æŸ“renderæ ‘ï¼Œè¿™ç§åšæ³•æ€§èƒ½æ–¹é¢ç¡®å®ä¼šæ¯”è¾ƒå¥½ä¸€ç‚¹ã€‚</p><h2 id="ä»Event-Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶"><a href="#ä»Event-Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶" class="headerlink" title="ä»Event Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶"></a>ä»Event Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶</h2><p>åˆ°æ­¤æ—¶ï¼Œå·²ç»æ˜¯å±äºæµè§ˆå™¨é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæ¯•åçš„äº‹æƒ…ï¼ŒJSå¼•æ“çš„ä¸€äº›è¿è¡Œæœºåˆ¶åˆ†æã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œä¸è°ˆå¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ<code>VOï¼Œscop chain</code>ç­‰æ¦‚å¿µï¼ˆè¿™äº›å®Œå…¨å¯ä»¥æ•´ç†æˆå¦ä¸€ç¯‡æ–‡ç« äº†ï¼‰ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç»“åˆ<code>Event Loop</code>æ¥è°ˆJSä»£ç æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚</p><p>è¯»è¿™éƒ¨åˆ†çš„å‰ææ˜¯å·²ç»çŸ¥é“äº†JSå¼•æ“æ˜¯å•çº¿ç¨‹ï¼Œè€Œä¸”è¿™é‡Œä¼šç”¨åˆ°ä¸Šæ–‡ä¸­çš„å‡ ä¸ªæ¦‚å¿µï¼šï¼ˆå¦‚æœä¸æ˜¯å¾ˆç†è§£ï¼Œå¯ä»¥å›å¤´æ¸©ä¹ ï¼‰</p><blockquote><p>JSå¼•æ“çº¿ç¨‹</p></blockquote><ul><li>äº‹ä»¶è§¦å‘çº¿ç¨‹</li><li>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹</li></ul><blockquote><p>ç„¶åå†ç†è§£ä¸€ä¸ªæ¦‚å¿µï¼š</p></blockquote><ul><li>JSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</li><li>åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ</li><li>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ç€ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</li><li>ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶JSå¼•æ“ç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚</li></ul><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/js_event_loop.png" alt="å›¾"></p><p>çœ‹åˆ°è¿™é‡Œï¼Œåº”è¯¥å°±å¯ä»¥ç†è§£äº†ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶å€™setTimeoutæ¨å…¥çš„äº‹ä»¶ä¸èƒ½å‡†æ—¶æ‰§è¡Œï¼Ÿå› ä¸ºå¯èƒ½åœ¨<strong>å®ƒæ¨å…¥åˆ°äº‹ä»¶åˆ—è¡¨æ—¶ï¼Œä¸»çº¿ç¨‹è¿˜ä¸ç©ºé—²ï¼Œæ­£åœ¨æ‰§è¡Œå…¶å®ƒä»£ç </strong>ï¼Œ<br>æ‰€ä»¥è‡ªç„¶æœ‰è¯¯å·®ã€‚</p><h3 id="äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……</h3><p>è¿™é‡Œå°±ç›´æ¥å¼•ç”¨ä¸€å¼ å›¾ç‰‡æ¥ååŠ©ç†è§£ï¼šï¼ˆå‚è€ƒè‡ª<a href="http://vimeo.com/96425312">Philip Robertsçš„æ¼”è®²ã€ŠHelp, Iâ€™m stuck in an event-loopã€‹</a>ï¼‰</p><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/js_event_loop2.png" alt="äº‹ä»¶å¾ªç¯"></p><blockquote><p>ä¸Šå›¾å¤§è‡´æè¿°å°±æ˜¯ï¼š</p></blockquote><ul><li>ä¸»çº¿ç¨‹è¿è¡Œæ—¶ä¼šäº§ç”Ÿæ‰§è¡Œæ ˆï¼Œ</li><li>æ ˆä¸­çš„ä»£ç è°ƒç”¨æŸäº›apiæ—¶ï¼Œå®ƒä»¬ä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ å„ç§äº‹ä»¶ï¼ˆå½“æ»¡è¶³è§¦å‘æ¡ä»¶åï¼Œå¦‚ajaxè¯·æ±‚å®Œæ¯•ï¼‰</li><li>è€Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šè¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼Œå»æ‰§è¡Œé‚£äº›å›è°ƒ</li></ul><p>å¦‚æ­¤å¾ªç¯<br><strong>æ³¨æ„</strong>ï¼Œæ€»æ˜¯è¦ç­‰å¾…æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰ä¼šå»è¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶(æ ˆæ‰§è¡Œå®Œ,æ‰ä¼šæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„äº‹ä»¶)</p><h3 id="å•ç‹¬è¯´è¯´å®šæ—¶å™¨"><a href="#å•ç‹¬è¯´è¯´å®šæ—¶å™¨" class="headerlink" title="å•ç‹¬è¯´è¯´å®šæ—¶å™¨"></a>å•ç‹¬è¯´è¯´å®šæ—¶å™¨</h3><p>ä¸Šè¿°äº‹ä»¶å¾ªç¯æœºåˆ¶çš„æ ¸å¿ƒæ˜¯ï¼šJSå¼•æ“çº¿ç¨‹å’Œäº‹ä»¶è§¦å‘çº¿ç¨‹</p><p>ä½†äº‹ä»¶ä¸Šï¼Œé‡Œé¢è¿˜æœ‰ä¸€äº›éšè—ç»†èŠ‚ï¼Œè­¬å¦‚<em>è°ƒç”¨setTimeoutåï¼Œæ˜¯å¦‚ä½•ç­‰å¾…ç‰¹å®šæ—¶é—´åæ‰æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„</em>ï¼Ÿ</p><p>æ˜¯JSå¼•æ“æ£€æµ‹çš„ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯äº†ã€‚å®ƒæ˜¯ç”±<code>å®šæ—¶å™¨çº¿ç¨‹æ§åˆ¶</code>ï¼ˆå› ä¸ºJSå¼•æ“è‡ªå·±éƒ½å¿™ä¸è¿‡æ¥ï¼Œæ ¹æœ¬æ— æš‡åˆ†èº«ï¼‰</p><p><strong>ä¸ºä»€ä¹ˆè¦å•ç‹¬çš„å®šæ—¶å™¨çº¿ç¨‹</strong>ï¼Ÿå› ä¸ºJavaScriptå¼•æ“æ˜¯å•çº¿ç¨‹çš„, å¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼Œå› æ­¤å¾ˆæœ‰å¿…è¦å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹ç”¨æ¥è®¡æ—¶ã€‚</p><p><strong>ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°å®šæ—¶å™¨çº¿ç¨‹</strong>ï¼Ÿå½“ä½¿ç”¨<code>setTimeout</code>æˆ–<code>setInterval</code>æ—¶ï¼Œå®ƒéœ€è¦å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼Œè®¡æ—¶å®Œæˆåå°±ä¼šå°†ç‰¹å®šçš„äº‹ä»¶æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚</p><p>è­¬å¦‚:</p><pre><code class="js">setTimeout(function()&#123;    console.log(&#39;hello!&#39;);&#125;, 1000);</code></pre><p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å½“1000æ¯«ç§’è®¡æ—¶å®Œæ¯•åï¼ˆç”±å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼‰ï¼Œå°†å›è°ƒå‡½æ•°æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œ</p><pre><code class="js">setTimeout(function()&#123;    console.log(&#39;hello!&#39;);&#125;, 0);console.log(&#39;begin&#39;);</code></pre><p>è¿™æ®µä»£ç çš„æ•ˆæœæ˜¯æœ€å¿«çš„æ—¶é—´å†…å°†å›è°ƒå‡½æ•°æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œ</p><p>æ³¨æ„ï¼š</p><p>æ‰§è¡Œç»“æœæ˜¯ï¼š<code>å…ˆbeginåhello!</code></p><p>è™½ç„¶ä»£ç çš„æœ¬æ„æ˜¯0æ¯«ç§’åå°±æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œä½†æ˜¯W3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®š<strong>è¦æ±‚setTimeoutä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4ms</strong>ã€‚<br>(ä¸è¿‡ä¹Ÿæœ‰ä¸€è¯´æ˜¯ä¸åŒæµè§ˆå™¨æœ‰ä¸åŒçš„æœ€å°æ—¶é—´è®¾å®š)</p><p>å°±ç®—ä¸ç­‰å¾…4msï¼Œå°±ç®—å‡è®¾0æ¯«ç§’å°±æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œä¹Ÿä¼šå…ˆæ‰§è¡Œbeginï¼ˆå› ä¸ºåªæœ‰å¯æ‰§è¡Œæ ˆå†…ç©ºäº†åæ‰ä¼šä¸»åŠ¨è¯»å–äº‹ä»¶é˜Ÿåˆ—ï¼‰</p><h3 id="setTimeoutè€Œä¸æ˜¯setInterval"><a href="#setTimeoutè€Œä¸æ˜¯setInterval" class="headerlink" title="setTimeoutè€Œä¸æ˜¯setInterval"></a>setTimeoutè€Œä¸æ˜¯setInterval</h3><p>ç”¨<code>setTimeout</code>æ¨¡æ‹Ÿå®šæœŸè®¡æ—¶å’Œç›´æ¥ç”¨<code>setInterval</code>æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>å› ä¸ºæ¯æ¬¡<code>setTimeout</code>è®¡æ—¶åˆ°åå°±ä¼šå»æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œä¸€æ®µæ—¶é—´åæ‰ä¼šç»§ç»­<code>setTimeout</code>ï¼Œä¸­é—´å°±å¤šäº†è¯¯å·®<br>ï¼ˆè¯¯å·®å¤šå°‘ä¸ä»£ç æ‰§è¡Œæ—¶é—´æœ‰å…³ï¼‰</p><p>è€Œ<code>setInterval</code>åˆ™æ˜¯æ¯æ¬¡éƒ½ç²¾ç¡®çš„éš”ä¸€æ®µæ—¶é—´æ¨å…¥ä¸€ä¸ªäº‹ä»¶<br>ï¼ˆä½†æ˜¯ï¼Œäº‹ä»¶çš„å®é™…æ‰§è¡Œæ—¶é—´ä¸ä¸€å®šå°±å‡†ç¡®ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯è¿™ä¸ªäº‹ä»¶è¿˜æ²¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶å°±æ¥äº†ï¼‰</p><p>è€Œä¸”<code>setInterval</code>æœ‰<strong>ä¸€äº›æ¯”è¾ƒè‡´å‘½çš„é—®é¢˜</strong>å°±æ˜¯ï¼š</p><ul><li>æŸäº›é—´éš”ä¼šè¢«è·³è¿‡ï¼ˆä¸¢å¸§ç°è±¡ï¼‰</li><li>å®šæ—¶å™¨ä¹‹é—´çš„é—´éš”ä¼šæ¯”é¢„æœŸå°</li></ul><p>æŠŠæµè§ˆå™¨æœ€å°åŒ–æ˜¾ç¤ºç­‰æ“ä½œæ—¶ï¼Œ<code>setInterval</code>å¹¶ä¸æ˜¯ä¸æ‰§è¡Œç¨‹åºï¼Œ<br>å®ƒä¼šæŠŠ<code>setInterval</code>çš„å›è°ƒå‡½æ•°æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œç­‰æµè§ˆå™¨çª—å£å†æ¬¡æ‰“å¼€æ—¶ï¼Œä¸€ç¬é—´å…¨éƒ¨æ‰§è¡Œæ—¶</p><p>æ‰€ä»¥ï¼Œé‰´äºè¿™ä¹ˆå¤šä½†é—®é¢˜ï¼Œç›®å‰ä¸€èˆ¬è®¤ä¸ºçš„æœ€ä½³æ–¹æ¡ˆæ˜¯ï¼šç”¨<code>setTimeout</code>æ¨¡æ‹Ÿ<code>setInterval</code>ï¼Œæˆ–è€…ç‰¹æ®Šåœºåˆç›´æ¥ç”¨<code>requestAnimationFrame</code></p><pre><code class="js">// setTimeoutæ¨¡æ‹ŸsetTimeIntervallet count = 0;let timerId = null;timerId = setTimeout(function run() &#123;  console.log(&quot;run -&gt; &quot;, count);  if (count &gt;= 3) &#123;    clearTimeout(timerId);    return;  &#125;  count += 1;  timerId = setTimeout(run, 1000);&#125;, 1000);</code></pre><p>è¡¥å……ï¼šJSé«˜ç¨‹ä¸­æœ‰æåˆ°ï¼ŒJSå¼•æ“ä¼šå¯¹<code>setInterval</code>è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœå½“å‰äº‹ä»¶é˜Ÿåˆ—ä¸­æœ‰<code>setInterval</code>çš„å›è°ƒï¼Œä¸ä¼šé‡å¤æ·»åŠ ã€‚ä¸è¿‡ï¼Œä»ç„¶æ˜¯æœ‰å¾ˆå¤šé—®é¢˜ã€‚ã€‚ã€‚</p><h2 id="äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask"><a href="#äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask" class="headerlink" title="äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask"></a>äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask</h2><p>è¿™æ®µå‚è€ƒäº†å‚è€ƒæ¥æºä¸­çš„ç¬¬2ç¯‡æ–‡ç« ï¼ˆè‹±æ–‡ç‰ˆçš„ï¼‰ï¼Œï¼ˆåŠ äº†ä¸‹è‡ªå·±çš„ç†è§£é‡æ–°æè¿°äº†ä¸‹ï¼‰ï¼Œ<br>å¼ºçƒˆæ¨èæœ‰è‹±æ–‡åŸºç¡€çš„åŒå­¦ç›´æ¥è§‚çœ‹åŸæ–‡ï¼Œä½œè€…æè¿°çš„å¾ˆæ¸…æ™°ï¼Œç¤ºä¾‹ä¹Ÿå¾ˆä¸é”™ï¼Œå¦‚ä¸‹ï¼š</p><p>(<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/)[https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/]">https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/)[https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/]</a></p><p>ä¸Šæ–‡ä¸­å°†JSäº‹ä»¶å¾ªç¯æœºåˆ¶æ¢³ç†äº†ä¸€éï¼Œåœ¨ES5çš„æƒ…å†µæ˜¯å¤Ÿç”¨äº†ï¼Œä½†æ˜¯åœ¨ES6ç››è¡Œçš„ç°åœ¨ï¼Œä»ç„¶ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè­¬å¦‚ä¸‹é¢è¿™é¢˜ï¼š</p><pre><code class="js">console.log(&#39;script start&#39;);setTimeout(function() &#123;    console.log(&#39;setTimeout&#39;);&#125;, 0);Promise.resolve().then(function() &#123;    console.log(&#39;promise1&#39;);&#125;).then(function() &#123;    console.log(&#39;promise2&#39;);&#125;);console.log(&#39;script end&#39;);// æ‰§è¡Œé¡ºåº/* script startscript endpromise1promise2setTimeout */</code></pre><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º<code>Promise</code>é‡Œæœ‰äº†ä¸€ä¸ªä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼š<code>microtask</code></p><p>æˆ–è€…ï¼Œè¿›ä¸€æ­¥ï¼ŒJSä¸­åˆ†ä¸ºä¸¤ç§ä»»åŠ¡ç±»å‹ï¼š<code>macrotaskå’Œmicrotask</code>ï¼Œåœ¨ECMAScriptä¸­ï¼Œ<code>microtaskç§°ä¸ºjobsï¼Œmacrotaskå¯ç§°ä¸ºtask</code></p><blockquote><p>å®ƒä»¬çš„å®šä¹‰ï¼ŸåŒºåˆ«ï¼Ÿç®€å•ç‚¹å¯ä»¥æŒ‰å¦‚ä¸‹ç†è§£ï¼š</p></blockquote><ul><li><code>macrotask</code>ï¼ˆåˆç§°ä¹‹ä¸ºå®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰</li></ul><p>æ¯ä¸€ä¸ªtaskä¼šä»å¤´åˆ°å°¾å°†è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸ä¼šæ‰§è¡Œå…¶å®ƒ<br>æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—JSå†…éƒ¨taskä¸DOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªtaskæ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“<br>ï¼ˆ<code>task-&gt;æ¸²æŸ“-&gt;task-&gt;...</code>ï¼‰</p><ul><li><code>microtask</code>ï¼ˆåˆç§°ä¸ºå¾®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰taskä»»åŠ¡åï¼Œä¸‹ä¸€ä¸ªtaskä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰<br>æ‰€ä»¥å®ƒçš„å“åº”é€Ÿåº¦ç›¸æ¯”setTimeoutï¼ˆsetTimeoutæ˜¯taskï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ªmacrotaskæ‰§è¡Œå®Œåï¼Œå°±ä¼šå°†åœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰microtaskéƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰</p><p>åˆ†åˆ«ä»€ä¹ˆæ ·çš„åœºæ™¯ä¼šå½¢æˆ<code>macrotask</code>å’Œ<code>microtask</code>å‘¢ï¼Ÿ</p><ul><li><strong>macrotaskï¼šä¸»ä»£ç å—ï¼ŒsetTimeoutï¼ŒsetIntervalç­‰</strong>ï¼ˆå¯ä»¥çœ‹åˆ°ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ¯ä¸€ä¸ªäº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªmacrotaskï¼‰</li><li><strong>microtaskï¼šPromiseï¼Œprocess.nextTickç­‰</strong></li></ul><p>è¡¥å……ï¼šåœ¨nodeç¯å¢ƒä¸‹ï¼Œ<code>process.nextTick</code>çš„ä¼˜å…ˆçº§é«˜äº<code>Promise</code>ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šåœ¨å®ä»»åŠ¡ç»“æŸåä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„<code>nextTickQueue</code>éƒ¨åˆ†ï¼Œç„¶åæ‰ä¼šæ‰§è¡Œå¾®ä»»åŠ¡ä¸­çš„<code>Promise</code>éƒ¨åˆ†ã€‚</p><p>å‚è€ƒï¼š(<a href="https://segmentfault.com/q/1010000011914016)[https://segmentfault.com/q/1010000011914016]">https://segmentfault.com/q/1010000011914016)[https://segmentfault.com/q/1010000011914016]</a></p><p>å†æ ¹æ®çº¿ç¨‹æ¥ç†è§£ä¸‹ï¼š</p><ul><li><code>macrotask</code>ä¸­çš„äº‹ä»¶éƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­çš„ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç»´æŠ¤;</li><li><code>microtask</code>ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡éƒ½æ˜¯æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob Queuesï¼‰ä¸­ï¼Œç­‰å¾…å½“å‰<code>macrotask</code>æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤<br>ï¼ˆè¿™ç‚¹ç”±è‡ªå·±ç†è§£+æ¨æµ‹å¾—å‡ºï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰</li></ul><blockquote><p>æ‰€ä»¥ï¼Œæ€»ç»“ä¸‹è¿è¡Œæœºåˆ¶ï¼š</p></blockquote><ol><li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li><li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­</li><li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰</li><li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“</li><li>æ¸²æŸ“å®Œæ¯•åï¼ŒJSçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li></ol><p><img src="https://dailc.github.io/staticResource/blog/basicKnowledge/singlethreadeventloop/js_macrotask_microtask.png" alt="å¦‚å›¾"></p><p>å¦å¤–ï¼Œè¯·æ³¨æ„ä¸‹<code>Promise</code>çš„<code>polyfill</code>ä¸å®˜æ–¹ç‰ˆæœ¬çš„åŒºåˆ«ï¼š</p><ul><li>å®˜æ–¹ç‰ˆæœ¬ä¸­ï¼Œæ˜¯æ ‡å‡†çš„microtaskå½¢å¼</li><li><code>polyfill</code>ï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡setTimeoutæ¨¡æ‹Ÿçš„ï¼Œæ‰€ä»¥æ˜¯macrotaskå½¢å¼</li></ul><p>è¯·ç‰¹åˆ«æ³¨æ„è¿™ä¸¤ç‚¹åŒºåˆ«<br>æ³¨æ„ï¼Œæœ‰ä¸€äº›æµè§ˆå™¨æ‰§è¡Œç»“æœä¸ä¸€æ ·ï¼ˆå› ä¸ºå®ƒä»¬å¯èƒ½æŠŠmicrotaskå½“æˆmacrotaskæ¥æ‰§è¡Œäº†ï¼‰ï¼Œ<br>ä½†æ˜¯ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œä¸æè¿°ä¸€äº›ä¸æ ‡å‡†çš„æµè§ˆå™¨ä¸‹çš„åœºæ™¯ï¼ˆä½†è®°ä½ï¼Œæœ‰äº›æµè§ˆå™¨å¯èƒ½å¹¶ä¸æ ‡å‡†ï¼‰</p><p><strong>ä½¿ç”¨MutationObserverå®ç°microtask</strong></p><p><code>MutationObserver</code>å¯ä»¥ç”¨æ¥å®ç°microtask<br>ï¼ˆå®ƒå±äºmicrotaskï¼Œä¼˜å…ˆçº§å°äºPromiseï¼Œä¸€èˆ¬æ˜¯Promiseä¸æ”¯æŒæ—¶æ‰ä¼šè¿™æ ·åšï¼‰</p><p><strong>å®ƒæ˜¯HTML5ä¸­çš„æ–°ç‰¹æ€§ï¼Œä½œç”¨æ˜¯ï¼šç›‘å¬ä¸€ä¸ªDOMå˜åŠ¨ï¼Œ</strong><br>å½“DOMå¯¹è±¡æ ‘å‘ç”Ÿä»»ä½•å˜åŠ¨æ—¶ï¼Œ<code>Mutation Observer</code>ä¼šå¾—åˆ°é€šçŸ¥</p><p>åƒä»¥å‰çš„Vueæºç ä¸­å°±æ˜¯<strong>åˆ©ç”¨å®ƒæ¥æ¨¡æ‹ŸnextTickçš„</strong>ï¼Œ</p><p><strong>å…·ä½“åŸç†</strong>æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ª<code>TextNode</code>å¹¶ç›‘å¬å†…å®¹å˜åŒ–ï¼Œç„¶åè¦<code>nextTick</code>çš„æ—¶å€™å»æ”¹ä¸€ä¸‹è¿™ä¸ªèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œ</p><p>å¦‚ä¸‹ï¼šï¼ˆVueçš„æºç ï¼Œæœªä¿®æ”¹ï¼‰</p><pre><code class="js">var counter = 1var observer = new MutationObserver(nextTickHandler)var textNode = document.createTextNode(String(counter))observer.observe(textNode, &#123;    characterData: true&#125;)timerFunc = () =&gt; &#123;    counter = (counter + 1) % 2    textNode.data = String(counter)&#125;</code></pre><p><a href="https://github.com/vuejs/vue/blob/9cfd63a7d08c1eba029c8bd7463b3047c3347826/src/core/util/env.js#L86-L95">vueå¯¹åº”æºç é“¾æ¥</a></p><p>ä¸è¿‡ï¼Œç°åœ¨çš„<code>Vueï¼ˆ2.5+ï¼‰</code>çš„nextTickå®ç°<strong>ç§»é™¤äº†MutationObserverçš„æ–¹å¼</strong>ï¼ˆæ®è¯´æ˜¯å…¼å®¹æ€§åŸå› ï¼‰ï¼Œ<br>å–è€Œä»£ä¹‹çš„æ˜¯ä½¿ç”¨<strong>MessageChannel</strong><br>ï¼ˆå½“ç„¶ï¼Œé»˜è®¤æƒ…å†µä»ç„¶æ˜¯Promiseï¼Œä¸æ”¯æŒæ‰å…¼å®¹çš„ï¼‰ã€‚</p><p><strong>MessageChannel</strong>å±äºå®ä»»åŠ¡ï¼Œä¼˜å…ˆçº§æ˜¯ï¼š<code>MessageChannel-&gt;setTimeout</code>ï¼Œ<br>æ‰€ä»¥<code>Vueï¼ˆ2.5+ï¼‰</code>å†…éƒ¨çš„nextTickä¸2.4åŠä¹‹å‰çš„å®ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œéœ€è¦æ³¨æ„ä¸‹ã€‚</p><p>è¿™é‡Œä¸å±•å¼€ï¼Œå¯ä»¥çœ‹ä¸‹(åœ°å€)[<a href="https://juejin.im/post/5a1af88f5188254a701ec230]">https://juejin.im/post/5a1af88f5188254a701ec230]</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹æ•°æ®ç»“æ„</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</id>
    <published>2020-09-25T08:10:59.000Z</published>
    <updated>2020-09-25T08:12:17.099Z</updated>
    
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹ç®—æ³•</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%AE%97%E6%B3%95/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/25/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%AE%97%E6%B3%95/</id>
    <published>2020-09-25T07:51:16.000Z</published>
    <updated>2020-09-27T08:37:00.920Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><p>ç®—æ³•åº”è¯¥ç®—æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹æ˜¯çš„å¿…å¤‡æŠ€èƒ½äº†,æ¥ä¸‹æ¥æ’åˆ—ä¸‹,æˆ‘çŸ¥é“çš„ä¸€äº›ç®—æ³•åŠåº”è¯¥æŒæ¡çš„ç®—æ³•</p><h2 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h2><p><a href="https://juejin.im/post/6844903444365443080">æ’åº</a></p><h2 id="leetcode"><a href="#leetcode" class="headerlink" title="leetcode"></a>leetcode</h2><p><a href="https://singsing.io/blog/tags/FreeCodeCamp/page/5/">leetcode</a></p><h2 id="JavaScript-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾"><a href="#JavaScript-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾" class="headerlink" title="JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾"></a>JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾</h2><p><a href="https://github.com/biaochenxuying/blog/issues/43">æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h1 id=&quot;ç®—æ³•&quot;&gt;&lt;a href=&quot;#ç®—æ³•&quot; class=&quot;headerlink&quot; title=&quot;ç®—æ³•&quot;&gt;&lt;/a&gt;ç®—æ³•&lt;/h1&gt;&lt;p&gt;ç®—æ³•åº”è¯¥ç®—æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹æ˜¯çš„å¿…å¤‡æŠ€èƒ½äº†,æ¥ä¸‹æ¥</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹é€’å½’</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/24/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E9%80%92%E5%BD%92/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/24/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E9%80%92%E5%BD%92/</id>
    <published>2020-09-24T06:05:16.000Z</published>
    <updated>2020-09-24T07:56:03.634Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/ruanyf/es6tutorial/blob/2e1c10776a9350debfec47de8ddeaf1c2c5a80cc/docs/function.md">åŸæ–‡åœ°å€</a></p><h1 id="é€’å½’ç®€ä»‹"><a href="#é€’å½’ç®€ä»‹" class="headerlink" title="é€’å½’ç®€ä»‹"></a>é€’å½’ç®€ä»‹</h1><blockquote><p>ä¸€ä¸ªè¿‡ç¨‹æˆ–å‡½æ•°åœ¨å…¶å®šä¹‰æˆ–è¯´æ˜ä¸­æœ‰ç›´æ¥æˆ–é—´æ¥è°ƒç”¨è‡ªèº«çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒé€šå¸¸æŠŠä¸€ä¸ªå¤§å‹å¤æ‚çš„é—®é¢˜å±‚å±‚è½¬åŒ–ä¸ºä¸€ä¸ªä¸åŸé—®é¢˜ç›¸ä¼¼çš„è§„æ¨¡è¾ƒå°çš„é—®é¢˜æ¥æ±‚è§£ï¼Œé€’å½’ç­–ç•¥åªéœ€å°‘é‡çš„ç¨‹åºå°±å¯æè¿°å‡ºè§£é¢˜è¿‡ç¨‹æ‰€éœ€è¦çš„å¤šæ¬¡é‡å¤è®¡ç®—ï¼Œå¤§å¤§åœ°å‡å°‘äº†ç¨‹åºçš„ä»£ç é‡ã€‚</p></blockquote><p>åœ¨çœ‹é€’å½’ä¹‹å‰ï¼Œä½ é¦–å…ˆè¦æ˜ç™½â€<strong>æ ˆ</strong>â€œçš„çŸ¥è¯†ï¼ŒçŸ¥é“çš„å¤ªå¤šä¸å¥½ï¼Œä½ åªéœ€è®°ä½  <code>æ ˆ---â€œåè¿›å…ˆå‡ºâ€</code>ï¼Œå°±èƒ½äº†ã€‚</p><h2 id="é€’å½’çš„æ¦‚å¿µ"><a href="#é€’å½’çš„æ¦‚å¿µ" class="headerlink" title="é€’å½’çš„æ¦‚å¿µ"></a>é€’å½’çš„æ¦‚å¿µ</h2><p>é€’å½’çš„æ„æ€å°±æ˜¯å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±æœ¬èº«ï¼Œæˆ–è€…åœ¨è‡ªå·±å‡½æ•°è°ƒç”¨çš„ä¸‹çº§å‡½æ•°ä¸­è°ƒç”¨è‡ªå·±ã€‚</p><blockquote><p>åœ¨ç¨‹åºä¸­å‡½æ•°ç›´æ¥æˆ–é—´æ¥è°ƒç”¨è‡ªå·±</p></blockquote><ol><li>ç›´æ¥è°ƒç”¨è‡ªå·±</li><li>é—´æ¥è°ƒç”¨è‡ªå·±<br>Â· è·³å‡ºç»“æ„,æœ‰äº†è·³å‡ºæ‰æœ‰ç»“æœ</li></ol><h2 id="é€’å½’çš„æ€æƒ³"><a href="#é€’å½’çš„æ€æƒ³" class="headerlink" title="é€’å½’çš„æ€æƒ³"></a>é€’å½’çš„æ€æƒ³</h2><p>Â· é€’å½’çš„è°ƒç”¨,æœ€ç»ˆè¿˜æ˜¯è¦è½¬æ¢ä¸ºè‡ªå·±è¿™ä¸ªå‡½æ•°</p><ol><li>å¦‚æœæœ‰ä¸ªå‡½æ•°foo,å¦‚æœä»–æ˜¯é€’å½’å‡½æ•°,åˆ°æœ€åé—®é¢˜è¿˜æ˜¯è½¬æ¢ä¸ºå‡½æ•°fooçš„å½¢å¼</li><li>é€’å½’çš„æ€æƒ³å°±æ˜¯å°†ä¸€ä¸ªæœªçŸ¥é—®é¢˜è½¬æ¢ä¸ºä¸€ä¸ªå·²è§£å†³çš„é—®é¢˜æ¥å®ç°</li></ol><p>ç®€å•çš„ç†è§£ï¼šé€’å½’å°±æ˜¯<em>ç¨‹åºè¿è¡Œåˆ°æŸä¸ªç‚¹çš„æ—¶å€™ï¼Œè°ƒç”¨è‡ªèº«ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¹‹å‰æ²¡è¿è¡Œå®Œçš„ç¨‹åºä¼šæš‚æ—¶ä¸è¿è¡Œï¼Œç­‰åˆ°ä¸‹ä¸€å±‚è°ƒç”¨å®Œäº†ä¹‹åå†è¿è¡Œ</em>ã€‚è¿™ä¸ªæ­£æ˜¯ç¬¦åˆæ ˆçš„å…ˆè¿›åå‡ºã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰ä¸ªè¿›æ ˆï¼Œç­‰åˆ°ä¸‹ä¸€å±‚è°ƒç”¨å®Œè¿è¡Œäº†ï¼Œä¹‹åå°±å¯ä»¥å‡ºæ ˆç»§ç»­è¿è¡Œ</p><pre><code class="js">function foo()&#123;  ...foo(...)...&#125;</code></pre><h2 id="é€’å½’çš„æ­¥éª¤-æŠ€å·§"><a href="#é€’å½’çš„æ­¥éª¤-æŠ€å·§" class="headerlink" title="é€’å½’çš„æ­¥éª¤(æŠ€å·§)"></a>é€’å½’çš„æ­¥éª¤(æŠ€å·§)</h2><ol><li>å‡è®¾é€’å½’å‡½æ•°å·²ç»å†™å¥½</li><li>å¯»æ‰¾é€’æ¨å…³ç³»</li><li>å°†é€’æ¨å…³ç³»çš„ç»“æ„è½¬æ¢ä¸ºé€’å½’ä½“</li><li>å°†ä¸´ç•Œæ¡ä»¶åŠ å…¥åˆ°é€’å½’ä½“ä¸­</li></ol><blockquote><p>é€’å½’çš„ä¸¤ä¸ªå¿…è¦å› ç´ ï¼š<br><strong>é€’å½’æ–¹ç¨‹ï¼Œé€’å½’ç»“æŸæ¡ä»¶ã€‚</strong></p></blockquote><p>æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨4çš„é˜¶ä¹˜ä¹˜ä»¥4æ¥å®šä¹‰5çš„é˜¶ä¹˜ï¼Œ3çš„é˜¶ä¹˜ä¹˜ä»¥4æ¥å®šä¹‰4çš„é˜¶ä¹˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><pre><code class="js">factorial(5) = factorial(4) * 5factorial(5) = factorial(3) * 4 * 5factorial(5) = factorial(2) * 3 * 4 * 5factorial(5) = factorial(1) * 2 * 3 * 4 * 5factorial(5) = factorial(0) * 1 * 2 * 3 * 4 * 5factorial(5) = 1 * 1 * 2 * 3 * 4 * 5</code></pre><p>ç”¨<code>Haskell</code>çš„<code>Pattern matching</code> å¯ä»¥å¾ˆç›´è§‚çš„å®šä¹‰<code>factorial</code>å‡½æ•°:</p><pre><code class="js">factorial n = factorial (n-1)  * nfactorial 0 = 1</code></pre><h2 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨</h2><p><code>å°¾è°ƒç”¨ï¼ˆTail Callï¼‰</code>æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œæœ¬èº«éå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼Œå°±æ˜¯<strong>æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°</strong>ã€‚</p><pre><code class="js">function f(x)&#123;  return g(x);&#125;</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å‡½æ•°gï¼Œè¿™å°±å«å°¾è°ƒç”¨ã€‚</p><pre><code class="js">// æƒ…å†µä¸€function f(x)&#123;  let y = g(x);  return y;  //æƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨&#125;// æƒ…å†µäºŒfunction f(x)&#123;  return g(x) + 1;  //å±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…&#125;// æƒ…å†µä¸‰function f(x)&#123;  g(x);&#125;// ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚/* function f(x)&#123;  g(x);  return undefined;&#125; */</code></pre><p><strong>å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨</strong>ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚</p><pre><code class="js">function f(x) &#123;  if (x &gt; 0) &#123;    return m(x)  &#125;  return n(x);&#125;//å‡½æ•°må’Œnéƒ½å±äºå°¾è°ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å‡½æ•°fçš„æœ€åä¸€æ­¥æ“ä½œ</code></pre><h2 id="å°¾è°ƒç”¨ä¼˜åŒ–"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h2><p>å°¾è°ƒç”¨ä¹‹æ‰€ä»¥ä¸å…¶ä»–è°ƒç”¨ä¸åŒï¼Œå°±åœ¨äºå®ƒçš„<strong>ç‰¹æ®Šçš„è°ƒç”¨ä½ç½®</strong>ã€‚</p><p><strong>è°ƒç”¨æ ˆæ¦‚å¿µ</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰</p><p>å°¾è°ƒç”¨ç”±äºæ˜¯<strong>å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§</strong>ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†</p><pre><code class="js">function f() &#123;  let m = 1;  let n = 2;  return g(m + n);&#125;f();// ç­‰åŒäºfunction f() &#123;  return g(3);&#125;f();// ç­‰åŒäºg(3);</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°gä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°få°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡må’Œnçš„å€¼ã€gçš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨gä¹‹åï¼Œå‡½æ•°få°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤f(x)çš„è°ƒç”¨å¸§ï¼Œåªä¿ç•™g(3)çš„è°ƒç”¨å¸§ã€‚</p><p>è¿™å°±å«åš<code>â€œå°¾è°ƒç”¨ä¼˜åŒ–â€ï¼ˆTail call optimizationï¼‰</code>ï¼Œå³åªä¿ç•™å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ã€‚å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨å¸§åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚è¿™å°±æ˜¯â€œ<strong>å°¾è°ƒç”¨ä¼˜åŒ–</strong>â€çš„æ„ä¹‰ã€‚</p><pre><code class="js">function addOne(a)&#123;  var one = 1;  function inner(b)&#123;    return b + one;  &#125;  return inner(a);&#125;</code></pre><p>ä¸Šé¢çš„å‡½æ•°ä¸ä¼šè¿›è¡Œå°¾è°ƒç”¨ä¼˜åŒ–ï¼Œå› ä¸ºå†…å±‚å‡½æ•°innerç”¨åˆ°äº†å¤–å±‚å‡½æ•°addOneçš„å†…éƒ¨å˜é‡oneã€‚</p><p><font color="red"><strong>æ³¨æ„ï¼Œç›®å‰åªæœ‰ Safari æµè§ˆå™¨æ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–ï¼ŒChrome å’Œ Firefox éƒ½ä¸æ”¯æŒã€‚</strong></font></p><h2 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h2><p><strong>å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚</strong></p><p>é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿ<code>â€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflow</code>ï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚</p><pre><code class="js">function factorial(n) &#123;  if (n === 1) return 1;  return n * factorial(n - 1);&#125;factorial(5) // 120</code></pre><p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼Œè®¡ç®—nçš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œ**å¤æ‚åº¦ O(n) **ã€‚</p><p>å¦‚æœæ”¹å†™æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œ<strong>å¤æ‚åº¦ O(1)</strong> ã€‚</p><pre><code class="js">function factorial(n, total) &#123;  if (n === 1) return total;  return factorial(n - 1, n * total);&#125;factorial(5, 1) // 120</code></pre><p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„ä¾‹å­ï¼Œå°±æ˜¯è®¡ç®— <code>Fibonacci æ•°åˆ—</code>ï¼Œä¹Ÿèƒ½å……åˆ†è¯´æ˜å°¾é€’å½’ä¼˜åŒ–çš„é‡è¦æ€§ã€‚</p><p>éå°¾é€’å½’çš„ <code>Fibonacci æ•°åˆ—</code>å®ç°å¦‚ä¸‹ã€‚</p><pre><code class="js">function Fibonacci (n) &#123;  if ( n &lt;= 1 ) &#123;return 1&#125;;  return Fibonacci(n - 1) + Fibonacci(n - 2);&#125;Fibonacci(10) // 89Fibonacci(100) // è¶…æ—¶Fibonacci(500) // è¶…æ—¶</code></pre><p>å°¾é€’å½’ä¼˜åŒ–è¿‡çš„ <code>Fibonacci æ•°åˆ—</code>å®ç°å¦‚ä¸‹ã€‚</p><pre><code class="js">function Fibonacci2 (n , ac1 = 1 , ac2 = 1) &#123;  if( n &lt;= 1 ) &#123;return ac2&#125;;  return Fibonacci2 (n - 1, ac2, ac1 + ac2);&#125;Fibonacci2(100) // 573147844013817200000Fibonacci2(1000) // 7.0330367711422765e+208Fibonacci2(10000) // Infinity</code></pre><p>ç”±æ­¤å¯è§ï¼Œ<strong>â€œå°¾è°ƒç”¨ä¼˜åŒ–â€å¯¹é€’å½’æ“ä½œæ„ä¹‰é‡å¤§</strong>ï¼Œæ‰€ä»¥ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†å…¶å†™å…¥äº†è¯­è¨€è§„æ ¼ã€‚ES6 äº¦æ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸€æ¬¡æ˜ç¡®è§„å®šï¼Œæ‰€æœ‰ ECMAScript çš„å®ç°ï¼Œéƒ½å¿…é¡»éƒ¨ç½²â€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚è¿™å°±æ˜¯è¯´ï¼Œ<strong>ES6 ä¸­åªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼ˆæˆ–è€…å±‚å±‚é€’å½’é€ æˆçš„è¶…æ—¶ï¼‰ï¼Œç›¸å¯¹èŠ‚çœå†…å­˜</strong>ã€‚</p><h2 id="é€’å½’å‡½æ•°çš„æ”¹å†™"><a href="#é€’å½’å‡½æ•°çš„æ”¹å†™" class="headerlink" title="é€’å½’å‡½æ•°çš„æ”¹å†™"></a>é€’å½’å‡½æ•°çš„æ”¹å†™</h2><p><strong>å°¾é€’å½’çš„å®ç°ï¼Œå¾€å¾€éœ€è¦æ”¹å†™é€’å½’å‡½æ•°ï¼Œç¡®ä¿æœ€åä¸€æ­¥åªè°ƒç”¨è‡ªèº«</strong>ã€‚åšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå°±æ˜¯<strong>æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°</strong>ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œé˜¶ä¹˜å‡½æ•° <code>factorial</code> éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸­é—´å˜é‡<code>total</code>ï¼Œé‚£å°±æŠŠè¿™ä¸ªä¸­é—´å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·åšçš„ç¼ºç‚¹å°±æ˜¯ä¸å¤ªç›´è§‚ï¼Œç¬¬ä¸€çœ¼å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œ<code>ä¸ºä»€ä¹ˆè®¡ç®—5çš„é˜¶ä¹˜ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°5å’Œ1ï¼Ÿ</code></p><p>ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ–¹æ³•ä¸€<strong>æ˜¯åœ¨å°¾é€’å½’å‡½æ•°ä¹‹å¤–ï¼Œå†æä¾›ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„å‡½æ•°</strong>ã€‚</p><pre><code class="js">function tailFactorial(n, total) &#123;  if (n === 1) return total;  return tailFactorial(n - 1, n * total);&#125;function factorial(n) &#123;  return tailFactorial(n, 1);&#125;factorial(5) // 120</code></pre><p>ä¸Šé¢ä»£ç é€šè¿‡ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„<code>é˜¶ä¹˜å‡½æ•°factorial</code>ï¼Œè°ƒç”¨<code>å°¾é€’å½’å‡½æ•°tailFactorial</code>ï¼Œçœ‹èµ·æ¥å°±æ­£å¸¸å¤šäº†ã€‚</p><p>å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åš<strong>æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰</strong>ï¼Œæ„æ€æ˜¯å°†<strong>å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼</strong>ã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–ã€‚</p><pre><code class="js">function currying(fn, n) &#123;  return function (m) &#123;    return fn.call(this, m, n);  &#125;;&#125;function tailFactorial(n, total) &#123;  if (n === 1) return total;  return tailFactorial(n - 1, n * total);&#125;const factorial = currying(tailFactorial, 1);factorial(5) // 120</code></pre><p>ä¸Šé¢ä»£ç <code>é€šè¿‡æŸ¯é‡ŒåŒ–ï¼Œå°†å°¾é€’å½’å‡½æ•°tailFactorial</code>å˜ä¸ºåªæ¥å—ä¸€ä¸ªå‚æ•°çš„<code>factorial</code>ã€‚</p><p><strong>ç¬¬äºŒç§æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œå°±æ˜¯é‡‡ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼ã€‚</strong></p><pre><code class="js">function factorial(n, total = 1) &#123;  if (n === 1) return total;  return factorial(n - 1, n * total);&#125;factorial(5) // 120</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°totalæœ‰é»˜è®¤å€¼1ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¸ç”¨æä¾›è¿™ä¸ªå€¼ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œé€’å½’æœ¬è´¨ä¸Š<strong>æ˜¯ä¸€ç§å¾ªç¯æ“ä½œ</strong>ã€‚çº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ²¡æœ‰å¾ªç¯æ“ä½œå‘½ä»¤ï¼Œæ‰€æœ‰çš„å¾ªç¯éƒ½ç”¨é€’å½’å®ç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°¾é€’å½’å¯¹è¿™äº›è¯­è¨€æå…¶é‡è¦ã€‚å¯¹äºå…¶ä»–æ”¯æŒâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€çš„è¯­è¨€ï¼ˆæ¯”å¦‚ Luaï¼ŒES6ï¼‰ï¼Œåªéœ€è¦çŸ¥é“<strong>å¾ªç¯å¯ä»¥ç”¨é€’å½’ä»£æ›¿ï¼Œè€Œä¸€æ—¦ä½¿ç”¨é€’å½’ï¼Œå°±æœ€å¥½ä½¿ç”¨å°¾é€’å½’</strong>ã€‚</p><h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><p><font color="red">ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚</font></p><blockquote><p>è¿™æ˜¯å› ä¸ºåœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å†…éƒ¨æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå¯ä»¥è·Ÿè¸ªå‡½æ•°çš„è°ƒç”¨æ ˆã€‚</p></blockquote><p><code>func.arguments</code>ï¼šè¿”å›è°ƒç”¨æ—¶å‡½æ•°çš„å‚æ•°ã€‚<br><code>func.caller</code>ï¼šè¿”å›è°ƒç”¨å½“å‰å‡½æ•°çš„é‚£ä¸ªå‡½æ•°ã€‚</p><p>å°¾è°ƒç”¨ä¼˜åŒ–å‘ç”Ÿæ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨æ ˆä¼šæ”¹å†™ï¼Œå› æ­¤ä¸Šé¢ä¸¤ä¸ªå˜é‡å°±ä¼šå¤±çœŸã€‚ä¸¥æ ¼æ¨¡å¼ç¦ç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ‰€ä»¥å°¾è°ƒç”¨æ¨¡å¼ä»…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚</p><pre><code class="js">function restricted() &#123;  &#39;use strict&#39;;  restricted.caller;    // æŠ¥é”™  restricted.arguments; // æŠ¥é”™&#125;restricted();</code></pre><h2 id="å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"><a href="#å°¾é€’å½’ä¼˜åŒ–çš„å®ç°" class="headerlink" title="å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"></a>å°¾é€’å½’ä¼˜åŒ–çš„å®ç°</h2><p>å°¾é€’å½’ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼Œé‚£ä¹ˆæ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæˆ–è€…é‚£äº›ä¸æ”¯æŒè¯¥åŠŸèƒ½çš„ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¹Ÿä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯<strong>è‡ªå·±å®ç°å°¾é€’å½’ä¼˜åŒ–</strong>ã€‚</p><p>å®ƒçš„åŸç†éå¸¸ç®€å•ã€‚å°¾é€’å½’ä¹‹æ‰€ä»¥éœ€è¦ä¼˜åŒ–ï¼ŒåŸå› <em>æ˜¯è°ƒç”¨æ ˆå¤ªå¤šï¼Œé€ æˆæº¢å‡ºï¼Œé‚£ä¹ˆåªè¦å‡å°‘è°ƒç”¨æ ˆï¼Œå°±ä¸ä¼šæº¢å‡º</em>ã€‚æ€ä¹ˆåšå¯ä»¥å‡å°‘è°ƒç”¨æ ˆå‘¢ï¼Ÿå°±æ˜¯é‡‡ç”¨ <strong>â€œå¾ªç¯â€æ¢æ‰â€œé€’å½’â€</strong>ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„é€’å½’å‡½æ•°ã€‚</p><pre><code class="js">function sum(x, y) &#123;  if (y &gt; 0) &#123;    return sum(x + 1, y - 1);  &#125; else &#123;    return x;  &#125;&#125;sum(1, 100000)// Uncaught RangeError: Maximum call stack size exceeded(â€¦)</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sum</code>æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå‚æ•°xæ˜¯éœ€è¦ç´¯åŠ çš„å€¼ï¼Œå‚æ•°yæ§åˆ¶é€’å½’æ¬¡æ•°ã€‚ä¸€æ—¦æŒ‡å®š<code>sum</code>é€’å½’ 100000 æ¬¡ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæç¤ºè¶…å‡ºè°ƒç”¨æ ˆçš„æœ€å¤§æ¬¡æ•°ã€‚</p><p><code>è¹¦åºŠå‡½æ•°ï¼ˆtrampolineï¼‰</code>å¯ä»¥å°†é€’å½’æ‰§è¡Œè½¬ä¸ºå¾ªç¯æ‰§è¡Œã€‚</p><pre><code class="js">function trampoline(f) &#123;  while (f &amp;&amp; f instanceof Function) &#123;    f = f();  &#125;  return f;&#125;</code></pre><p>ä¸Šé¢å°±æ˜¯è¹¦åºŠå‡½æ•°çš„ä¸€ä¸ªå®ç°ï¼Œ<em>å®ƒæ¥å—ä¸€ä¸ªå‡½æ•°fä½œä¸ºå‚æ•°ã€‚åªè¦fæ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå°±ç»§ç»­æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°é‡Œé¢è°ƒç”¨å‡½æ•°ï¼Œè¿™æ ·å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼Œä»è€Œå°±æ¶ˆé™¤äº†è°ƒç”¨æ ˆè¿‡å¤§çš„é—®é¢˜</em>ã€‚</p><p>ç„¶åï¼Œè¦åšçš„å°±æ˜¯å°†åŸæ¥çš„é€’å½’å‡½æ•°ï¼Œæ”¹å†™ä¸ºæ¯ä¸€æ­¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><pre><code class="js">function sum(x, y) &#123;  if (y &gt; 0) &#123;    return sum.bind(null, x + 1, y - 1);  &#125; else &#123;    return x;  &#125;&#125;</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œsumå‡½æ•°çš„æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šè¿”å›è‡ªèº«çš„å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚</p><p>ç°åœ¨ï¼Œä½¿ç”¨è¹¦åºŠå‡½æ•°æ‰§è¡Œsumï¼Œå°±ä¸ä¼šå‘ç”Ÿè°ƒç”¨æ ˆæº¢å‡ºã€‚</p><pre><code class="js">trampoline(sum(1, 100000))// 100001</code></pre><p>è¹¦åºŠå‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£çš„å°¾é€’å½’ä¼˜åŒ–ï¼Œä¸‹é¢çš„å®ç°æ‰æ˜¯ã€‚</p><pre><code class="js">function tco(f) &#123;  var value;  var active = false;  var accumulated = [];  return function accumulator() &#123;    accumulated.push(arguments);    if (!active) &#123;      active = true;      while (accumulated.length) &#123;        value = f.apply(this, accumulated.shift());      &#125;      active = false;      return value;    &#125;  &#125;;&#125;var sum = tco(function(x, y) &#123;  if (y &gt; 0) &#123;    return sum(x + 1, y - 1)  &#125;  else &#123;    return x  &#125;&#125;);sum(1, 100000)// 100001</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>tco</code>å‡½æ•°æ˜¯å°¾é€’å½’ä¼˜åŒ–çš„å®ç°ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨äºçŠ¶æ€å˜é‡<code>active</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸æ¿€æ´»çš„ã€‚ä¸€æ—¦è¿›å…¥å°¾é€’å½’ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå˜é‡å°±æ¿€æ´»äº†ã€‚ç„¶åï¼Œæ¯ä¸€è½®é€’å½’sumè¿”å›çš„éƒ½æ˜¯undefinedï¼Œæ‰€ä»¥å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼›è€Œ<code>accumulated</code>æ•°ç»„å­˜æ”¾æ¯ä¸€è½®sumæ‰§è¡Œçš„å‚æ•°ï¼Œæ€»æ˜¯æœ‰å€¼çš„ï¼Œè¿™å°±ä¿è¯äº†<code>accumulator</code>å‡½æ•°å†…éƒ¨çš„<code>while</code>å¾ªç¯æ€»æ˜¯ä¼šæ‰§è¡Œã€‚è¿™æ ·å°±å¾ˆå·§å¦™åœ°å°†â€œé€’å½’â€æ”¹æˆäº†â€œå¾ªç¯â€ï¼Œè€Œåä¸€è½®çš„å‚æ•°ä¼šå–ä»£å‰ä¸€è½®çš„å‚æ•°ï¼Œä¿è¯äº†è°ƒç”¨æ ˆåªæœ‰ä¸€å±‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/ruanyf/es6tutorial/blob/2e1c10776a9350debfec47de8ddeaf1c2c5a80cc/docs/function.md&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;é€’å½’ç®€ä»‹&quot;</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹ç«‹å³æ‰§è¡Œå‡½æ•°, æ¨¡å—åŒ–, å‘½åç©ºé—´</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/22/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0-%E6%A8%A1%E5%9D%97%E5%8C%96-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/22/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8B%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0-%E6%A8%A1%E5%9D%97%E5%8C%96-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/</id>
    <published>2020-09-22T05:45:52.000Z</published>
    <updated>2020-09-27T08:32:50.536Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><p><a href="https://segmentfault.com/a/1190000006966358">åŸæ–‡åœ°å€</a></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç«‹å³æ‰§è¡Œå‡½æ•°, æ¨¡å—åŒ–, å‘½åç©ºé—´ ï¼Œä¸»è¦æ˜¯è§£å†³ä¸¤ä¸ªé—®é¢˜â€”â€”â€œ<strong>å‘½åç©ºé—´å†²çªâ€ï¼Œâ€œæ–‡ä»¶ä¾èµ–ç®¡ç†</strong>â€ã€‚</p><p>å‘ï¼š<br>1.å‘½åç©ºé—´å†²çª</p><ul><li>(1)æˆ‘è‡ªå·±æµ‹è¯•å¥½çš„ä»£ç å’Œå¤§å®¶åˆå¹¶åæ€ä¹ˆèµ·å†²çªäº†ï¼Ÿ</li><li>(2)é¡µé¢è„šæœ¬çš„å˜é‡æˆ–å‡½æ•°è¦†ç›–äº†å…¬æœ‰è„šæœ¬çš„ã€‚                                                 </li></ul><p>2.æ–‡ä»¶ä¾èµ–ç®¡ç†</p><ul><li>(1)æ˜æ˜é¡¹ç›®éœ€è¦å¼•å…¥çš„åŒ…éƒ½å¼•è¿›æ¥äº†æ€ä¹ˆè¿˜æŠ¥ç¼ºå°‘åŒ…ï¼Ÿ</li><li>(2)æ‰‹åŠ¨ç®¡ç†ä¾èµ–ï¼Œæœ‰å¤©è¦æ›´æ¢æŸä¸ªæ’ä»¶ï¼Œè¦æ·±å…¥ä»£ç å†…éƒ¨è¿›è¡Œä¿®æ”¹</li><li>(3)å¦‚ä¸‹å›¾ï¼Œæ˜¾ç¤ºçš„ä»£ç åŠ è½½ï¼Œä¾èµ–å…³ç³»å¤æ‚ã€‚åœ¨F.jsä¸­ï¼Œåˆ†ä¸æ¸…æŸä¸ªå˜é‡æ˜¯æ¥è‡ªC.jsï¼Œè¿˜æ˜¯E.js</li><li>(4)ä¸¤æ¬¡åŠ è½½åŒä¸€ä¸ªæ¨¡å—ã€‚æ¯”å¦‚å¼•å…¥äº†ä¸¤éJQ</li></ul><p><img src="https://segmentfault.com/img/bVDlA5?w=398&h=183" alt="keng"></p><p>3.å…¶ä»–çš„</p><ul><li>(1)ä¸ºäº†å®ç°è„šæœ¬å¤ç”¨ï¼Œå°†ä¸€ä¸ªå¾ˆå¤§çš„å…¬ç”¨publicæ–‡ä»¶å¼•å…¥å„ä¸ªé¡µé¢ä¸­ï¼Œå…¶ä¸­çš„æŸäº›å‡½æ•°ï¼Œåªæœ‰ä¸ªåˆ«é¡µé¢ç”¨åˆ°ã€‚</li><li>(2)æŸä¸ªåŠŸèƒ½çš„å‡½æ•°ç¾¤å‡½æ•°ï¼Œä¸å¦ä¸€ä¸ªåŠŸèƒ½çš„å‡½æ•°ç¾¤æ‘†åœ¨ä¸€èµ·ï¼Œä½¿ç”¨æ³¨é‡Šæ¥åˆ†éš”ã€‚</li></ul><p><strong>ç›®å‰è§£å†³çš„æ–¹æ³•æ˜¯:æ¨¡å—åŒ–</strong></p><p>1.<em>å‘½åç©ºé—´</em>ï¼šå„ä¸ªæ¨¡å—çš„å‘½åç©ºé—´ç‹¬ç«‹ã€‚Aæ¨¡å—çš„å˜é‡xä¸ä¼šè¦†ç›–Bæ¨¡å—çš„å˜é‡xã€‚<br>2.<em>æ¨¡å—çš„ä¾èµ–å…³ç³»</em>:é€šè¿‡æ¨¡å—ç®¡ç†å·¥å…·å¦‚<code>webpack/requireJS/browserify</code>ç­‰è¿›è¡Œç®¡ç†ã€‚</p><h2 id="æ¨¡å—åŒ–çš„åŸºæœ¬åŸç†â€”â€”è§£å†³å‘½åç©ºé—´å†²çª"><a href="#æ¨¡å—åŒ–çš„åŸºæœ¬åŸç†â€”â€”è§£å†³å‘½åç©ºé—´å†²çª" class="headerlink" title="æ¨¡å—åŒ–çš„åŸºæœ¬åŸç†â€”â€”è§£å†³å‘½åç©ºé—´å†²çª"></a>æ¨¡å—åŒ–çš„åŸºæœ¬åŸç†â€”â€”è§£å†³å‘½åç©ºé—´å†²çª</h2><p>JavaScriptçš„ç¼ºé™·ï¼Œé¦–å½“å…¶å†²å°±æ˜¯å…¨å±€å˜é‡ã€‚è¿™ä½¿å¾—æ¯æƒ³å‘½åä¸€ä¸ªå˜é‡çš„æ—¶å€™éƒ½è¦ä¸‰æ€åˆä¸‰æ€ï¼Œç”Ÿæ€•ä¸Šæ–¹æ— ç©·è¿œçš„åœ°æ–¹æœ‰ä¸€ä¸ªåŒäº‹äº›çš„ä»£ç å’Œè‡ªå·±å†²çªã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é˜²èŒƒæ–¹æ³•</p><h3 id="ä¸€ã€ä½¿ç”¨å‘½åç©ºé—´"><a href="#ä¸€ã€ä½¿ç”¨å‘½åç©ºé—´" class="headerlink" title="ä¸€ã€ä½¿ç”¨å‘½åç©ºé—´"></a>ä¸€ã€ä½¿ç”¨å‘½åç©ºé—´</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="js">//å®šä¹‰var module = &#123;    name: &#39;rouwan&#39;,    sayName:function()&#123;        console.log(this.name)    &#125;&#125;//ä½¿ç”¨var a = module.name;console.log(a)</code></pre><p><strong>æ€»ç»“</strong>ï¼šç›´æ¥ä¿®æ”¹nameä¸ä¼šå½±å“<code>module.name</code>ï¼Œä¸€å®šç¨‹åº¦ä¿æŠ¤äº†å‘½åç©ºé—´ã€‚<br>æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€ï¼Œå¤–éƒ¨è¿˜æ˜¯å¯ä»¥ä¿®æ”¹moduleçš„å±æ€§å’Œæ–¹æ³•ã€‚äºŒï¼Œå‘½åç©ºé—´æœ‰æ—¶é•¿èµ·æ¥è¶…ä¹ä½ çš„æƒ³è±¡ã€‚é€‚åˆä¸€äº›å°å‹çš„å°è£…ï¼Œå¦‚ä¸€äº›é…ç½®ã€‚</p><h3 id="äºŒã€ç«‹å³æ‰§è¡Œå‡½æ•°-é—­åŒ…ï¼ˆå®ç°æ¨¡å—çš„åŸºæœ¬æ–¹æ³•ï¼‰"><a href="#äºŒã€ç«‹å³æ‰§è¡Œå‡½æ•°-é—­åŒ…ï¼ˆå®ç°æ¨¡å—çš„åŸºæœ¬æ–¹æ³•ï¼‰" class="headerlink" title="äºŒã€ç«‹å³æ‰§è¡Œå‡½æ•° + é—­åŒ…ï¼ˆå®ç°æ¨¡å—çš„åŸºæœ¬æ–¹æ³•ï¼‰"></a>äºŒã€ç«‹å³æ‰§è¡Œå‡½æ•° + é—­åŒ…ï¼ˆå®ç°æ¨¡å—çš„åŸºæœ¬æ–¹æ³•ï¼‰</h3><p>ç«‹å³å‡½æ•°å¯ä»¥åˆ›å»ºä½œç”¨åŸŸï¼Œé—­åŒ…åˆ™å¯ä»¥å½¢æˆç§æœ‰å˜é‡å’Œå‡½æ•°</p><pre><code class="js">//åˆ›å»ºvar module = (function()&#123;  var privateName = &#39;inner&#39;;            //ç§æœ‰å˜é‡  var privateFunc = function()&#123;        //ç§æœ‰å‡½æ•°      console.log(&#39;ç§æœ‰å‡½æ•°&#39;)  &#125;  return &#123;                                  name: &#39;rouwan&#39;,                    //å…¬æœ‰å±æ€§      sayName:function()&#123;                //å…¬æœ‰å‡½æ•°          console.log(this.name)      &#125;  &#125;&#125;)()//ä½¿ç”¨module.sayName();    //&#39;rouwan&#39;</code></pre><p>æ€»ç»“ï¼šè¿™æ˜¯ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„æ¨¡å—å®šä¹‰æ–¹å¼ï¼Œ<strong>å¯ä»¥åŒºåˆ†ç§æœ‰æˆå‘˜å’Œå…¬æœ‰æˆå‘˜</strong>ã€‚<br>å…¬æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå’Œä¹‹å‰ä¸€æ ·å¯ä»¥ç›´æ¥é€šè¿‡<code>module.name</code>çš„æ–¹å¼ä¿®æ”¹ã€‚ç§æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œæ˜¯æ— æ³•è®¿é—®çš„ï¼Œé™¤éç»™ä½ ä¸ªä¿®æ”¹ç§æœ‰æˆå‘˜çš„å…¬æœ‰æ–¹æ³•ã€‚</p><h3 id="ä¸‰ã€åœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œå¼•å…¥å…¶ä»–æ¨¡å—"><a href="#ä¸‰ã€åœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œå¼•å…¥å…¶ä»–æ¨¡å—" class="headerlink" title="ä¸‰ã€åœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œå¼•å…¥å…¶ä»–æ¨¡å—"></a>ä¸‰ã€åœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œå¼•å…¥å…¶ä»–æ¨¡å—</h3><pre><code class="js">//å®šä¹‰var module1 = (function(mod)&#123;  var privateName = &#39;inner1&#39;;  var privateFunc = function()&#123;    console.log(&#39;ç§æœ‰å‡½æ•°1&#39;)  &#125;  return &#123;    name : &#39;rouwan1&#39;,    sayName: function()&#123;        console.log(this.name)    &#125;,    anotherName:mod.name,            //å¦ä¸€ä¸ªæ¨¡å—ä¸Šçš„å…¬æœ‰å‚æ•°    sayAnotherName:mod.sayName       //å¦ä¸€ä¸ªæ¨¡å—ä¸Šçš„å…¬æœ‰æ–¹æ³•  &#125;&#125;)(anotherModule) //å¼•å…¥äº†å¦ä¸€ä¸ªæ¨¡å—//ä½¿ç”¨module1.sayOtherName()</code></pre><h3 id="å››ã€å…¶ä»–çš„æ–¹å¼"><a href="#å››ã€å…¶ä»–çš„æ–¹å¼" class="headerlink" title="å››ã€å…¶ä»–çš„æ–¹å¼"></a>å››ã€å…¶ä»–çš„æ–¹å¼</h3><p>æ”¾å¤§æ¨¡å¼ç­‰æ˜¯ä»¥å¾€ç”¨æ¥ç®¡ç†å¤§å‹æ¨¡å—ï¼Œè¿›è¡Œæ–‡ä»¶æ‹†åˆ†çš„æ–¹æ³•ã€‚ç°åœ¨<code>webpack</code>ç­‰æ¨¡å—åŒ–å·¥å…·éƒ½å¾ˆå®Œå–„çš„æƒ…å†µä¸‹ï¼Œå·²ç»æ˜¾å¾—æœ‰ç‚¹è½åäº†ã€‚å°±ä¸ä»‹ç»äº†ã€‚</p><h2 id="å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£â€”â€”æ¨¡å—åŒ–æ„å»ºå·¥å…·ï¼ˆè§£å†³ä¾èµ–ç®¡ç†ï¼‰"><a href="#å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£â€”â€”æ¨¡å—åŒ–æ„å»ºå·¥å…·ï¼ˆè§£å†³ä¾èµ–ç®¡ç†ï¼‰" class="headerlink" title="å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£â€”â€”æ¨¡å—åŒ–æ„å»ºå·¥å…·ï¼ˆè§£å†³ä¾èµ–ç®¡ç†ï¼‰"></a>å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£â€”â€”æ¨¡å—åŒ–æ„å»ºå·¥å…·ï¼ˆè§£å†³ä¾èµ–ç®¡ç†ï¼‰</h2><p>æˆ‘äº†è§£jsæ¨¡å—æ˜¯ä»<strong>ç«‹å³æ‰§è¡Œå‡½æ•°</strong>å¼€å§‹çš„ã€‚ä½†æ˜¯ç­‰åˆ°çœŸæ­£ä½¿ç”¨æ„å»ºå·¥å…·çš„æ—¶å€™ï¼Œå´å‘ç°ä¸šç•Œé‡‡ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå´å¹¶éæ˜¯<strong>ä¸€ä¸ªä¸€ä¸ªç”±ç«‹å³å‡½æ•°+é—­åŒ…</strong>å½¢æˆçš„é›†ç¾¤ã€‚</p><p>è€Œæ˜¯ç”¨äº†è¯¸å¦‚<strong>AMD/CMD/CommonJS/ES6</strong>æ¨¡å—ç­‰ç­‰æ¨¡å—åŒ–å®ç°ã€‚</p><p>è¿™é‡Œé¢çš„åŸå› å¯èƒ½æœ‰è¿™å‡ ä¸ªï¼Œ<br>ä¸€ï¼Œé—­åŒ…çš„æ€§èƒ½é—®é¢˜ã€‚<br>äºŒï¼Œå½“æ¨¡å—å¢å¤šçš„æ—¶å€™ï¼Œéœ€è¦è§£å†³æ¨¡å—é—´çš„ä¾èµ–ç®¡ç†é—®é¢˜ã€‚</p><p>å…³äºä¾èµ–ç®¡ç†ï¼Œç›®å‰é¡¹ç›®é‡Œç¢°åˆ°äº†å‡ ä¸ªä¸èˆ’æœçš„åœ°æ–¹ï¼š</p><p>1.å¼•ç”¨å¤šä¸ªä¸åŒçš„æ–‡ä»¶<br>2.HTMLä¸­å¼•å…¥äº†ä¸¤éçš„jqï¼Œå¯¼è‡´è„šæœ¬æŠ¥é”™ã€‚<br>3.æœ‰ä¸€ä¸ªå…¬ç”¨è„šæœ¬ï¼ŒåŒ…å«äº†Nå¤šçš„å…¬ç”¨æ¨¡å—ã€‚æœ‰äº›é¡µé¢æ˜æ˜åªç”¨åˆ°äº†ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿå¿…é¡»å…¨éƒ¨åŠ è½½ä¸€éã€‚</p><p>å› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨æ¨¡å—åŒ–ç®¡ç†å·¥å…·!</p><p>webpackå’ŒrequireJSæ¯”è¾ƒï¼š<br><img src="https://segmentfault.com/img/bVDm01?w=746&h=254" alt="webpackå’ŒrequireJS"></p><p>å‡ ç§æ¨¡å—åŒ–è§„èŒƒæ¯”è¾ƒï¼š<br><img src="https://segmentfault.com/img/bVDm2P?w=890&h=316" alt="æ¨¡å—åŒ–"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000006966358&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µä¹‹promise</title>
    <link href="https://shinichikudo-fe.github.io/2020/09/21/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8Bpromise/"/>
    <id>https://shinichikudo-fe.github.io/2020/09/21/Js/33%E4%B8%AAJS%E6%A6%82%E5%BF%B5/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5%E4%B9%8Bpromise/</id>
    <published>2020-09-21T06:24:41.000Z</published>
    <updated>2020-09-27T08:44:35.052Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><code>promise</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–è€…å¤±è´¥ã€‚æœ¬è´¨ä¸Š<code>Promise</code>æ˜¯ä¸ªå‡½æ•°è¿”å›çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒä¸Šé¢ç»‘å®šå›è°ƒå‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦åœ¨ä¸€å¼€å§‹æŠŠå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥è¿™ä¸ªå‡½æ•°äº†ã€‚</p><pre><code class="js">const promise1 = new Promise((resolve, reject) =&gt; &#123;  setTimeout(() =&gt; &#123;    resolve(&#39;foo&#39;);  &#125;, 3000);&#125;);promise1.then((value) =&gt; &#123;  console.log(value);  // expected output: &quot;foo&quot;&#125;);console.log(promise1);// expected output: [object Promise]</code></pre><h2 id="promise-çº¦å®š"><a href="#promise-çº¦å®š" class="headerlink" title="promise çº¦å®š"></a>promise çº¦å®š</h2><p>åœ¨ä½¿ç”¨<code>Promise</code>æ—¶ä¼šæœ‰ä»¥ä¸‹çº¦å®šï¼š</p><ul><li>1.åœ¨æœ¬è½® äº‹ä»¶å¾ªç¯ è¿è¡Œå®Œæˆä¹‹å‰ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ã€‚</li><li>2.å³ä½¿å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œåœ¨è¿™ä¹‹åé€šè¿‡ <code>then()</code> æ·»åŠ çš„å›è°ƒå‡½æ•°ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚</li><li>3.é€šè¿‡å¤šæ¬¡è°ƒç”¨ <code>then()</code> å¯ä»¥æ·»åŠ å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚</li></ul><p><code>Promise</code>çš„å¦ä¸€ä¸ªå¥½å¤„å°±æ˜¯<strong>é“¾å¼è°ƒç”¨(chaining)</strong></p><p>åŸæœ‰çš„å›è°ƒåœ°ç‹±ï¼š</p><pre><code class="js">doSomething(function(result) &#123;  doSomethingElse(result, function(newResult) &#123;    doThirdThing(newResult, function(finalResult) &#123;      console.log(&#39;Got the final result: &#39; + finalResult);    &#125;, failureCallback);  &#125;, failureCallback);&#125;, failureCallback);</code></pre><p>Promiseé“¾ï¼š</p><pre><code class="js">doSomething().then(function(result) &#123;  return doSomethingElse(result);&#125;).then(function(newResult) &#123;  return doThirdThing(newResult);&#125;).then(function(finalResult) &#123;  console.log(&#39;Got the final result: &#39; + finalResult);&#125;).catch(failureCallback);</code></pre><p>é€šå¸¸ï¼Œä¸€é‡åˆ°å¼‚å¸¸æŠ›å‡ºï¼Œæµè§ˆå™¨å°±ä¼šé¡ºç€ <code>Promise</code> é“¾å¯»æ‰¾ä¸‹ä¸€ä¸ª <code>onRejected</code> å¤±è´¥å›è°ƒå‡½æ•°æˆ–è€…ç”± <code>.catch()</code> æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™å’Œä»¥ä¸‹åŒæ­¥ä»£ç çš„å·¥ä½œåŸç†ï¼ˆæ‰§è¡Œè¿‡ç¨‹ï¼‰éå¸¸ç›¸ä¼¼ã€‚</p><pre><code class="js">try &#123;  let result = syncDoSomething();  let newResult = syncDoSomethingElse(result);  let finalResult = syncDoThirdThing(newResult);  console.log(`Got the final result: $&#123;finalResult&#125;`);&#125; catch(error) &#123;  failureCallback(error);&#125;</code></pre><p>åœ¨ ECMAScript 2017 æ ‡å‡†çš„ <code>async/await</code> è¯­æ³•ç³–ä¸­ï¼Œè¿™ç§å¼‚æ­¥ä»£ç çš„å¯¹ç§°æ€§å¾—åˆ°äº†æè‡´çš„ä½“ç°ï¼š</p><pre><code class="js">async function foo() &#123;  try &#123;    const result = await doSomething();    const newResult = await doSomethingElse(result);    const finalResult = await doThirdThing(newResult);    console.log(`Got the final result: $&#123;finalResult&#125;`);  &#125; catch(error) &#123;    failureCallback(error);  &#125;&#125;</code></pre><h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p><code>Promise</code> å¯¹è±¡æ˜¯<strong>ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆä»£ç†ä¸€ä¸ªå€¼ï¼‰ï¼Œè¢«ä»£ç†çš„å€¼åœ¨Promiseå¯¹è±¡åˆ›å»ºæ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„</strong>ã€‚å®ƒå…è®¸ä½ ä¸ºå¼‚æ­¥æ“ä½œçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šç›¸åº”çš„å¤„ç†æ–¹æ³•ï¼ˆhandlersï¼‰ã€‚ è¿™è®©å¼‚æ­¥æ–¹æ³•å¯ä»¥åƒåŒæ­¥æ–¹æ³•é‚£æ ·è¿”å›å€¼ï¼Œä½†å¹¶ä¸æ˜¯ç«‹å³è¿”å›æœ€ç»ˆæ‰§è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ä»£è¡¨æœªæ¥å‡ºç°çš„ç»“æœçš„<code>promise</code>å¯¹è±¡&gt; </p><blockquote><p>ä¸€ä¸ª <code>Promise</code>æœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€:<br><code>pending</code>: åˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å¤±è´¥çŠ¶æ€ã€‚<br><code>fulfilled</code>: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚<br><code>rejected</code>: æ„å‘³ç€æ“ä½œå¤±è´¥ã€‚</p></blockquote><p><img src="https://mdn.mozillademos.org/files/8633/.png" alt="promise"></p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><h3 id="Promise-all-iterable"><a href="#Promise-all-iterable" class="headerlink" title="Promise.all(iterable)"></a>Promise.all(iterable)</h3><p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡ï¼Œè¯¥<code>promise</code>å¯¹è±¡åœ¨<code>iterable</code>å‚æ•°å¯¹è±¡é‡Œæ‰€æœ‰çš„<code>promise</code>å¯¹è±¡éƒ½æˆåŠŸçš„æ—¶å€™æ‰ä¼šè§¦å‘æˆåŠŸï¼Œä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ªiterableé‡Œé¢çš„<code>promise</code>å¯¹è±¡å¤±è´¥åˆ™ç«‹å³è§¦å‘è¯¥<code>promise</code>å¯¹è±¡çš„å¤±è´¥</p><pre><code class="js">const arr = [1,2,3,4];const promiseArr = arr.map(arg =&gt; &#123;    return new Promise((resolve,reject) =&gt; &#123;        if(arg) &#123;            resolve(arg*2);        &#125;else&#123;            reject(&#39;no value&#39;);        &#125;    &#125;)&#125;);Promise.all(promiseArr).then(data =&gt; &#123;    console.log(data);  // [2,4,6,8]&#125;).catch(err =&gt; &#123;    console.log(err); &#125;)</code></pre><h3 id="Promise-allSettled-iterable"><a href="#Promise-allSettled-iterable" class="headerlink" title="Promise.allSettled(iterable)"></a>Promise.allSettled(iterable)</h3><p>ç­‰åˆ°æ‰€æœ‰<code>promise</code>éƒ½å®Œæˆï¼ˆæ¯ä¸ª<code>promise</code>è¿”å›æˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚<br>è¿”å›ä¸€ä¸ª<code>promise</code>ï¼Œè¯¥<code>promise</code>åœ¨æ‰€æœ‰<code>promise</code>å®Œæˆåå®Œæˆã€‚å¹¶å¸¦æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡å¯¹åº”æ¯ä¸ª<code>promise</code>çš„ç»“æœã€‚</p><pre><code class="js">const promise1 = Promise.resolve(3);const promise2 = new Promise((resolve, reject) =&gt; setTimeout(reject, 100, &#39;foo&#39;));const promises = [promise1, promise2];Promise.allSettled(promises).  then((results) =&gt; results.forEach((result) =&gt; console.log(result.status)));// expected output:// &quot;fulfilled&quot;// &quot;rejected&quot;</code></pre><h3 id="Promise-any-iterable"><a href="#Promise-any-iterable" class="headerlink" title="Promise.any(iterable)"></a>Promise.any(iterable)</h3><p>æ¥æ”¶ä¸€ä¸ª<code>Promise</code>å¯¹è±¡çš„é›†åˆï¼Œå½“å…¶ä¸­çš„ä¸€ä¸ª<code>promise</code> æˆåŠŸï¼Œå°±è¿”å›é‚£ä¸ªæˆåŠŸçš„<code>promise</code>çš„å€¼ã€‚(è°æˆåŠŸè¿”å›è°,ç”¨äºè¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ promise)</p><pre><code class="js">// æ˜¾ç¤ºç¬¬ä¸€å¼ å·²åŠ è½½çš„å›¾ç‰‡function fetchAndDecode(url) &#123;  return fetch(url).then(response =&gt; &#123;    if(!response.ok) &#123;      throw new Error(`HTTP error! status: $&#123;response.status&#125;`);    &#125; else &#123;      return response.blob();    &#125;  &#125;)&#125;let coffee = fetchAndDecode(&#39;coffee.jpg&#39;);let tea = fetchAndDecode(&#39;tea.jpg&#39;);Promise.any([coffee, tea]).then(value =&gt; &#123;  let objectURL = URL.createObjectURL(value);  let image = document.createElement(&#39;img&#39;);  image.src = objectURL;  document.body.appendChild(image);&#125;).catch(e =&gt; &#123;  console.log(e.message);&#125;);</code></pre><h3 id="Promise-race-iterable"><a href="#Promise-race-iterable" class="headerlink" title="Promise.race(iterable)"></a>Promise.race(iterable)</h3><p>æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§è°å¿« è°å…ˆè¾“å‡º</p><p>å½“<code>iterable</code>å‚æ•°é‡Œçš„ä»»æ„ä¸€ä¸ªå­<code>promise</code>è¢«æˆåŠŸæˆ–å¤±è´¥åï¼Œçˆ¶<code>promise</code>é©¬ä¸Šä¹Ÿä¼šç”¨å­<code>promise</code>çš„æˆåŠŸè¿”å›å€¼æˆ–å¤±è´¥è¯¦æƒ…ä½œä¸ºå‚æ•°è°ƒç”¨çˆ¶<code>promise</code>ç»‘å®šçš„ç›¸åº”å¥æŸ„ï¼Œå¹¶è¿”å›è¯¥<code>promise</code>å¯¹è±¡ã€‚</p><pre><code class="js">const pro1 = new Promise((resolve,reject) =&gt; &#123;    setTimeout(resolve,100,&#39;1&#39;);&#125;);const pro2 = new Promise((resolve,reject) =&gt; &#123;    setTimeout(resolve,200,&#39;2&#39;);&#125;);const pro3 = new Promise((resolve,reject) =&gt; &#123;    setTimeout(resolve,300,&#39;3&#39;);&#125;);const pro4 = new Promise((resolve,reject) =&gt; &#123;    setTimeout(resolve,10,&#39;4&#39;);&#125;);Promise.race([pro4,pro1,pro2,pro3]).then(data =&gt; &#123;    console.log(data);  // 1   è¾“å‡ºæœ€å¿«çš„é‚£ä¸ª&#125;).catch(err =&gt; &#123;    console.log(err);&#125;)</code></pre><h3 id="Promise-reject-reason"><a href="#Promise-reject-reason" class="headerlink" title="Promise.reject(reason)"></a>Promise.reject(reason)</h3><p>è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºå¤±è´¥çš„<code>Promise</code>å¯¹è±¡ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„å¤„ç†æ–¹æ³•</p><pre><code class="js">const p_2 = Promise.reject(&#39;err&#39;);p_2.then(data =&gt; &#123;    console.log(data);  &#125;).catch(err =&gt; &#123;    console.log(err);  // err&#125;)</code></pre><h3 id="Promise-resolve-value"><a href="#Promise-resolve-value" class="headerlink" title="Promise.resolve(value)"></a>Promise.resolve(value)</h3><p>è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®š<code>value</code>å†³å®šçš„<code>Promise</code>å¯¹è±¡ã€‚<br>é€šå¸¸è€Œè¨€ï¼Œå¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œä½¿ç”¨<code>Promise.resolve(value)</code> æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡,è¿™æ ·å°±èƒ½å°†è¯¥valueä»¥<code>Promise</code>å¯¹è±¡å½¢å¼ä½¿ç”¨ã€‚</p><pre><code class="js">const p_1 = Promise.resolve(&#39;success&#39;);p_1.then(data =&gt; &#123;    console.log(data);   // success&#125;)2</code></pre><h2 id="åŸå‹æ–¹æ³•"><a href="#åŸå‹æ–¹æ³•" class="headerlink" title="åŸå‹æ–¹æ³•"></a>åŸå‹æ–¹æ³•</h2><h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><p><code>catch()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œå¹¶ä¸”å¤„ç†æ‹’ç»çš„æƒ…å†µã€‚</p><pre><code class="js">//åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise ï¼Œä¸”å·²å†³è®®var p1 = Promise.resolve(&quot;calling next&quot;);var p2 = p1.catch(function (reason) &#123;    //è¿™ä¸ªæ–¹æ³•æ°¸è¿œä¸ä¼šè°ƒç”¨    console.log(&quot;catch p1!&quot;);    console.log(reason);&#125;);p2.then(function (value) &#123;    console.log(&quot;next promise&#39;s onFulfilled&quot;); /* next promise&#39;s onFulfilled */    console.log(value); /* calling next */&#125;, function (reason) &#123;    console.log(&quot;next promise&#39;s onRejected&quot;);    console.log(reason);&#125;);</code></pre><h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p><code>finally()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª<code>Promise</code>ã€‚åœ¨<code>promise</code>ç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯<code>fulfilled</code>æˆ–è€…æ˜¯<code>rejected</code>ï¼Œéƒ½ä¼šæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ºåœ¨<code>Promise</code>æ˜¯å¦æˆåŠŸå®Œæˆåéƒ½éœ€è¦æ‰§è¡Œçš„ä»£ç æä¾›äº†ä¸€ç§æ–¹å¼ã€‚</p><pre><code class="js">let isLoading = true;fetch(myRequest).then(function(response) &#123;    var contentType = response.headers.get(&quot;content-type&quot;);    if(contentType &amp;&amp; contentType.includes(&quot;application/json&quot;)) &#123;      return response.json();    &#125;    throw new TypeError(&quot;Oops, we haven&#39;t got JSON!&quot;);  &#125;)  .then(function(json) &#123; /* process your JSON further */ &#125;)  .catch(function(error) &#123; console.log(error); &#125;)  .finally(function() &#123; isLoading = false; &#125;);</code></pre><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><p><code>then()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Promise</code>ã€‚å®ƒæœ€å¤šéœ€è¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼š<code>Promise</code> çš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µçš„å›è°ƒå‡½æ•°ã€‚</p><pre><code class="js">var p1 = new Promise((resolve, reject) =&gt; &#123;  resolve(&#39;æˆåŠŸï¼&#39;);  // or  // reject(new Error(&quot;å‡ºé”™äº†ï¼&quot;));&#125;);p1.then(value =&gt; &#123;  console.log(value); // æˆåŠŸï¼&#125;, reason =&gt; &#123;  console.error(reason); // å‡ºé”™äº†ï¼&#125;);</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;/&gt;

&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;&lt;code&gt;promise&lt;/code&gt;æ˜¯ä¸€ä¸ª</summary>
      
    
    
    
    <category term="Js" scheme="https://shinichikudo-fe.github.io/categories/Js/"/>
    
    
    <category term="å­¦ä¹ Javascriptåº”æ‡‚å¾—33ä¸ªæ¦‚å¿µ" scheme="https://shinichikudo-fe.github.io/tags/%E5%AD%A6%E4%B9%A0Javascript%E5%BA%94%E6%87%82%E5%BE%9733%E4%B8%AA%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
</feed>
